var fd=Object.defineProperty;var dd=(e,t,n)=>t in e?fd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ve=(e,t,n)=>(dd(e,typeof t!="symbol"?t+"":t,n),n);/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function hd(e,t){const n=new Set(e.split(","));return t?s=>n.has(s.toLowerCase()):s=>n.has(s)}const pd=()=>{},gd=Object.prototype.hasOwnProperty,io=(e,t)=>gd.call(e,t),yn=Array.isArray,to=e=>Wc(e)==="[object Map]",yd=e=>typeof e=="function",vd=e=>typeof e=="string",xo=e=>typeof e=="symbol",Ro=e=>e!==null&&typeof e=="object",_d=Object.prototype.toString,Wc=e=>_d.call(e),md=e=>Wc(e).slice(8,-1),fi=e=>vd(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ls=(e,t)=>!Object.is(e,t),wd=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})};/**
* @vue/reactivity v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let at;class Kc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=at,!t&&at&&(this.index=(at.scopes||(at.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=at;try{return at=this,t()}finally{at=n}}}on(){at=this}off(){at=this.parent}stop(t){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function zc(e){return new Kc(e)}function bd(e,t=at){t&&t.active&&t.effects.push(e)}function Gc(){return at}function Ed(e){at&&at.cleanups.push(e)}let Nn;class di{constructor(t,n,s,o){this.fn=t,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,bd(this,o)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Vn();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(xd(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),jn()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=vn,n=Nn;try{return vn=!0,Nn=this,this._runnings++,fa(this),this.fn()}finally{da(this),this._runnings--,Nn=n,vn=t}}stop(){var t;this.active&&(fa(this),da(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function xd(e){return e.value}function fa(e){e._trackId++,e._depsLength=0}function da(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Jc(e.deps[t],e);e.deps.length=e._depsLength}}function Jc(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let vn=!0,Ur=0;const Zc=[];function Vn(){Zc.push(vn),vn=!1}function jn(){const e=Zc.pop();vn=e===void 0?!0:e}function hi(){Ur++}function pi(){for(Ur--;!Ur&&Nr.length;)Nr.shift()()}function Yc(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const s=e.deps[e._depsLength];s!==t?(s&&Jc(s,e),e.deps[e._depsLength++]=t):e._depsLength++}}const Nr=[];function Qc(e,t,n){hi();for(const s of e.keys()){let o;s._dirtyLevel<t&&(o??(o=e.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(o??(o=e.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&Nr.push(s.scheduler)))}pi()}const Xc=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},ao=new WeakMap,Bn=Symbol(""),Br=Symbol("");function ot(e,t,n){if(vn&&Nn){let s=ao.get(e);s||ao.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=Xc(()=>s.delete(n))),Yc(Nn,o)}}function qt(e,t,n,s,o,r){const i=ao.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(n==="length"&&yn(e)){const c=Number(s);i.forEach((l,u)=>{(u==="length"||!xo(u)&&u>=c)&&a.push(l)})}else switch(n!==void 0&&a.push(i.get(n)),t){case"add":yn(e)?fi(n)&&a.push(i.get("length")):(a.push(i.get(Bn)),to(e)&&a.push(i.get(Br)));break;case"delete":yn(e)||(a.push(i.get(Bn)),to(e)&&a.push(i.get(Br)));break;case"set":to(e)&&a.push(i.get(Bn));break}hi();for(const c of a)c&&Qc(c,4);pi()}function Rd(e,t){var n;return(n=ao.get(e))==null?void 0:n.get(t)}const Sd=hd("__proto__,__v_isRef,__isVue"),el=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(xo)),ha=kd();function kd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=Se(this);for(let r=0,i=this.length;r<i;r++)ot(s,"get",r+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(Se)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Vn(),hi();const s=Se(this)[t].apply(this,n);return pi(),jn(),s}}),e}function Cd(e){const t=Se(this);return ot(t,"has",e),t.hasOwnProperty(e)}class tl{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,s){const o=this._isReadonly,r=this._shallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(o?r?Fd:rl:r?ol:sl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const i=yn(t);if(!o){if(i&&io(ha,n))return Reflect.get(ha,n,s);if(n==="hasOwnProperty")return Cd}const a=Reflect.get(t,n,s);return(xo(n)?el.has(n):Sd(n))||(o||ot(t,"get",n),r)?a:Fe(a)?i&&fi(n)?a:a.value:Ro(a)?o?al(a):us(a):a}}class nl extends tl{constructor(t=!1){super(!1,t)}set(t,n,s,o){let r=t[n];if(!this._shallow){const c=es(r);if(!co(s)&&!es(s)&&(r=Se(r),s=Se(s)),!yn(t)&&Fe(r)&&!Fe(s))return c?!1:(r.value=s,!0)}const i=yn(t)&&fi(n)?Number(n)<t.length:io(t,n),a=Reflect.set(t,n,s,o);return t===Se(o)&&(i?ls(s,r)&&qt(t,"set",n,s):qt(t,"add",n,s)),a}deleteProperty(t,n){const s=io(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&s&&qt(t,"delete",n,void 0),o}has(t,n){const s=Reflect.has(t,n);return(!xo(n)||!el.has(n))&&ot(t,"has",n),s}ownKeys(t){return ot(t,"iterate",yn(t)?"length":Bn),Reflect.ownKeys(t)}}class $d extends tl{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Pd=new nl,Id=new $d,Ad=new nl(!0),gi=e=>e,So=e=>Reflect.getPrototypeOf(e);function Ks(e,t,n=!1,s=!1){e=e.__v_raw;const o=Se(e),r=Se(t);n||(ls(t,r)&&ot(o,"get",t),ot(o,"get",r));const{has:i}=So(o),a=s?gi:n?_i:Ps;if(i.call(o,t))return a(e.get(t));if(i.call(o,r))return a(e.get(r));e!==o&&e.get(t)}function zs(e,t=!1){const n=this.__v_raw,s=Se(n),o=Se(e);return t||(ls(e,o)&&ot(s,"has",e),ot(s,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function Gs(e,t=!1){return e=e.__v_raw,!t&&ot(Se(e),"iterate",Bn),Reflect.get(e,"size",e)}function pa(e){e=Se(e);const t=Se(this);return So(t).has.call(t,e)||(t.add(e),qt(t,"add",e,e)),this}function ga(e,t){t=Se(t);const n=Se(this),{has:s,get:o}=So(n);let r=s.call(n,e);r||(e=Se(e),r=s.call(n,e));const i=o.call(n,e);return n.set(e,t),r?ls(t,i)&&qt(n,"set",e,t):qt(n,"add",e,t),this}function ya(e){const t=Se(this),{has:n,get:s}=So(t);let o=n.call(t,e);o||(e=Se(e),o=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return o&&qt(t,"delete",e,void 0),r}function va(){const e=Se(this),t=e.size!==0,n=e.clear();return t&&qt(e,"clear",void 0,void 0),n}function Js(e,t){return function(s,o){const r=this,i=r.__v_raw,a=Se(i),c=t?gi:e?_i:Ps;return!e&&ot(a,"iterate",Bn),i.forEach((l,u)=>s.call(o,c(l),c(u),r))}}function Zs(e,t,n){return function(...s){const o=this.__v_raw,r=Se(o),i=to(r),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,l=o[e](...s),u=n?gi:t?_i:Ps;return!t&&ot(r,"iterate",c?Br:Bn),{next(){const{value:f,done:d}=l.next();return d?{value:f,done:d}:{value:a?[u(f[0]),u(f[1])]:u(f),done:d}},[Symbol.iterator](){return this}}}}function Xt(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Td(){const e={get(r){return Ks(this,r)},get size(){return Gs(this)},has:zs,add:pa,set:ga,delete:ya,clear:va,forEach:Js(!1,!1)},t={get(r){return Ks(this,r,!1,!0)},get size(){return Gs(this)},has:zs,add:pa,set:ga,delete:ya,clear:va,forEach:Js(!1,!0)},n={get(r){return Ks(this,r,!0)},get size(){return Gs(this,!0)},has(r){return zs.call(this,r,!0)},add:Xt("add"),set:Xt("set"),delete:Xt("delete"),clear:Xt("clear"),forEach:Js(!0,!1)},s={get(r){return Ks(this,r,!0,!0)},get size(){return Gs(this,!0)},has(r){return zs.call(this,r,!0)},add:Xt("add"),set:Xt("set"),delete:Xt("delete"),clear:Xt("clear"),forEach:Js(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Zs(r,!1,!1),n[r]=Zs(r,!0,!1),t[r]=Zs(r,!1,!0),s[r]=Zs(r,!0,!0)}),[e,n,t,s]}const[Ld,Ud,Nd,Bd]=Td();function yi(e,t){const n=t?e?Bd:Nd:e?Ud:Ld;return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(io(n,o)&&o in s?n:s,o,r)}const Md={get:yi(!1,!1)},Od={get:yi(!1,!0)},Hd={get:yi(!0,!1)},sl=new WeakMap,ol=new WeakMap,rl=new WeakMap,Fd=new WeakMap;function Vd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jd(e){return e.__v_skip||!Object.isExtensible(e)?0:Vd(md(e))}function us(e){return es(e)?e:vi(e,!1,Pd,Md,sl)}function il(e){return vi(e,!1,Ad,Od,ol)}function al(e){return vi(e,!0,Id,Hd,rl)}function vi(e,t,n,s,o){if(!Ro(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const i=jd(e);if(i===0)return e;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function _n(e){return es(e)?_n(e.__v_raw):!!(e&&e.__v_isReactive)}function es(e){return!!(e&&e.__v_isReadonly)}function co(e){return!!(e&&e.__v_isShallow)}function cl(e){return _n(e)||es(e)}function Se(e){const t=e&&e.__v_raw;return t?Se(t):e}function ko(e){return Object.isExtensible(e)&&wd(e,"__v_skip",!0),e}const Ps=e=>Ro(e)?us(e):e,_i=e=>Ro(e)?al(e):e;class ll{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new di(()=>t(this._value),()=>no(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=Se(this);return(!t._cacheable||t.effect.dirty)&&ls(t._value,t._value=t.effect.run())&&no(t,4),ul(t),t.effect._dirtyLevel>=2&&no(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Dd(e,t,n=!1){let s,o;const r=yd(e);return r?(s=e,o=pd):(s=e.get,o=e.set),new ll(s,o,r||!o,n)}function ul(e){var t;vn&&Nn&&(e=Se(e),Yc(Nn,(t=e.dep)!=null?t:e.dep=Xc(()=>e.dep=void 0,e instanceof ll?e:void 0)))}function no(e,t=4,n){e=Se(e);const s=e.dep;s&&Qc(s,t)}function Fe(e){return!!(e&&e.__v_isRef===!0)}function V(e){return fl(e,!1)}function qd(e){return fl(e,!0)}function fl(e,t){return Fe(e)?e:new Wd(e,t)}class Wd{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Se(t),this._value=n?t:Ps(t)}get value(){return ul(this),this._value}set value(t){const n=this.__v_isShallow||co(t)||es(t);t=n?t:Se(t),ls(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Ps(t),no(this,4))}}function ue(e){return Fe(e)?e.value:e}const Kd={get:(e,t,n)=>ue(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return Fe(o)&&!Fe(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function dl(e){return _n(e)?e:new Proxy(e,Kd)}function zd(e){const t=yn(e)?new Array(e.length):{};for(const n in e)t[n]=Jd(e,n);return t}class Gd{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Rd(Se(this._object),this._key)}}function Jd(e,t,n){const s=e[t];return Fe(s)?s:new Gd(e,t,n)}/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zd(e,t){const n=new Set(e.split(","));return t?s=>n.has(s.toLowerCase()):s=>n.has(s)}const Te={},Zn=[],dt=()=>{},Yd=()=>!1,mi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),hl=e=>e.startsWith("onUpdate:"),Ze=Object.assign,wi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Qd=Object.prototype.hasOwnProperty,Pe=(e,t)=>Qd.call(e,t),Ee=Array.isArray,pl=e=>bi(e)==="[object Map]",gl=e=>bi(e)==="[object Set]",_e=e=>typeof e=="function",rt=e=>typeof e=="string",yl=e=>typeof e=="symbol",Oe=e=>e!==null&&typeof e=="object",vl=e=>(Oe(e)||_e(e))&&_e(e.then)&&_e(e.catch),_l=Object.prototype.toString,bi=e=>_l.call(e),ml=e=>bi(e)==="[object Object]",ws=Zd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Co=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Xd=/-(\w)/g,Lt=Co(e=>e.replace(Xd,(t,n)=>n?n.toUpperCase():"")),eh=/\B([A-Z])/g,$o=Co(e=>e.replace(eh,"-$1").toLowerCase()),Ei=Co(e=>e.charAt(0).toUpperCase()+e.slice(1)),lr=Co(e=>e?`on${Ei(e)}`:""),_a=(e,t)=>!Object.is(e,t),ur=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Mr=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},th=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ma;const wl=()=>ma||(ma=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function xi(e){if(Ee(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=rt(s)?rh(s):xi(s);if(o)for(const r in o)t[r]=o[r]}return t}else if(rt(e)||Oe(e))return e}const nh=/;(?![^(]*\))/g,sh=/:([^]+)/,oh=/\/\*[^]*?\*\//g;function rh(e){const t={};return e.replace(oh,"").split(nh).forEach(n=>{if(n){const s=n.split(sh);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ce(e){let t="";if(rt(e))t=e;else if(Ee(e))for(let n=0;n<e.length;n++){const s=Ce(e[n]);s&&(t+=s+" ")}else if(Oe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const le=e=>rt(e)?e:e==null?"":Ee(e)||Oe(e)&&(e.toString===_l||!_e(e.toString))?JSON.stringify(e,bl,2):String(e),bl=(e,t)=>t&&t.__v_isRef?bl(e,t.value):pl(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o],r)=>(n[fr(s,r)+" =>"]=o,n),{})}:gl(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>fr(n))}:yl(t)?fr(t):Oe(t)&&!Ee(t)&&!ml(t)?String(t):t,fr=(e,t="")=>{var n;return yl(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/runtime-core v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function mn(e,t,n,s){try{return s?e(...s):e()}catch(o){Po(o,t,n)}}function vt(e,t,n,s){if(_e(e)){const r=mn(e,t,n,s);return r&&vl(r)&&r.catch(i=>{Po(i,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(vt(e[r],t,n,s));return o}function Po(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const l=r.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,i,a)===!1)return}r=r.parent}const c=t.appContext.config.errorHandler;if(c){mn(c,null,10,[e,i,a]);return}}ih(e,n,o,s)}function ih(e,t,n,s=!0){console.error(e)}let Is=!1,Or=!1;const ze=[];let It=0;const Yn=[];let ln=null,An=0;const El=Promise.resolve();let Ri=null;function On(e){const t=Ri||El;return e?t.then(this?e.bind(this):e):t}function ah(e){let t=It+1,n=ze.length;for(;t<n;){const s=t+n>>>1,o=ze[s],r=As(o);r<e||r===e&&o.pre?t=s+1:n=s}return t}function Si(e){(!ze.length||!ze.includes(e,Is&&e.allowRecurse?It+1:It))&&(e.id==null?ze.push(e):ze.splice(ah(e.id),0,e),xl())}function xl(){!Is&&!Or&&(Or=!0,Ri=El.then(Sl))}function ch(e){const t=ze.indexOf(e);t>It&&ze.splice(t,1)}function lh(e){Ee(e)?Yn.push(...e):(!ln||!ln.includes(e,e.allowRecurse?An+1:An))&&Yn.push(e),xl()}function wa(e,t,n=Is?It+1:0){for(;n<ze.length;n++){const s=ze[n];if(s&&s.pre){if(e&&s.id!==e.uid)continue;ze.splice(n,1),n--,s()}}}function Rl(e){if(Yn.length){const t=[...new Set(Yn)].sort((n,s)=>As(n)-As(s));if(Yn.length=0,ln){ln.push(...t);return}for(ln=t,An=0;An<ln.length;An++)ln[An]();ln=null,An=0}}const As=e=>e.id==null?1/0:e.id,uh=(e,t)=>{const n=As(e)-As(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function Sl(e){Or=!1,Is=!0,ze.sort(uh);const t=dt;try{for(It=0;It<ze.length;It++){const n=ze[It];n&&n.active!==!1&&mn(n,null,14)}}finally{It=0,ze.length=0,Rl(),Is=!1,Ri=null,(ze.length||Yn.length)&&Sl()}}function fh(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Te;let o=n;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in s){const u=`${i==="modelValue"?"model":i}Modifiers`,{number:f,trim:d}=s[u]||Te;d&&(o=n.map(h=>rt(h)?h.trim():h)),f&&(o=n.map(th))}let a,c=s[a=lr(t)]||s[a=lr(Lt(t))];!c&&r&&(c=s[a=lr($o(t))]),c&&vt(c,e,6,o);const l=s[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,vt(l,e,6,o)}}function kl(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},a=!1;if(!_e(e)){const c=l=>{const u=kl(l,t,!0);u&&(a=!0,Ze(i,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!a?(Oe(e)&&s.set(e,null),null):(Ee(r)?r.forEach(c=>i[c]=null):Ze(i,r),Oe(e)&&s.set(e,i),i)}function Io(e,t){return!e||!mi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,$o(t))||Pe(e,t))}let He=null,Ao=null;function lo(e){const t=He;return He=e,Ao=e&&e.type.__scopeId||null,t}function Xe(e){Ao=e}function et(){Ao=null}function Ke(e,t=He,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&Aa(-1);const r=lo(t);let i;try{i=e(...o)}finally{lo(r),s._d&&Aa(1)}return i};return s._n=!0,s._c=!0,s._d=!0,s}function dr(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:r,propsOptions:[i],slots:a,attrs:c,emit:l,render:u,renderCache:f,data:d,setupState:h,ctx:v,inheritAttrs:g}=e;let m,w;const E=lo(e);try{if(n.shapeFlag&4){const A=o||s,L=A;m=$t(u.call(L,A,f,r,h,d,v)),w=c}else{const A=t;m=$t(A.length>1?A(r,{attrs:c,slots:a,emit:l}):A(r,null)),w=t.props?c:dh(c)}}catch(A){xs.length=0,Po(A,e,1),m=ye(En)}let x=m;if(w&&g!==!1){const A=Object.keys(w),{shapeFlag:L}=x;A.length&&L&7&&(i&&A.some(hl)&&(w=hh(w,i)),x=ts(x,w))}return n.dirs&&(x=ts(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),m=x,lo(E),m}const dh=e=>{let t;for(const n in e)(n==="class"||n==="style"||mi(n))&&((t||(t={}))[n]=e[n]);return t},hh=(e,t)=>{const n={};for(const s in e)(!hl(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function ph(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:a,patchFlag:c}=t,l=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?ba(s,i,l):!!i;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const d=u[f];if(i[d]!==s[d]&&!Io(l,d))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?ba(s,i,l):!0:!!i;return!1}function ba(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!Io(n,r))return!0}return!1}function gh({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Cl="components";function Ts(e,t){return vh(Cl,e,!0,t)||e}const yh=Symbol.for("v-ndc");function vh(e,t,n=!0,s=!1){const o=He||qe;if(o){const r=o.type;if(e===Cl){const a=lp(r,!1);if(a&&(a===t||a===Lt(t)||a===Ei(Lt(t))))return r}const i=Ea(o[e]||r[e],t)||Ea(o.appContext[e],t);return!i&&s?r:i}}function Ea(e,t){return e&&(e[t]||e[Lt(t)]||e[Ei(Lt(t))])}const _h=e=>e.__isSuspense;function mh(e,t){t&&t.pendingBranch?Ee(e)?t.effects.push(...e):t.effects.push(e):lh(e)}const wh=Symbol.for("v-scx"),bh=()=>ht(wh);function Eh(e,t){return ki(e,null,t)}const Ys={};function ct(e,t,n){return ki(e,t,n)}function ki(e,t,{immediate:n,deep:s,flush:o,once:r,onTrack:i,onTrigger:a}=Te){if(t&&r){const P=t;t=(...D)=>{P(...D),L()}}const c=qe,l=P=>s===!0?P:Ln(P,s===!1?1:void 0);let u,f=!1,d=!1;if(Fe(e)?(u=()=>e.value,f=co(e)):_n(e)?(u=()=>l(e),f=!0):Ee(e)?(d=!0,f=e.some(P=>_n(P)||co(P)),u=()=>e.map(P=>{if(Fe(P))return P.value;if(_n(P))return l(P);if(_e(P))return mn(P,c,2)})):_e(e)?t?u=()=>mn(e,c,2):u=()=>(h&&h(),vt(e,c,3,[v])):u=dt,t&&s){const P=u;u=()=>Ln(P())}let h,v=P=>{h=x.onStop=()=>{mn(P,c,4),h=x.onStop=void 0}},g;if(No)if(v=dt,t?n&&vt(t,c,3,[u(),d?[]:void 0,v]):u(),o==="sync"){const P=bh();g=P.__watcherHandles||(P.__watcherHandles=[])}else return dt;let m=d?new Array(e.length).fill(Ys):Ys;const w=()=>{if(!(!x.active||!x.dirty))if(t){const P=x.run();(s||f||(d?P.some((D,B)=>_a(D,m[B])):_a(P,m)))&&(h&&h(),vt(t,c,3,[P,m===Ys?void 0:d&&m[0]===Ys?[]:m,v]),m=P)}else x.run()};w.allowRecurse=!!t;let E;o==="sync"?E=w:o==="post"?E=()=>tt(w,c&&c.suspense):(w.pre=!0,c&&(w.id=c.uid),E=()=>Si(w));const x=new di(u,dt,E),A=Gc(),L=()=>{x.stop(),A&&wi(A.effects,x)};return t?n?w():m=x.run():o==="post"?tt(x.run.bind(x),c&&c.suspense):x.run(),g&&g.push(L),L}function xh(e,t,n){const s=this.proxy,o=rt(e)?e.includes(".")?$l(s,e):()=>s[e]:e.bind(s,s);let r;_e(t)?r=t:(r=t.handler,n=t);const i=Hs(this),a=ki(o,r.bind(s),n);return i(),a}function $l(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function Ln(e,t,n=0,s){if(!Oe(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(s=s||new Set,s.has(e))return e;if(s.add(e),Fe(e))Ln(e.value,t,n,s);else if(Ee(e))for(let o=0;o<e.length;o++)Ln(e[o],t,n,s);else if(gl(e)||pl(e))e.forEach(o=>{Ln(o,t,n,s)});else if(ml(e))for(const o in e)Ln(e[o],t,n,s);return e}function Wt(e,t){if(He===null)return e;const n=Bo(He)||He.proxy,s=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,i,a,c=Te]=t[o];r&&(_e(r)&&(r={mounted:r,updated:r}),r.deep&&Ln(i),s.push({dir:r,instance:n,value:i,oldValue:void 0,arg:a,modifiers:c}))}return e}function Cn(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let c=a.dir[s];c&&(Vn(),vt(c,n,8,[e.el,a,e,t]),jn())}}/*! #__NO_SIDE_EFFECTS__ */function Ae(e,t){return _e(e)?(()=>Ze({name:e.name},t,{setup:e}))():e}const bs=e=>!!e.type.__asyncLoader,Pl=e=>e.type.__isKeepAlive;function Rh(e,t){Il(e,"a",t)}function Sh(e,t){Il(e,"da",t)}function Il(e,t,n=qe){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(To(t,s,n),n){let o=n.parent;for(;o&&o.parent;)Pl(o.parent.vnode)&&kh(s,t,n,o),o=o.parent}}function kh(e,t,n,s){const o=To(t,e,s,!0);Ll(()=>{wi(s[t],o)},n)}function To(e,t,n=qe,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;Vn();const a=Hs(n),c=vt(t,n,e,i);return a(),jn(),c});return s?o.unshift(r):o.push(r),r}}const Jt=e=>(t,n=qe)=>(!No||e==="sp")&&To(e,(...s)=>t(...s),n),Al=Jt("bm"),mt=Jt("m"),Ci=Jt("bu"),Tl=Jt("u"),Ch=Jt("bum"),Ll=Jt("um"),$h=Jt("sp"),Ph=Jt("rtg"),Ih=Jt("rtc");function Ah(e,t=qe){To("ec",e,t)}function Qe(e,t,n,s){let o;const r=n&&n[s];if(Ee(e)||rt(e)){o=new Array(e.length);for(let i=0,a=e.length;i<a;i++)o[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r&&r[i])}else if(Oe(e))if(e[Symbol.iterator])o=Array.from(e,(i,a)=>t(i,a,void 0,r&&r[a]));else{const i=Object.keys(e);o=new Array(i.length);for(let a=0,c=i.length;a<c;a++){const l=i[a];o[a]=t(e[l],l,a,r&&r[a])}}else o=[];return n&&(n[s]=o),o}function Th(e,t,n={},s,o){if(He.isCE||He.parent&&bs(He.parent)&&He.parent.isCE)return t!=="default"&&(n.name=t),ye("slot",n,s&&s());let r=e[t];r&&r._c&&(r._d=!1),C();const i=r&&Ul(r(n)),a=Le(be,{key:n.key||i&&i.key||`_${t}`},i||(s?s():[]),i&&e._===1?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Ul(e){return e.some(t=>fo(t)?!(t.type===En||t.type===be&&!Ul(t.children)):!0)?e:null}const Hr=e=>e?Kl(e)?Bo(e)||e.proxy:Hr(e.parent):null,Es=Ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hr(e.parent),$root:e=>Hr(e.root),$emit:e=>e.emit,$options:e=>$i(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Si(e.update)}),$nextTick:e=>e.n||(e.n=On.bind(e.proxy)),$watch:e=>xh.bind(e)}),hr=(e,t)=>e!==Te&&!e.__isScriptSetup&&Pe(e,t),Lh={get({_:e},t){const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(hr(s,t))return i[t]=1,s[t];if(o!==Te&&Pe(o,t))return i[t]=2,o[t];if((l=e.propsOptions[0])&&Pe(l,t))return i[t]=3,r[t];if(n!==Te&&Pe(n,t))return i[t]=4,n[t];Fr&&(i[t]=0)}}const u=Es[t];let f,d;if(u)return t==="$attrs"&&ot(e,"get",t),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Te&&Pe(n,t))return i[t]=4,n[t];if(d=c.config.globalProperties,Pe(d,t))return d[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return hr(o,t)?(o[t]=n,!0):s!==Te&&Pe(s,t)?(s[t]=n,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let a;return!!n[i]||e!==Te&&Pe(e,i)||hr(t,i)||(a=r[0])&&Pe(a,i)||Pe(s,i)||Pe(Es,i)||Pe(o.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function xa(e){return Ee(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Fr=!0;function Uh(e){const t=$i(e),n=e.proxy,s=e.ctx;Fr=!1,t.beforeCreate&&Ra(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:a,provide:c,inject:l,created:u,beforeMount:f,mounted:d,beforeUpdate:h,updated:v,activated:g,deactivated:m,beforeDestroy:w,beforeUnmount:E,destroyed:x,unmounted:A,render:L,renderTracked:P,renderTriggered:D,errorCaptured:B,serverPrefetch:J,expose:M,inheritAttrs:Z,components:ae,directives:re,filters:oe}=t;if(l&&Nh(l,s,null),i)for(const k in i){const T=i[k];_e(T)&&(s[k]=T.bind(n))}if(o){const k=o.call(n,n);Oe(k)&&(e.data=us(k))}if(Fr=!0,r)for(const k in r){const T=r[k],N=_e(T)?T.bind(n,n):_e(T.get)?T.get.bind(n,n):dt,Q=!_e(T)&&_e(T.set)?T.set.bind(n):dt,Y=me({get:N,set:Q});Object.defineProperty(s,k,{enumerable:!0,configurable:!0,get:()=>Y.value,set:z=>Y.value=z})}if(a)for(const k in a)Nl(a[k],s,n,k);if(c){const k=_e(c)?c.call(n):c;Reflect.ownKeys(k).forEach(T=>{so(T,k[T])})}u&&Ra(u,e,"c");function R(k,T){Ee(T)?T.forEach(N=>k(N.bind(n))):T&&k(T.bind(n))}if(R(Al,f),R(mt,d),R(Ci,h),R(Tl,v),R(Rh,g),R(Sh,m),R(Ah,B),R(Ih,P),R(Ph,D),R(Ch,E),R(Ll,A),R($h,J),Ee(M))if(M.length){const k=e.exposed||(e.exposed={});M.forEach(T=>{Object.defineProperty(k,T,{get:()=>n[T],set:N=>n[T]=N})})}else e.exposed||(e.exposed={});L&&e.render===dt&&(e.render=L),Z!=null&&(e.inheritAttrs=Z),ae&&(e.components=ae),re&&(e.directives=re)}function Nh(e,t,n=dt){Ee(e)&&(e=Vr(e));for(const s in e){const o=e[s];let r;Oe(o)?"default"in o?r=ht(o.from||s,o.default,!0):r=ht(o.from||s):r=ht(o),Fe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[s]=r}}function Ra(e,t,n){vt(Ee(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function Nl(e,t,n,s){const o=s.includes(".")?$l(n,s):()=>n[s];if(rt(e)){const r=t[e];_e(r)&&ct(o,r)}else if(_e(e))ct(o,e.bind(n));else if(Oe(e))if(Ee(e))e.forEach(r=>Nl(r,t,n,s));else{const r=_e(e.handler)?e.handler.bind(n):t[e.handler];_e(r)&&ct(o,r,e)}}function $i(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let c;return a?c=a:!o.length&&!n&&!s?c=t:(c={},o.length&&o.forEach(l=>uo(c,l,i,!0)),uo(c,t,i)),Oe(t)&&r.set(t,c),c}function uo(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&uo(e,r,n,!0),o&&o.forEach(i=>uo(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const a=Bh[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const Bh={data:Sa,props:ka,emits:ka,methods:ms,computed:ms,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:ms,directives:ms,watch:Oh,provide:Sa,inject:Mh};function Sa(e,t){return t?e?function(){return Ze(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function Mh(e,t){return ms(Vr(e),Vr(t))}function Vr(e){if(Ee(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ye(e,t){return e?[...new Set([].concat(e,t))]:t}function ms(e,t){return e?Ze(Object.create(null),e,t):t}function ka(e,t){return e?Ee(e)&&Ee(t)?[...new Set([...e,...t])]:Ze(Object.create(null),xa(e),xa(t??{})):t}function Oh(e,t){if(!e)return t;if(!t)return e;const n=Ze(Object.create(null),e);for(const s in t)n[s]=Ye(e[s],t[s]);return n}function Bl(){return{app:null,config:{isNativeTag:Yd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hh=0;function Fh(e,t){return function(s,o=null){_e(s)||(s=Ze({},s)),o!=null&&!Oe(o)&&(o=null);const r=Bl(),i=new WeakSet;let a=!1;const c=r.app={_uid:Hh++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:fp,get config(){return r.config},set config(l){},use(l,...u){return i.has(l)||(l&&_e(l.install)?(i.add(l),l.install(c,...u)):_e(l)&&(i.add(l),l(c,...u))),c},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),c},component(l,u){return u?(r.components[l]=u,c):r.components[l]},directive(l,u){return u?(r.directives[l]=u,c):r.directives[l]},mount(l,u,f){if(!a){const d=ye(s,o);return d.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),u&&t?t(d,l):e(d,l,f),a=!0,c._container=l,l.__vue_app__=c,Bo(d.component)||d.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return r.provides[l]=u,c},runWithContext(l){const u=Qn;Qn=c;try{return l()}finally{Qn=u}}};return c}}let Qn=null;function so(e,t){if(qe){let n=qe.provides;const s=qe.parent&&qe.parent.provides;s===n&&(n=qe.provides=Object.create(s)),n[e]=t}}function ht(e,t,n=!1){const s=qe||He;if(s||Qn){const o=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Qn._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&_e(t)?t.call(s&&s.proxy):t}}function Vh(){return!!(qe||He||Qn)}function jh(e,t,n,s=!1){const o={},r={};Mr(r,Uo,1),e.propsDefaults=Object.create(null),Ml(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:il(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Dh(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,a=Se(o),[c]=e.propsOptions;let l=!1;if((s||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let d=u[f];if(Io(e.emitsOptions,d))continue;const h=t[d];if(c)if(Pe(r,d))h!==r[d]&&(r[d]=h,l=!0);else{const v=Lt(d);o[v]=jr(c,a,v,h,e,!1)}else h!==r[d]&&(r[d]=h,l=!0)}}}else{Ml(e,t,o,r)&&(l=!0);let u;for(const f in a)(!t||!Pe(t,f)&&((u=$o(f))===f||!Pe(t,u)))&&(c?n&&(n[f]!==void 0||n[u]!==void 0)&&(o[f]=jr(c,a,f,void 0,e,!0)):delete o[f]);if(r!==a)for(const f in r)(!t||!Pe(t,f))&&(delete r[f],l=!0)}l&&qt(e,"set","$attrs")}function Ml(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,a;if(t)for(let c in t){if(ws(c))continue;const l=t[c];let u;o&&Pe(o,u=Lt(c))?!r||!r.includes(u)?n[u]=l:(a||(a={}))[u]=l:Io(e.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,i=!0)}if(r){const c=Se(n),l=a||Te;for(let u=0;u<r.length;u++){const f=r[u];n[f]=jr(o,c,f,l[f],e,!Pe(l,f))}}return i}function jr(e,t,n,s,o,r){const i=e[n];if(i!=null){const a=Pe(i,"default");if(a&&s===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&_e(c)){const{propsDefaults:l}=o;if(n in l)s=l[n];else{const u=Hs(o);s=l[n]=c.call(null,t),u()}}else s=c}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===$o(n))&&(s=!0))}return s}function Ol(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},a=[];let c=!1;if(!_e(e)){const u=f=>{c=!0;const[d,h]=Ol(f,t,!0);Ze(i,d),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!c)return Oe(e)&&s.set(e,Zn),Zn;if(Ee(r))for(let u=0;u<r.length;u++){const f=Lt(r[u]);Ca(f)&&(i[f]=Te)}else if(r)for(const u in r){const f=Lt(u);if(Ca(f)){const d=r[u],h=i[f]=Ee(d)||_e(d)?{type:d}:Ze({},d);if(h){const v=Ia(Boolean,h.type),g=Ia(String,h.type);h[0]=v>-1,h[1]=g<0||v<g,(v>-1||Pe(h,"default"))&&a.push(f)}}}const l=[i,a];return Oe(e)&&s.set(e,l),l}function Ca(e){return e[0]!=="$"&&!ws(e)}function $a(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Pa(e,t){return $a(e)===$a(t)}function Ia(e,t){return Ee(t)?t.findIndex(n=>Pa(n,e)):_e(t)&&Pa(t,e)?0:-1}const Hl=e=>e[0]==="_"||e==="$stable",Pi=e=>Ee(e)?e.map($t):[$t(e)],qh=(e,t,n)=>{if(t._n)return t;const s=Ke((...o)=>Pi(t(...o)),n);return s._c=!1,s},Fl=(e,t,n)=>{const s=e._ctx;for(const o in e){if(Hl(o))continue;const r=e[o];if(_e(r))t[o]=qh(o,r,s);else if(r!=null){const i=Pi(r);t[o]=()=>i}}},Vl=(e,t)=>{const n=Pi(t);e.slots.default=()=>n},Wh=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Se(t),Mr(t,"_",n)):Fl(t,e.slots={})}else e.slots={},t&&Vl(e,t);Mr(e.slots,Uo,1)},Kh=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=Te;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(Ze(o,t),!n&&a===1&&delete o._):(r=!t.$stable,Fl(t,o)),i=t}else t&&(Vl(e,t),i={default:1});if(r)for(const a in o)!Hl(a)&&i[a]==null&&delete o[a]};function Dr(e,t,n,s,o=!1){if(Ee(e)){e.forEach((d,h)=>Dr(d,t&&(Ee(t)?t[h]:t),n,s,o));return}if(bs(s)&&!o)return;const r=s.shapeFlag&4?Bo(s.component)||s.component.proxy:s.el,i=o?null:r,{i:a,r:c}=e,l=t&&t.r,u=a.refs===Te?a.refs={}:a.refs,f=a.setupState;if(l!=null&&l!==c&&(rt(l)?(u[l]=null,Pe(f,l)&&(f[l]=null)):Fe(l)&&(l.value=null)),_e(c))mn(c,a,12,[i,u]);else{const d=rt(c),h=Fe(c);if(d||h){const v=()=>{if(e.f){const g=d?Pe(f,c)?f[c]:u[c]:c.value;o?Ee(g)&&wi(g,r):Ee(g)?g.includes(r)||g.push(r):d?(u[c]=[r],Pe(f,c)&&(f[c]=u[c])):(c.value=[r],e.k&&(u[e.k]=c.value))}else d?(u[c]=i,Pe(f,c)&&(f[c]=i)):h&&(c.value=i,e.k&&(u[e.k]=i))};i?(v.id=-1,tt(v,n)):v()}}}const tt=mh;function zh(e){return Gh(e)}function Gh(e,t){const n=wl();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:c,setText:l,setElementText:u,parentNode:f,nextSibling:d,setScopeId:h=dt,insertStaticContent:v}=e,g=(p,_,S,$=null,I=null,W=null,ne=void 0,X=null,ee=!!_.dynamicChildren)=>{if(p===_)return;p&&!gs(p,_)&&($=b(p),z(p,I,W,!0),p=null),_.patchFlag===-2&&(ee=!1,_.dynamicChildren=null);const{type:j,ref:se,shapeFlag:de}=_;switch(j){case Lo:m(p,_,S,$);break;case En:w(p,_,S,$);break;case oo:p==null&&E(_,S,$,ne);break;case be:ae(p,_,S,$,I,W,ne,X,ee);break;default:de&1?L(p,_,S,$,I,W,ne,X,ee):de&6?re(p,_,S,$,I,W,ne,X,ee):(de&64||de&128)&&j.process(p,_,S,$,I,W,ne,X,ee,te)}se!=null&&I&&Dr(se,p&&p.ref,W,_||p,!_)},m=(p,_,S,$)=>{if(p==null)s(_.el=a(_.children),S,$);else{const I=_.el=p.el;_.children!==p.children&&l(I,_.children)}},w=(p,_,S,$)=>{p==null?s(_.el=c(_.children||""),S,$):_.el=p.el},E=(p,_,S,$)=>{[p.el,p.anchor]=v(p.children,_,S,$,p.el,p.anchor)},x=({el:p,anchor:_},S,$)=>{let I;for(;p&&p!==_;)I=d(p),s(p,S,$),p=I;s(_,S,$)},A=({el:p,anchor:_})=>{let S;for(;p&&p!==_;)S=d(p),o(p),p=S;o(_)},L=(p,_,S,$,I,W,ne,X,ee)=>{_.type==="svg"?ne="svg":_.type==="math"&&(ne="mathml"),p==null?P(_,S,$,I,W,ne,X,ee):J(p,_,I,W,ne,X,ee)},P=(p,_,S,$,I,W,ne,X)=>{let ee,j;const{props:se,shapeFlag:de,transition:ce,dirs:ge}=p;if(ee=p.el=i(p.type,W,se&&se.is,se),de&8?u(ee,p.children):de&16&&B(p.children,ee,null,$,I,pr(p,W),ne,X),ge&&Cn(p,null,$,"created"),D(ee,p,p.scopeId,ne,$),se){for(const Ie in se)Ie!=="value"&&!ws(Ie)&&r(ee,Ie,null,se[Ie],W,p.children,$,I,G);"value"in se&&r(ee,"value",null,se.value,W),(j=se.onVnodeBeforeMount)&&bt(j,$,p)}ge&&Cn(p,null,$,"beforeMount");const we=Jh(I,ce);we&&ce.beforeEnter(ee),s(ee,_,S),((j=se&&se.onVnodeMounted)||we||ge)&&tt(()=>{j&&bt(j,$,p),we&&ce.enter(ee),ge&&Cn(p,null,$,"mounted")},I)},D=(p,_,S,$,I)=>{if(S&&h(p,S),$)for(let W=0;W<$.length;W++)h(p,$[W]);if(I){let W=I.subTree;if(_===W){const ne=I.vnode;D(p,ne,ne.scopeId,ne.slotScopeIds,I.parent)}}},B=(p,_,S,$,I,W,ne,X,ee=0)=>{for(let j=ee;j<p.length;j++){const se=p[j]=X?un(p[j]):$t(p[j]);g(null,se,_,S,$,I,W,ne,X)}},J=(p,_,S,$,I,W,ne)=>{const X=_.el=p.el;let{patchFlag:ee,dynamicChildren:j,dirs:se}=_;ee|=p.patchFlag&16;const de=p.props||Te,ce=_.props||Te;let ge;if(S&&$n(S,!1),(ge=ce.onVnodeBeforeUpdate)&&bt(ge,S,_,p),se&&Cn(_,p,S,"beforeUpdate"),S&&$n(S,!0),j?M(p.dynamicChildren,j,X,S,$,pr(_,I),W):ne||T(p,_,X,null,S,$,pr(_,I),W,!1),ee>0){if(ee&16)Z(X,_,de,ce,S,$,I);else if(ee&2&&de.class!==ce.class&&r(X,"class",null,ce.class,I),ee&4&&r(X,"style",de.style,ce.style,I),ee&8){const we=_.dynamicProps;for(let Ie=0;Ie<we.length;Ie++){const Ue=we[Ie],Ve=de[Ue],pt=ce[Ue];(pt!==Ve||Ue==="value")&&r(X,Ue,Ve,pt,I,p.children,S,$,G)}}ee&1&&p.children!==_.children&&u(X,_.children)}else!ne&&j==null&&Z(X,_,de,ce,S,$,I);((ge=ce.onVnodeUpdated)||se)&&tt(()=>{ge&&bt(ge,S,_,p),se&&Cn(_,p,S,"updated")},$)},M=(p,_,S,$,I,W,ne)=>{for(let X=0;X<_.length;X++){const ee=p[X],j=_[X],se=ee.el&&(ee.type===be||!gs(ee,j)||ee.shapeFlag&70)?f(ee.el):S;g(ee,j,se,null,$,I,W,ne,!0)}},Z=(p,_,S,$,I,W,ne)=>{if(S!==$){if(S!==Te)for(const X in S)!ws(X)&&!(X in $)&&r(p,X,S[X],null,ne,_.children,I,W,G);for(const X in $){if(ws(X))continue;const ee=$[X],j=S[X];ee!==j&&X!=="value"&&r(p,X,j,ee,ne,_.children,I,W,G)}"value"in $&&r(p,"value",S.value,$.value,ne)}},ae=(p,_,S,$,I,W,ne,X,ee)=>{const j=_.el=p?p.el:a(""),se=_.anchor=p?p.anchor:a("");let{patchFlag:de,dynamicChildren:ce,slotScopeIds:ge}=_;ge&&(X=X?X.concat(ge):ge),p==null?(s(j,S,$),s(se,S,$),B(_.children||[],S,se,I,W,ne,X,ee)):de>0&&de&64&&ce&&p.dynamicChildren?(M(p.dynamicChildren,ce,S,I,W,ne,X),(_.key!=null||I&&_===I.subTree)&&jl(p,_,!0)):T(p,_,S,se,I,W,ne,X,ee)},re=(p,_,S,$,I,W,ne,X,ee)=>{_.slotScopeIds=X,p==null?_.shapeFlag&512?I.ctx.activate(_,S,$,ne,ee):oe(_,S,$,I,W,ne,ee):O(p,_,ee)},oe=(p,_,S,$,I,W,ne)=>{const X=p.component=op(p,$,I);if(Pl(p)&&(X.ctx.renderer=te),rp(X),X.asyncDep){if(I&&I.registerDep(X,R),!p.el){const ee=X.subTree=ye(En);w(null,ee,_,S)}}else R(X,p,_,S,I,W,ne)},O=(p,_,S)=>{const $=_.component=p.component;if(ph(p,_,S))if($.asyncDep&&!$.asyncResolved){k($,_,S);return}else $.next=_,ch($.update),$.effect.dirty=!0,$.update();else _.el=p.el,$.vnode=_},R=(p,_,S,$,I,W,ne)=>{const X=()=>{if(p.isMounted){let{next:se,bu:de,u:ce,parent:ge,vnode:we}=p;{const Wn=Dl(p);if(Wn){se&&(se.el=we.el,k(p,se,ne)),Wn.asyncDep.then(()=>{p.isUnmounted||X()});return}}let Ie=se,Ue;$n(p,!1),se?(se.el=we.el,k(p,se,ne)):se=we,de&&ur(de),(Ue=se.props&&se.props.onVnodeBeforeUpdate)&&bt(Ue,ge,se,we),$n(p,!0);const Ve=dr(p),pt=p.subTree;p.subTree=Ve,g(pt,Ve,f(pt.el),b(pt),p,I,W),se.el=Ve.el,Ie===null&&gh(p,Ve.el),ce&&tt(ce,I),(Ue=se.props&&se.props.onVnodeUpdated)&&tt(()=>bt(Ue,ge,se,we),I)}else{let se;const{el:de,props:ce}=_,{bm:ge,m:we,parent:Ie}=p,Ue=bs(_);if($n(p,!1),ge&&ur(ge),!Ue&&(se=ce&&ce.onVnodeBeforeMount)&&bt(se,Ie,_),$n(p,!0),de&&pe){const Ve=()=>{p.subTree=dr(p),pe(de,p.subTree,p,I,null)};Ue?_.type.__asyncLoader().then(()=>!p.isUnmounted&&Ve()):Ve()}else{const Ve=p.subTree=dr(p);g(null,Ve,S,$,p,I,W),_.el=Ve.el}if(we&&tt(we,I),!Ue&&(se=ce&&ce.onVnodeMounted)){const Ve=_;tt(()=>bt(se,Ie,Ve),I)}(_.shapeFlag&256||Ie&&bs(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&p.a&&tt(p.a,I),p.isMounted=!0,_=S=$=null}},ee=p.effect=new di(X,dt,()=>Si(j),p.scope),j=p.update=()=>{ee.dirty&&ee.run()};j.id=p.uid,$n(p,!0),j()},k=(p,_,S)=>{_.component=p;const $=p.vnode.props;p.vnode=_,p.next=null,Dh(p,_.props,$,S),Kh(p,_.children,S),Vn(),wa(p),jn()},T=(p,_,S,$,I,W,ne,X,ee=!1)=>{const j=p&&p.children,se=p?p.shapeFlag:0,de=_.children,{patchFlag:ce,shapeFlag:ge}=_;if(ce>0){if(ce&128){Q(j,de,S,$,I,W,ne,X,ee);return}else if(ce&256){N(j,de,S,$,I,W,ne,X,ee);return}}ge&8?(se&16&&G(j,I,W),de!==j&&u(S,de)):se&16?ge&16?Q(j,de,S,$,I,W,ne,X,ee):G(j,I,W,!0):(se&8&&u(S,""),ge&16&&B(de,S,$,I,W,ne,X,ee))},N=(p,_,S,$,I,W,ne,X,ee)=>{p=p||Zn,_=_||Zn;const j=p.length,se=_.length,de=Math.min(j,se);let ce;for(ce=0;ce<de;ce++){const ge=_[ce]=ee?un(_[ce]):$t(_[ce]);g(p[ce],ge,S,null,I,W,ne,X,ee)}j>se?G(p,I,W,!0,!1,de):B(_,S,$,I,W,ne,X,ee,de)},Q=(p,_,S,$,I,W,ne,X,ee)=>{let j=0;const se=_.length;let de=p.length-1,ce=se-1;for(;j<=de&&j<=ce;){const ge=p[j],we=_[j]=ee?un(_[j]):$t(_[j]);if(gs(ge,we))g(ge,we,S,null,I,W,ne,X,ee);else break;j++}for(;j<=de&&j<=ce;){const ge=p[de],we=_[ce]=ee?un(_[ce]):$t(_[ce]);if(gs(ge,we))g(ge,we,S,null,I,W,ne,X,ee);else break;de--,ce--}if(j>de){if(j<=ce){const ge=ce+1,we=ge<se?_[ge].el:$;for(;j<=ce;)g(null,_[j]=ee?un(_[j]):$t(_[j]),S,we,I,W,ne,X,ee),j++}}else if(j>ce)for(;j<=de;)z(p[j],I,W,!0),j++;else{const ge=j,we=j,Ie=new Map;for(j=we;j<=ce;j++){const it=_[j]=ee?un(_[j]):$t(_[j]);it.key!=null&&Ie.set(it.key,j)}let Ue,Ve=0;const pt=ce-we+1;let Wn=!1,ca=0;const ps=new Array(pt);for(j=0;j<pt;j++)ps[j]=0;for(j=ge;j<=de;j++){const it=p[j];if(Ve>=pt){z(it,I,W,!0);continue}let wt;if(it.key!=null)wt=Ie.get(it.key);else for(Ue=we;Ue<=ce;Ue++)if(ps[Ue-we]===0&&gs(it,_[Ue])){wt=Ue;break}wt===void 0?z(it,I,W,!0):(ps[wt-we]=j+1,wt>=ca?ca=wt:Wn=!0,g(it,_[wt],S,null,I,W,ne,X,ee),Ve++)}const la=Wn?Zh(ps):Zn;for(Ue=la.length-1,j=pt-1;j>=0;j--){const it=we+j,wt=_[it],ua=it+1<se?_[it+1].el:$;ps[j]===0?g(null,wt,S,ua,I,W,ne,X,ee):Wn&&(Ue<0||j!==la[Ue]?Y(wt,S,ua,2):Ue--)}}},Y=(p,_,S,$,I=null)=>{const{el:W,type:ne,transition:X,children:ee,shapeFlag:j}=p;if(j&6){Y(p.component.subTree,_,S,$);return}if(j&128){p.suspense.move(_,S,$);return}if(j&64){ne.move(p,_,S,te);return}if(ne===be){s(W,_,S);for(let de=0;de<ee.length;de++)Y(ee[de],_,S,$);s(p.anchor,_,S);return}if(ne===oo){x(p,_,S);return}if($!==2&&j&1&&X)if($===0)X.beforeEnter(W),s(W,_,S),tt(()=>X.enter(W),I);else{const{leave:de,delayLeave:ce,afterLeave:ge}=X,we=()=>s(W,_,S),Ie=()=>{de(W,()=>{we(),ge&&ge()})};ce?ce(W,we,Ie):Ie()}else s(W,_,S)},z=(p,_,S,$=!1,I=!1)=>{const{type:W,props:ne,ref:X,children:ee,dynamicChildren:j,shapeFlag:se,patchFlag:de,dirs:ce}=p;if(X!=null&&Dr(X,null,S,p,!0),se&256){_.ctx.deactivate(p);return}const ge=se&1&&ce,we=!bs(p);let Ie;if(we&&(Ie=ne&&ne.onVnodeBeforeUnmount)&&bt(Ie,_,p),se&6)H(p.component,S,$);else{if(se&128){p.suspense.unmount(S,$);return}ge&&Cn(p,null,_,"beforeUnmount"),se&64?p.type.remove(p,_,S,I,te,$):j&&(W!==be||de>0&&de&64)?G(j,_,S,!1,!0):(W===be&&de&384||!I&&se&16)&&G(ee,_,S),$&&fe(p)}(we&&(Ie=ne&&ne.onVnodeUnmounted)||ge)&&tt(()=>{Ie&&bt(Ie,_,p),ge&&Cn(p,null,_,"unmounted")},S)},fe=p=>{const{type:_,el:S,anchor:$,transition:I}=p;if(_===be){K(S,$);return}if(_===oo){A(p);return}const W=()=>{o(S),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(p.shapeFlag&1&&I&&!I.persisted){const{leave:ne,delayLeave:X}=I,ee=()=>ne(S,W);X?X(p.el,W,ee):ee()}else W()},K=(p,_)=>{let S;for(;p!==_;)S=d(p),o(p),p=S;o(_)},H=(p,_,S)=>{const{bum:$,scope:I,update:W,subTree:ne,um:X}=p;$&&ur($),I.stop(),W&&(W.active=!1,z(ne,p,_,S)),X&&tt(X,_),tt(()=>{p.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},G=(p,_,S,$=!1,I=!1,W=0)=>{for(let ne=W;ne<p.length;ne++)z(p[ne],_,S,$,I)},b=p=>p.shapeFlag&6?b(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el);let F=!1;const q=(p,_,S)=>{p==null?_._vnode&&z(_._vnode,null,null,!0):g(_._vnode||null,p,_,null,null,null,S),F||(F=!0,wa(),Rl(),F=!1),_._vnode=p},te={p:g,um:z,m:Y,r:fe,mt:oe,mc:B,pc:T,pbc:M,n:b,o:e};let he,pe;return t&&([he,pe]=t(te)),{render:q,hydrate:he,createApp:Fh(q,he)}}function pr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function $n({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Jh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function jl(e,t,n=!1){const s=e.children,o=t.children;if(Ee(s)&&Ee(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=un(o[r]),a.el=i.el),n||jl(i,a)),a.type===Lo&&(a.el=i.el)}}function Zh(e){const t=e.slice(),n=[0];let s,o,r,i,a;const c=e.length;for(s=0;s<c;s++){const l=e[s];if(l!==0){if(o=n[n.length-1],e[o]<l){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<l?r=a+1:i=a;l<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function Dl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Dl(t)}const Yh=e=>e.__isTeleport,be=Symbol.for("v-fgt"),Lo=Symbol.for("v-txt"),En=Symbol.for("v-cmt"),oo=Symbol.for("v-stc"),xs=[];let yt=null;function C(e=!1){xs.push(yt=e?null:[])}function Qh(){xs.pop(),yt=xs[xs.length-1]||null}let Ls=1;function Aa(e){Ls+=e}function ql(e){return e.dynamicChildren=Ls>0?yt||Zn:null,Qh(),Ls>0&&yt&&yt.push(e),e}function U(e,t,n,s,o,r){return ql(y(e,t,n,s,o,r,!0))}function Le(e,t,n,s,o){return ql(ye(e,t,n,s,o,!0))}function fo(e){return e?e.__v_isVNode===!0:!1}function gs(e,t){return e.type===t.type&&e.key===t.key}const Uo="__vInternal",Wl=({key:e})=>e??null,ro=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?rt(e)||Fe(e)||_e(e)?{i:He,r:e,k:t,f:!!n}:e:null);function y(e,t=null,n=null,s=0,o=null,r=e===be?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Wl(t),ref:t&&ro(t),scopeId:Ao,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:He};return a?(Ai(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=rt(n)?8:16),Ls>0&&!i&&yt&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&yt.push(c),c}const ye=Xh;function Xh(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===yh)&&(e=En),fo(e)){const a=ts(e,t,!0);return n&&Ai(a,n),Ls>0&&!r&&yt&&(a.shapeFlag&6?yt[yt.indexOf(e)]=a:yt.push(a)),a.patchFlag|=-2,a}if(up(e)&&(e=e.__vccOpts),t){t=ep(t);let{class:a,style:c}=t;a&&!rt(a)&&(t.class=Ce(a)),Oe(c)&&(cl(c)&&!Ee(c)&&(c=Ze({},c)),t.style=xi(c))}const i=rt(e)?1:_h(e)?128:Yh(e)?64:Oe(e)?4:_e(e)?2:0;return y(e,t,n,s,o,i,r,!0)}function ep(e){return e?cl(e)||Uo in e?Ze({},e):e:null}function ts(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:i}=e,a=t?tp(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Wl(a),ref:t&&t.ref?n&&o?Ee(o)?o.concat(ro(t)):[o,ro(t)]:ro(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==be?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ts(e.ssContent),ssFallback:e.ssFallback&&ts(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Re(e=" ",t=0){return ye(Lo,null,e,t)}function Ii(e,t){const n=ye(oo,null,e);return n.staticCount=t,n}function ie(e="",t=!1){return t?(C(),Le(En,null,e)):ye(En,null,e)}function $t(e){return e==null||typeof e=="boolean"?ye(En):Ee(e)?ye(be,null,e.slice()):typeof e=="object"?un(e):ye(Lo,null,String(e))}function un(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ts(e)}function Ai(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Ee(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),Ai(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(Uo in t)?t._ctx=He:o===3&&He&&(He.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:He},n=32):(t=String(t),s&64?(n=16,t=[Re(t)]):n=8);e.children=t,e.shapeFlag|=n}function tp(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Ce([t.class,s.class]));else if(o==="style")t.style=xi([t.style,s.style]);else if(mi(o)){const r=t[o],i=s[o];i&&r!==i&&!(Ee(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function bt(e,t,n,s=null){vt(e,t,7,[n,s])}const np=Bl();let sp=0;function op(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||np,r={uid:sp++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new Kc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ol(s,o),emitsOptions:kl(s,o),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:s.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=fh.bind(null,r),e.ce&&e.ce(r),r}let qe=null,ho,qr;{const e=wl(),t=(n,s)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(s),r=>{o.length>1?o.forEach(i=>i(r)):o[0](r)}};ho=t("__VUE_INSTANCE_SETTERS__",n=>qe=n),qr=t("__VUE_SSR_SETTERS__",n=>No=n)}const Hs=e=>{const t=qe;return ho(e),e.scope.on(),()=>{e.scope.off(),ho(t)}},Ta=()=>{qe&&qe.scope.off(),ho(null)};function Kl(e){return e.vnode.shapeFlag&4}let No=!1;function rp(e,t=!1){t&&qr(t);const{props:n,children:s}=e.vnode,o=Kl(e);jh(e,n,o,t),Wh(e,s);const r=o?ip(e,t):void 0;return t&&qr(!1),r}function ip(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=ko(new Proxy(e.ctx,Lh));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?cp(e):null,r=Hs(e);Vn();const i=mn(s,e,0,[e.props,o]);if(jn(),r(),vl(i)){if(i.then(Ta,Ta),t)return i.then(a=>{La(e,a,t)}).catch(a=>{Po(a,e,0)});e.asyncDep=i}else La(e,i,t)}else zl(e,t)}function La(e,t,n){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Oe(t)&&(e.setupState=dl(t)),zl(e,n)}let Ua;function zl(e,t,n){const s=e.type;if(!e.render){if(!t&&Ua&&!s.render){const o=s.template||$i(e).template;if(o){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Ze(Ze({isCustomElement:r,delimiters:a},i),c);s.render=Ua(o,l)}}e.render=s.render||dt}{const o=Hs(e);Vn();try{Uh(e)}finally{jn(),o()}}}function ap(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return ot(e,"get","$attrs"),t[n]}}))}function cp(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return ap(e)},slots:e.slots,emit:e.emit,expose:t}}function Bo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(dl(ko(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Es)return Es[n](e)},has(t,n){return n in t||n in Es}}))}function lp(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function up(e){return _e(e)&&"__vccOpts"in e}const me=(e,t)=>Dd(e,t,No);function Gl(e,t,n){const s=arguments.length;return s===2?Oe(t)&&!Ee(t)?fo(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&fo(n)&&(n=[n]),ye(e,t,n))}const fp="3.4.19";/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function dp(e,t){const n=new Set(e.split(","));return t?s=>n.has(s.toLowerCase()):s=>n.has(s)}const hp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),pp=e=>e.startsWith("onUpdate:"),gp=Object.assign,xn=Array.isArray,Mo=e=>Zl(e)==="[object Set]",Na=e=>Zl(e)==="[object Date]",Jl=e=>typeof e=="function",po=e=>typeof e=="string",Ba=e=>typeof e=="symbol",Ma=e=>e!==null&&typeof e=="object",yp=Object.prototype.toString,Zl=e=>yp.call(e),Yl=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},vp=/\B([A-Z])/g,Ql=Yl(e=>e.replace(vp,"-$1").toLowerCase()),_p=Yl(e=>e.charAt(0).toUpperCase()+e.slice(1)),mp=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},go=e=>{const t=parseFloat(e);return isNaN(t)?e:t},wp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bp=dp(wp);function Xl(e){return!!e||e===""}function Ep(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Fs(e[s],t[s]);return n}function Fs(e,t){if(e===t)return!0;let n=Na(e),s=Na(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Ba(e),s=Ba(t),n||s)return e===t;if(n=xn(e),s=xn(t),n||s)return n&&s?Ep(e,t):!1;if(n=Ma(e),s=Ma(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const i in e){const a=e.hasOwnProperty(i),c=t.hasOwnProperty(i);if(a&&!c||!a&&c||!Fs(e[i],t[i]))return!1}}return String(e)===String(t)}function Ti(e,t){return e.findIndex(n=>Fs(n,t))}/**
* @vue/runtime-dom v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const xp="http://www.w3.org/2000/svg",Rp="http://www.w3.org/1998/Math/MathML",fn=typeof document<"u"?document:null,Oa=fn&&fn.createElement("template"),Sp={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t==="svg"?fn.createElementNS(xp,e):t==="mathml"?fn.createElementNS(Rp,e):fn.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>fn.createTextNode(e),createComment:e=>fn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>fn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{Oa.innerHTML=s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e;const a=Oa.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},kp=Symbol("_vtc");function Cp(e,t,n){const s=e[kp];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ha=Symbol("_vod"),$p=Symbol(""),Pp=/(^|;)\s*display\s*:/;function Ip(e,t,n){const s=e.style,o=po(n),r=s.display;let i=!1;if(n&&!o){if(t&&!po(t))for(const a in t)n[a]==null&&Wr(s,a,"");for(const a in n)a==="display"&&(i=!0),Wr(s,a,n[a])}else if(o){if(t!==n){const a=s[$p];a&&(n+=";"+a),s.cssText=n,i=Pp.test(n)}}else t&&e.removeAttribute("style");Ha in e&&(e[Ha]=i?s.display:"",s.display=r)}const Fa=/\s*!important$/;function Wr(e,t,n){if(xn(n))n.forEach(s=>Wr(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Ap(e,t);Fa.test(n)?e.setProperty(Ql(s),n.replace(Fa,""),"important"):e[s]=n}}const Va=["Webkit","Moz","ms"],gr={};function Ap(e,t){const n=gr[t];if(n)return n;let s=Lt(t);if(s!=="filter"&&s in e)return gr[t]=s;s=_p(s);for(let o=0;o<Va.length;o++){const r=Va[o]+s;if(r in e)return gr[t]=r}return t}const ja="http://www.w3.org/1999/xlink";function Tp(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(ja,t.slice(6,t.length)):e.setAttributeNS(ja,t,n);else{const r=bp(t);n==null||r&&!Xl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function Lp(e,t,n,s,o,r,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,o,r),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const l=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";l!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let c=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Xl(n):n==null&&l==="string"?(n="",c=!0):l==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function hn(e,t,n,s){e.addEventListener(t,n,s)}function Up(e,t,n,s){e.removeEventListener(t,n,s)}const Da=Symbol("_vei");function Np(e,t,n,s,o=null){const r=e[Da]||(e[Da]={}),i=r[t];if(s&&i)i.value=s;else{const[a,c]=Bp(t);if(s){const l=r[t]=Hp(s,o);hn(e,a,l,c)}else i&&(Up(e,a,i,c),r[t]=void 0)}}const qa=/(?:Once|Passive|Capture)$/;function Bp(e){let t;if(qa.test(e)){t={};let s;for(;s=e.match(qa);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ql(e.slice(2)),t]}let yr=0;const Mp=Promise.resolve(),Op=()=>yr||(Mp.then(()=>yr=0),yr=Date.now());function Hp(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;vt(Fp(s,n.value),t,5,[s])};return n.value=e,n.attached=Op(),n}function Fp(e,t){if(xn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const Wa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Vp=(e,t,n,s,o,r,i,a,c)=>{const l=o==="svg";t==="class"?Cp(e,s,l):t==="style"?Ip(e,n,s):hp(t)?pp(t)||Np(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jp(e,t,s,l))?Lp(e,t,s,r,i,a,c):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Tp(e,t,s,l))};function jp(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Wa(t)&&Jl(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Wa(t)&&po(n)?!1:t in e}const ns=e=>{const t=e.props["onUpdate:modelValue"]||!1;return xn(t)?n=>mp(t,n):t};function Dp(e){e.target.composing=!0}function Ka(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Kt=Symbol("_assign"),Hn={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e[Kt]=ns(o);const r=s||o.props&&o.props.type==="number";hn(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=go(a)),e[Kt](a)}),n&&hn(e,"change",()=>{e.value=e.value.trim()}),t||(hn(e,"compositionstart",Dp),hn(e,"compositionend",Ka),hn(e,"change",Ka))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},r){if(e[Kt]=ns(r),e.composing)return;const i=o||e.type==="number"?go(e.value):e.value,a=t??"";i!==a&&(document.activeElement===e&&e.type!=="range"&&(n||s&&e.value.trim()===a)||(e.value=a))}},qp={deep:!0,created(e,t,n){e[Kt]=ns(n),hn(e,"change",()=>{const s=e._modelValue,o=Us(e),r=e.checked,i=e[Kt];if(xn(s)){const a=Ti(s,o),c=a!==-1;if(r&&!c)i(s.concat(o));else if(!r&&c){const l=[...s];l.splice(a,1),i(l)}}else if(Mo(s)){const a=new Set(s);r?a.add(o):a.delete(o),i(a)}else i(eu(e,r))})},mounted:za,beforeUpdate(e,t,n){e[Kt]=ns(n),za(e,t,n)}};function za(e,{value:t,oldValue:n},s){e._modelValue=t,xn(t)?e.checked=Ti(t,s.props.value)>-1:Mo(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=Fs(t,eu(e,!0)))}const Wp={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const o=Mo(t);hn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?go(Us(i)):Us(i));e[Kt](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,On(()=>{e._assigning=!1})}),e[Kt]=ns(s)},mounted(e,{value:t,oldValue:n,modifiers:{number:s}}){Ga(e,t,n,s)},beforeUpdate(e,t,n){e[Kt]=ns(n)},updated(e,{value:t,oldValue:n,modifiers:{number:s}}){e._assigning||Ga(e,t,n,s)}};function Ga(e,t,n,s){const o=e.multiple,r=xn(t);if(!(o&&!r&&!Mo(t))){for(let i=0,a=e.options.length;i<a;i++){const c=e.options[i],l=Us(c);if(o)if(r){const u=typeof l;u==="string"||u==="number"?c.selected=t.includes(s?go(l):l):c.selected=Ti(t,l)>-1}else c.selected=t.has(l);else if(Fs(Us(c),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Us(e){return"_value"in e?e._value:e.value}function eu(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Kp=["ctrl","shift","alt","meta"],zp={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Kp.some(n=>e[`${n}Key`]&&!t.includes(n))},Ns=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(o,...r)=>{for(let i=0;i<t.length;i++){const a=zp[t[i]];if(a&&a(o,t))return}return e(o,...r)})},Gp=gp({patchProp:Vp},Sp);let Ja;function Jp(){return Ja||(Ja=zh(Gp))}const Zp=(...e)=>{const t=Jp().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=Qp(s);if(!o)return;const r=t._component;!Jl(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,Yp(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function Yp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Qp(e){return po(e)?document.querySelector(e):e}var Xp=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let tu;const Oo=e=>tu=e,nu=Symbol();function Kr(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Rs;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Rs||(Rs={}));function eg(){const e=zc(!0),t=e.run(()=>V({}));let n=[],s=[];const o=ko({install(r){Oo(o),o._a=r,r.provide(nu,o),r.config.globalProperties.$pinia=o,s.forEach(i=>n.push(i)),s=[]},use(r){return!this._a&&!Xp?s.push(r):n.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const su=()=>{};function Za(e,t,n,s=su){e.push(t);const o=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),s())};return!n&&Gc()&&Ed(o),o}function Kn(e,...t){e.slice().forEach(n=>{n(...t)})}const tg=e=>e();function zr(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,s)=>e.set(s,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],o=e[n];Kr(o)&&Kr(s)&&e.hasOwnProperty(n)&&!Fe(s)&&!_n(s)?e[n]=zr(o,s):e[n]=s}return e}const ng=Symbol();function sg(e){return!Kr(e)||!e.hasOwnProperty(ng)}const{assign:cn}=Object;function og(e){return!!(Fe(e)&&e.effect)}function rg(e,t,n,s){const{state:o,actions:r,getters:i}=t,a=n.state.value[e];let c;function l(){a||(n.state.value[e]=o?o():{});const u=zd(n.state.value[e]);return cn(u,r,Object.keys(i||{}).reduce((f,d)=>(f[d]=ko(me(()=>{Oo(n);const h=n._s.get(e);return i[d].call(h,h)})),f),{}))}return c=ou(e,l,t,n,s,!0),c}function ou(e,t,n={},s,o,r){let i;const a=cn({actions:{}},n),c={deep:!0};let l,u,f=[],d=[],h;const v=s.state.value[e];!r&&!v&&(s.state.value[e]={}),V({});let g;function m(B){let J;l=u=!1,typeof B=="function"?(B(s.state.value[e]),J={type:Rs.patchFunction,storeId:e,events:h}):(zr(s.state.value[e],B),J={type:Rs.patchObject,payload:B,storeId:e,events:h});const M=g=Symbol();On().then(()=>{g===M&&(l=!0)}),u=!0,Kn(f,J,s.state.value[e])}const w=r?function(){const{state:J}=n,M=J?J():{};this.$patch(Z=>{cn(Z,M)})}:su;function E(){i.stop(),f=[],d=[],s._s.delete(e)}function x(B,J){return function(){Oo(s);const M=Array.from(arguments),Z=[],ae=[];function re(R){Z.push(R)}function oe(R){ae.push(R)}Kn(d,{args:M,name:B,store:L,after:re,onError:oe});let O;try{O=J.apply(this&&this.$id===e?this:L,M)}catch(R){throw Kn(ae,R),R}return O instanceof Promise?O.then(R=>(Kn(Z,R),R)).catch(R=>(Kn(ae,R),Promise.reject(R))):(Kn(Z,O),O)}}const A={_p:s,$id:e,$onAction:Za.bind(null,d),$patch:m,$reset:w,$subscribe(B,J={}){const M=Za(f,B,J.detached,()=>Z()),Z=i.run(()=>ct(()=>s.state.value[e],ae=>{(J.flush==="sync"?u:l)&&B({storeId:e,type:Rs.direct,events:h},ae)},cn({},c,J)));return M},$dispose:E},L=us(A);s._s.set(e,L);const D=(s._a&&s._a.runWithContext||tg)(()=>s._e.run(()=>(i=zc()).run(t)));for(const B in D){const J=D[B];if(Fe(J)&&!og(J)||_n(J))r||(v&&sg(J)&&(Fe(J)?J.value=v[B]:zr(J,v[B])),s.state.value[e][B]=J);else if(typeof J=="function"){const M=x(B,J);D[B]=M,a.actions[B]=J}}return cn(L,D),cn(Se(L),D),Object.defineProperty(L,"$state",{get:()=>s.state.value[e],set:B=>{m(J=>{cn(J,B)})}}),s._p.forEach(B=>{cn(L,i.run(()=>B({store:L,app:s._a,pinia:s,options:a})))}),v&&r&&n.hydrate&&n.hydrate(L.$state,v),l=!0,u=!0,L}function Nt(e,t,n){let s,o;const r=typeof t=="function";typeof e=="string"?(s=e,o=r?n:t):(o=e,s=e.id);function i(a,c){const l=Vh();return a=a||(l?ht(nu,null):null),a&&Oo(a),a=tu,a._s.has(s)||(r?ou(s,t,o,a):rg(s,o,a)),a._s.get(s)}return i.$id=s,i}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const zn=typeof window<"u";function ig(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const $e=Object.assign;function vr(e,t){const n={};for(const s in t){const o=t[s];n[s]=_t(o)?o.map(e):e(o)}return n}const Ss=()=>{},_t=Array.isArray,ag=/\/$/,cg=e=>e.replace(ag,"");function _r(e,t,n="/"){let s,o={},r="",i="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),o=e(r)),a>-1&&(s=s||t.slice(0,a),i=t.slice(a,t.length)),s=dg(s??t,n),{fullPath:s+(r&&"?")+r+i,path:s,query:o,hash:i}}function lg(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ya(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ug(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&ss(t.matched[s],n.matched[o])&&ru(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function ss(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function ru(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!fg(e[n],t[n]))return!1;return!0}function fg(e,t){return _t(e)?Qa(e,t):_t(t)?Qa(t,e):e===t}function Qa(e,t){return _t(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function dg(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),o=s[s.length-1];(o===".."||o===".")&&s.push("");let r=n.length-1,i,a;for(i=0;i<s.length;i++)if(a=s[i],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(i-(i===s.length?1:0)).join("/")}var Bs;(function(e){e.pop="pop",e.push="push"})(Bs||(Bs={}));var ks;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ks||(ks={}));function hg(e){if(!e)if(zn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),cg(e)}const pg=/^[^#]+#/;function gg(e,t){return e.replace(pg,"#")+t}function yg(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const Ho=()=>({left:window.pageXOffset,top:window.pageYOffset});function vg(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=yg(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Xa(e,t){return(history.state?history.state.position-t:-1)+e}const Gr=new Map;function _g(e,t){Gr.set(e,t)}function mg(e){const t=Gr.get(e);return Gr.delete(e),t}let wg=()=>location.protocol+"//"+location.host;function iu(e,t){const{pathname:n,search:s,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,c=o.slice(a);return c[0]!=="/"&&(c="/"+c),Ya(c,"")}return Ya(n,e)+s+o}function bg(e,t,n,s){let o=[],r=[],i=null;const a=({state:d})=>{const h=iu(e,location),v=n.value,g=t.value;let m=0;if(d){if(n.value=h,t.value=d,i&&i===v){i=null;return}m=g?d.position-g.position:0}else s(h);o.forEach(w=>{w(n.value,v,{delta:m,type:Bs.pop,direction:m?m>0?ks.forward:ks.back:ks.unknown})})};function c(){i=n.value}function l(d){o.push(d);const h=()=>{const v=o.indexOf(d);v>-1&&o.splice(v,1)};return r.push(h),h}function u(){const{history:d}=window;d.state&&d.replaceState($e({},d.state,{scroll:Ho()}),"")}function f(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:f}}function ec(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?Ho():null}}function Eg(e){const{history:t,location:n}=window,s={value:iu(e,n)},o={value:t.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,l,u){const f=e.indexOf("#"),d=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+c:wg()+e+c;try{t[u?"replaceState":"pushState"](l,"",d),o.value=l}catch(h){console.error(h),n[u?"replace":"assign"](d)}}function i(c,l){const u=$e({},t.state,ec(o.value.back,c,o.value.forward,!0),l,{position:o.value.position});r(c,u,!0),s.value=c}function a(c,l){const u=$e({},o.value,t.state,{forward:c,scroll:Ho()});r(u.current,u,!0);const f=$e({},ec(s.value,c,null),{position:u.position+1},l);r(c,f,!1),s.value=c}return{location:s,state:o,push:a,replace:i}}function xg(e){e=hg(e);const t=Eg(e),n=bg(e,t.state,t.location,t.replace);function s(r,i=!0){i||n.pauseListeners(),history.go(r)}const o=$e({location:"",base:e,go:s,createHref:gg.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Rg(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),xg(e)}function Sg(e){return typeof e=="string"||e&&typeof e=="object"}function au(e){return typeof e=="string"||typeof e=="symbol"}const en={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},cu=Symbol("");var tc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(tc||(tc={}));function os(e,t){return $e(new Error,{type:e,[cu]:!0},t)}function Ht(e,t){return e instanceof Error&&cu in e&&(t==null||!!(e.type&t))}const nc="[^/]+?",kg={sensitive:!1,strict:!1,start:!0,end:!0},Cg=/[.+*?^${}()[\]/\\]/g;function $g(e,t){const n=$e({},kg,t),s=[];let o=n.start?"^":"";const r=[];for(const l of e){const u=l.length?[]:[90];n.strict&&!l.length&&(o+="/");for(let f=0;f<l.length;f++){const d=l[f];let h=40+(n.sensitive?.25:0);if(d.type===0)f||(o+="/"),o+=d.value.replace(Cg,"\\$&"),h+=40;else if(d.type===1){const{value:v,repeatable:g,optional:m,regexp:w}=d;r.push({name:v,repeatable:g,optional:m});const E=w||nc;if(E!==nc){h+=10;try{new RegExp(`(${E})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${v}" (${E}): `+A.message)}}let x=g?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;f||(x=m&&l.length<2?`(?:/${x})`:"/"+x),m&&(x+="?"),o+=x,h+=20,m&&(h+=-8),g&&(h+=-20),E===".*"&&(h+=-50)}u.push(h)}s.push(u)}if(n.strict&&n.end){const l=s.length-1;s[l][s[l].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(l){const u=l.match(i),f={};if(!u)return null;for(let d=1;d<u.length;d++){const h=u[d]||"",v=r[d-1];f[v.name]=h&&v.repeatable?h.split("/"):h}return f}function c(l){let u="",f=!1;for(const d of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const h of d)if(h.type===0)u+=h.value;else if(h.type===1){const{value:v,repeatable:g,optional:m}=h,w=v in l?l[v]:"";if(_t(w)&&!g)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const E=_t(w)?w.join("/"):w;if(!E)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=E}}return u||"/"}return{re:i,score:s,keys:r,parse:a,stringify:c}}function Pg(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Ig(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const r=Pg(s[n],o[n]);if(r)return r;n++}if(Math.abs(o.length-s.length)===1){if(sc(s))return 1;if(sc(o))return-1}return o.length-s.length}function sc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Ag={type:0,value:""},Tg=/[a-zA-Z0-9_]/;function Lg(e){if(!e)return[[]];if(e==="/")return[[Ag]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,s=n;const o=[];let r;function i(){r&&o.push(r),r=[]}let a=0,c,l="",u="";function f(){l&&(n===0?r.push({type:0,value:l}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),l="")}function d(){l+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(l&&f(),i()):c===":"?(f(),n=1):d();break;case 4:d(),n=s;break;case 1:c==="("?n=2:Tg.test(c)?d():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${l}"`),f(),i(),o}function Ug(e,t,n){const s=$g(Lg(e.path),n),o=$e(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Ng(e,t){const n=[],s=new Map;t=ic({strict:!1,end:!0,sensitive:!1},t);function o(u){return s.get(u)}function r(u,f,d){const h=!d,v=Bg(u);v.aliasOf=d&&d.record;const g=ic(t,u),m=[v];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const A of x)m.push($e({},v,{components:d?d.record.components:v.components,path:A,aliasOf:d?d.record:v}))}let w,E;for(const x of m){const{path:A}=x;if(f&&A[0]!=="/"){const L=f.record.path,P=L[L.length-1]==="/"?"":"/";x.path=f.record.path+(A&&P+A)}if(w=Ug(x,f,g),d?d.alias.push(w):(E=E||w,E!==w&&E.alias.push(w),h&&u.name&&!rc(w)&&i(u.name)),v.children){const L=v.children;for(let P=0;P<L.length;P++)r(L[P],w,d&&d.children[P])}d=d||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&c(w)}return E?()=>{i(E)}:Ss}function i(u){if(au(u)){const f=s.get(u);f&&(s.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&s.delete(u.record.name),u.children.forEach(i),u.alias.forEach(i))}}function a(){return n}function c(u){let f=0;for(;f<n.length&&Ig(u,n[f])>=0&&(u.record.path!==n[f].record.path||!lu(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!rc(u)&&s.set(u.record.name,u)}function l(u,f){let d,h={},v,g;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw os(1,{location:u});g=d.record.name,h=$e(oc(f.params,d.keys.filter(E=>!E.optional).map(E=>E.name)),u.params&&oc(u.params,d.keys.map(E=>E.name))),v=d.stringify(h)}else if("path"in u)v=u.path,d=n.find(E=>E.re.test(v)),d&&(h=d.parse(v),g=d.record.name);else{if(d=f.name?s.get(f.name):n.find(E=>E.re.test(f.path)),!d)throw os(1,{location:u,currentLocation:f});g=d.record.name,h=$e({},f.params,u.params),v=d.stringify(h)}const m=[];let w=d;for(;w;)m.unshift(w.record),w=w.parent;return{name:g,path:v,params:h,matched:m,meta:Og(m)}}return e.forEach(u=>r(u)),{addRoute:r,resolve:l,removeRoute:i,getRoutes:a,getRecordMatcher:o}}function oc(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Bg(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Mg(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Mg(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function rc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Og(e){return e.reduce((t,n)=>$e(t,n.meta),{})}function ic(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function lu(e,t){return t.children.some(n=>n===e||lu(e,n))}const uu=/#/g,Hg=/&/g,Fg=/\//g,Vg=/=/g,jg=/\?/g,fu=/\+/g,Dg=/%5B/g,qg=/%5D/g,du=/%5E/g,Wg=/%60/g,hu=/%7B/g,Kg=/%7C/g,pu=/%7D/g,zg=/%20/g;function Li(e){return encodeURI(""+e).replace(Kg,"|").replace(Dg,"[").replace(qg,"]")}function Gg(e){return Li(e).replace(hu,"{").replace(pu,"}").replace(du,"^")}function Jr(e){return Li(e).replace(fu,"%2B").replace(zg,"+").replace(uu,"%23").replace(Hg,"%26").replace(Wg,"`").replace(hu,"{").replace(pu,"}").replace(du,"^")}function Jg(e){return Jr(e).replace(Vg,"%3D")}function Zg(e){return Li(e).replace(uu,"%23").replace(jg,"%3F")}function Yg(e){return e==null?"":Zg(e).replace(Fg,"%2F")}function yo(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Qg(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(fu," "),i=r.indexOf("="),a=yo(i<0?r:r.slice(0,i)),c=i<0?null:yo(r.slice(i+1));if(a in t){let l=t[a];_t(l)||(l=t[a]=[l]),l.push(c)}else t[a]=c}return t}function ac(e){let t="";for(let n in e){const s=e[n];if(n=Jg(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(_t(s)?s.map(r=>r&&Jr(r)):[s&&Jr(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Xg(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=_t(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}const ey=Symbol(""),cc=Symbol(""),Fo=Symbol(""),Ui=Symbol(""),Zr=Symbol("");function ys(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function dn(e,t,n,s,o){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((i,a)=>{const c=f=>{f===!1?a(os(4,{from:n,to:t})):f instanceof Error?a(f):Sg(f)?a(os(2,{from:t,to:f})):(r&&s.enterCallbacks[o]===r&&typeof f=="function"&&r.push(f),i())},l=e.call(s&&s.instances[o],t,n,c);let u=Promise.resolve(l);e.length<3&&(u=u.then(c)),u.catch(f=>a(f))})}function mr(e,t,n,s){const o=[];for(const r of e)for(const i in r.components){let a=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(ty(a)){const l=(a.__vccOpts||a)[t];l&&o.push(dn(l,n,s,r,i))}else{let c=a();o.push(()=>c.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${r.path}"`));const u=ig(l)?l.default:l;r.components[i]=u;const d=(u.__vccOpts||u)[t];return d&&dn(d,n,s,r,i)()}))}}return o}function ty(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function lc(e){const t=ht(Fo),n=ht(Ui),s=me(()=>t.resolve(ue(e.to))),o=me(()=>{const{matched:c}=s.value,{length:l}=c,u=c[l-1],f=n.matched;if(!u||!f.length)return-1;const d=f.findIndex(ss.bind(null,u));if(d>-1)return d;const h=uc(c[l-2]);return l>1&&uc(u)===h&&f[f.length-1].path!==h?f.findIndex(ss.bind(null,c[l-2])):d}),r=me(()=>o.value>-1&&ry(n.params,s.value.params)),i=me(()=>o.value>-1&&o.value===n.matched.length-1&&ru(n.params,s.value.params));function a(c={}){return oy(c)?t[ue(e.replace)?"replace":"push"](ue(e.to)).catch(Ss):Promise.resolve()}return{route:s,href:me(()=>s.value.href),isActive:r,isExactActive:i,navigate:a}}const ny=Ae({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:lc,setup(e,{slots:t}){const n=us(lc(e)),{options:s}=ht(Fo),o=me(()=>({[fc(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[fc(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:Gl("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),sy=ny;function oy(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ry(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!_t(o)||o.length!==s.length||s.some((r,i)=>r!==o[i]))return!1}return!0}function uc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const fc=(e,t,n)=>e??t??n,iy=Ae({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=ht(Zr),o=me(()=>e.route||s.value),r=ht(cc,0),i=me(()=>{let l=ue(r);const{matched:u}=o.value;let f;for(;(f=u[l])&&!f.components;)l++;return l}),a=me(()=>o.value.matched[i.value]);so(cc,me(()=>i.value+1)),so(ey,a),so(Zr,o);const c=V();return ct(()=>[c.value,a.value,e.name],([l,u,f],[d,h,v])=>{u&&(u.instances[f]=l,h&&h!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!ss(u,h)||!d)&&(u.enterCallbacks[f]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=o.value,u=e.name,f=a.value,d=f&&f.components[u];if(!d)return dc(n.default,{Component:d,route:l});const h=f.props[u],v=h?h===!0?l.params:typeof h=="function"?h(l):h:null,m=Gl(d,$e({},v,t,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return dc(n.default,{Component:m,route:l})||m}}});function dc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const ay=iy;function cy(e){const t=Ng(e.routes,e),n=e.parseQuery||Qg,s=e.stringifyQuery||ac,o=e.history,r=ys(),i=ys(),a=ys(),c=qd(en);let l=en;zn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=vr.bind(null,b=>""+b),f=vr.bind(null,Yg),d=vr.bind(null,yo);function h(b,F){let q,te;return au(b)?(q=t.getRecordMatcher(b),te=F):te=b,t.addRoute(te,q)}function v(b){const F=t.getRecordMatcher(b);F&&t.removeRoute(F)}function g(){return t.getRoutes().map(b=>b.record)}function m(b){return!!t.getRecordMatcher(b)}function w(b,F){if(F=$e({},F||c.value),typeof b=="string"){const _=_r(n,b,F.path),S=t.resolve({path:_.path},F),$=o.createHref(_.fullPath);return $e(_,S,{params:d(S.params),hash:yo(_.hash),redirectedFrom:void 0,href:$})}let q;if("path"in b)q=$e({},b,{path:_r(n,b.path,F.path).path});else{const _=$e({},b.params);for(const S in _)_[S]==null&&delete _[S];q=$e({},b,{params:f(_)}),F.params=f(F.params)}const te=t.resolve(q,F),he=b.hash||"";te.params=u(d(te.params));const pe=lg(s,$e({},b,{hash:Gg(he),path:te.path})),p=o.createHref(pe);return $e({fullPath:pe,hash:he,query:s===ac?Xg(b.query):b.query||{}},te,{redirectedFrom:void 0,href:p})}function E(b){return typeof b=="string"?_r(n,b,c.value.path):$e({},b)}function x(b,F){if(l!==b)return os(8,{from:F,to:b})}function A(b){return D(b)}function L(b){return A($e(E(b),{replace:!0}))}function P(b){const F=b.matched[b.matched.length-1];if(F&&F.redirect){const{redirect:q}=F;let te=typeof q=="function"?q(b):q;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=E(te):{path:te},te.params={}),$e({query:b.query,hash:b.hash,params:"path"in te?{}:b.params},te)}}function D(b,F){const q=l=w(b),te=c.value,he=b.state,pe=b.force,p=b.replace===!0,_=P(q);if(_)return D($e(E(_),{state:typeof _=="object"?$e({},he,_.state):he,force:pe,replace:p}),F||q);const S=q;S.redirectedFrom=F;let $;return!pe&&ug(s,te,q)&&($=os(16,{to:S,from:te}),Y(te,te,!0,!1)),($?Promise.resolve($):M(S,te)).catch(I=>Ht(I)?Ht(I,2)?I:Q(I):T(I,S,te)).then(I=>{if(I){if(Ht(I,2))return D($e({replace:p},E(I.to),{state:typeof I.to=="object"?$e({},he,I.to.state):he,force:pe}),F||S)}else I=ae(S,te,!0,p,he);return Z(S,te,I),I})}function B(b,F){const q=x(b,F);return q?Promise.reject(q):Promise.resolve()}function J(b){const F=K.values().next().value;return F&&typeof F.runWithContext=="function"?F.runWithContext(b):b()}function M(b,F){let q;const[te,he,pe]=ly(b,F);q=mr(te.reverse(),"beforeRouteLeave",b,F);for(const _ of te)_.leaveGuards.forEach(S=>{q.push(dn(S,b,F))});const p=B.bind(null,b,F);return q.push(p),G(q).then(()=>{q=[];for(const _ of r.list())q.push(dn(_,b,F));return q.push(p),G(q)}).then(()=>{q=mr(he,"beforeRouteUpdate",b,F);for(const _ of he)_.updateGuards.forEach(S=>{q.push(dn(S,b,F))});return q.push(p),G(q)}).then(()=>{q=[];for(const _ of pe)if(_.beforeEnter)if(_t(_.beforeEnter))for(const S of _.beforeEnter)q.push(dn(S,b,F));else q.push(dn(_.beforeEnter,b,F));return q.push(p),G(q)}).then(()=>(b.matched.forEach(_=>_.enterCallbacks={}),q=mr(pe,"beforeRouteEnter",b,F),q.push(p),G(q))).then(()=>{q=[];for(const _ of i.list())q.push(dn(_,b,F));return q.push(p),G(q)}).catch(_=>Ht(_,8)?_:Promise.reject(_))}function Z(b,F,q){a.list().forEach(te=>J(()=>te(b,F,q)))}function ae(b,F,q,te,he){const pe=x(b,F);if(pe)return pe;const p=F===en,_=zn?history.state:{};q&&(te||p?o.replace(b.fullPath,$e({scroll:p&&_&&_.scroll},he)):o.push(b.fullPath,he)),c.value=b,Y(b,F,q,p),Q()}let re;function oe(){re||(re=o.listen((b,F,q)=>{if(!H.listening)return;const te=w(b),he=P(te);if(he){D($e(he,{replace:!0}),te).catch(Ss);return}l=te;const pe=c.value;zn&&_g(Xa(pe.fullPath,q.delta),Ho()),M(te,pe).catch(p=>Ht(p,12)?p:Ht(p,2)?(D(p.to,te).then(_=>{Ht(_,20)&&!q.delta&&q.type===Bs.pop&&o.go(-1,!1)}).catch(Ss),Promise.reject()):(q.delta&&o.go(-q.delta,!1),T(p,te,pe))).then(p=>{p=p||ae(te,pe,!1),p&&(q.delta&&!Ht(p,8)?o.go(-q.delta,!1):q.type===Bs.pop&&Ht(p,20)&&o.go(-1,!1)),Z(te,pe,p)}).catch(Ss)}))}let O=ys(),R=ys(),k;function T(b,F,q){Q(b);const te=R.list();return te.length?te.forEach(he=>he(b,F,q)):console.error(b),Promise.reject(b)}function N(){return k&&c.value!==en?Promise.resolve():new Promise((b,F)=>{O.add([b,F])})}function Q(b){return k||(k=!b,oe(),O.list().forEach(([F,q])=>b?q(b):F()),O.reset()),b}function Y(b,F,q,te){const{scrollBehavior:he}=e;if(!zn||!he)return Promise.resolve();const pe=!q&&mg(Xa(b.fullPath,0))||(te||!q)&&history.state&&history.state.scroll||null;return On().then(()=>he(b,F,pe)).then(p=>p&&vg(p)).catch(p=>T(p,b,F))}const z=b=>o.go(b);let fe;const K=new Set,H={currentRoute:c,listening:!0,addRoute:h,removeRoute:v,hasRoute:m,getRoutes:g,resolve:w,options:e,push:A,replace:L,go:z,back:()=>z(-1),forward:()=>z(1),beforeEach:r.add,beforeResolve:i.add,afterEach:a.add,onError:R.add,isReady:N,install(b){const F=this;b.component("RouterLink",sy),b.component("RouterView",ay),b.config.globalProperties.$router=F,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(c)}),zn&&!fe&&c.value===en&&(fe=!0,A(o.location).catch(he=>{}));const q={};for(const he in en)Object.defineProperty(q,he,{get:()=>c.value[he],enumerable:!0});b.provide(Fo,F),b.provide(Ui,il(q)),b.provide(Zr,c);const te=b.unmount;K.add(b),b.unmount=function(){K.delete(b),K.size<1&&(l=en,re&&re(),re=null,c.value=en,fe=!1,k=!1),te()}}};function G(b){return b.reduce((F,q)=>F.then(()=>J(q)),Promise.resolve())}return H}function ly(e,t){const n=[],s=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let i=0;i<r;i++){const a=t.matched[i];a&&(e.matched.find(l=>ss(l,a))?s.push(a):n.push(a));const c=e.matched[i];c&&(t.matched.find(l=>ss(l,c))||o.push(c))}return[n,s,o]}function Vo(){return ht(Fo)}function Vs(){return ht(Ui)}function hc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function gu(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function uy(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");hc(e.outputLen),hc(e.blockLen)}function vo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fy(e,t){gu(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const wr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yu=e=>e instanceof Uint8Array,br=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Et=(e,t)=>e<<32-t|e>>>t,dy=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!dy)throw new Error("Non little-endian hardware is not supported");function hy(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ni(e){if(typeof e=="string"&&(e=hy(e)),!yu(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function py(...e){const t=new Uint8Array(e.reduce((s,o)=>s+o.length,0));let n=0;return e.forEach(s=>{if(!yu(s))throw new Error("Uint8Array expected");t.set(s,n),n+=s.length}),t}let vu=class{clone(){return this._cloneInto()}};function gy(e){const t=s=>e().update(Ni(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function _u(e=32){if(wr&&typeof wr.getRandomValues=="function")return wr.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function yy(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const o=BigInt(32),r=BigInt(4294967295),i=Number(n>>o&r),a=Number(n&r),c=s?4:0,l=s?0:4;e.setUint32(t+c,i,s),e.setUint32(t+l,a,s)}let vy=class extends vu{constructor(t,n,s,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=br(this.buffer)}update(t){vo(this);const{view:n,buffer:s,blockLen:o}=this;t=Ni(t);const r=t.length;for(let i=0;i<r;){const a=Math.min(o-this.pos,r-i);if(a===o){const c=br(t);for(;o<=r-i;i+=o)this.process(c,i);continue}s.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){vo(this),fy(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:o,isLE:r}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(s,0),i=0);for(let f=i;f<o;f++)n[f]=0;yy(s,o-8,BigInt(this.length*8),r),this.process(s,0);const a=br(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:o,finished:r,destroyed:i,pos:a}=this;return t.length=o,t.pos=a,t.finished=r,t.destroyed=i,o%n&&t.buffer.set(s),t}};const _y=(e,t,n)=>e&t^~e&n,my=(e,t,n)=>e&t^e&n^t&n,wy=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),tn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nn=new Uint32Array(64);let by=class extends vy{constructor(){super(64,32,8,!1),this.A=tn[0]|0,this.B=tn[1]|0,this.C=tn[2]|0,this.D=tn[3]|0,this.E=tn[4]|0,this.F=tn[5]|0,this.G=tn[6]|0,this.H=tn[7]|0}get(){const{A:t,B:n,C:s,D:o,E:r,F:i,G:a,H:c}=this;return[t,n,s,o,r,i,a,c]}set(t,n,s,o,r,i,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=o|0,this.E=r|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)nn[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=nn[f-15],h=nn[f-2],v=Et(d,7)^Et(d,18)^d>>>3,g=Et(h,17)^Et(h,19)^h>>>10;nn[f]=g+nn[f-7]+v+nn[f-16]|0}let{A:s,B:o,C:r,D:i,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Et(a,6)^Et(a,11)^Et(a,25),h=u+d+_y(a,c,l)+wy[f]+nn[f]|0,g=(Et(s,2)^Et(s,13)^Et(s,22))+my(s,o,r)|0;u=l,l=c,c=a,a=i+h|0,i=r,r=o,o=s,s=h+g|0}s=s+this.A|0,o=o+this.B|0,r=r+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(s,o,r,i,a,c,l,u)}roundClean(){nn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Yr=gy(()=>new by);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mu=BigInt(0),jo=BigInt(1),Ey=BigInt(2),Do=e=>e instanceof Uint8Array,xy=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function rs(e){if(!Do(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=xy[e[n]];return t}function wu(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Bi(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function is(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let s=0;s<n.length;s++){const o=s*2,r=e.slice(o,o+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[s]=i}return n}function st(e){return Bi(rs(e))}function Mi(e){if(!Do(e))throw new Error("Uint8Array expected");return Bi(rs(Uint8Array.from(e).reverse()))}function Rn(e,t){return is(e.toString(16).padStart(t*2,"0"))}function Oi(e,t){return Rn(e,t).reverse()}function Ry(e){return is(wu(e))}function We(e,t,n){let s;if(typeof t=="string")try{s=is(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(Do(t))s=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=s.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return s}function Fn(...e){const t=new Uint8Array(e.reduce((s,o)=>s+o.length,0));let n=0;return e.forEach(s=>{if(!Do(s))throw new Error("Uint8Array expected");t.set(s,n),n+=s.length}),t}function Sy(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ky(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Cy(e){let t;for(t=0;e>mu;e>>=jo,t+=1);return t}function $y(e,t){return e>>BigInt(t)&jo}const Py=(e,t,n)=>e|(n?jo:mu)<<BigInt(t),Hi=e=>(Ey<<BigInt(e-1))-jo,Er=e=>new Uint8Array(e),pc=e=>Uint8Array.from(e);function bu(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let s=Er(e),o=Er(e),r=0;const i=()=>{s.fill(1),o.fill(0),r=0},a=(...f)=>n(o,s,...f),c=(f=Er())=>{o=a(pc([0]),f),s=a(),f.length!==0&&(o=a(pc([1]),f),s=a())},l=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<t;){s=a();const h=s.slice();d.push(h),f+=s.length}return Fn(...d)};return(f,d)=>{i(),c(f);let h;for(;!(h=d(l()));)c();return i(),h}}const Iy={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function js(e,t,n={}){const s=(o,r,i)=>{const a=Iy[r];if(typeof a!="function")throw new Error(`Invalid validator "${r}", expected function`);const c=e[o];if(!(i&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${r}`)};for(const[o,r]of Object.entries(t))s(o,r,!1);for(const[o,r]of Object.entries(n))s(o,r,!0);return e}const Ay=Object.freeze(Object.defineProperty({__proto__:null,bitGet:$y,bitLen:Cy,bitMask:Hi,bitSet:Py,bytesToHex:rs,bytesToNumberBE:st,bytesToNumberLE:Mi,concatBytes:Fn,createHmacDrbg:bu,ensureBytes:We,equalBytes:Sy,hexToBytes:is,hexToNumber:Bi,numberToBytesBE:Rn,numberToBytesLE:Oi,numberToHexUnpadded:wu,numberToVarBytesBE:Ry,utf8ToBytes:ky,validateObject:js},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const je=BigInt(0),Ne=BigInt(1),Tn=BigInt(2),Ty=BigInt(3),Qr=BigInt(4),gc=BigInt(5),yc=BigInt(8);BigInt(9);BigInt(16);function De(e,t){const n=e%t;return n>=je?n:t+n}function Ly(e,t,n){if(n<=je||t<je)throw new Error("Expected power/modulo > 0");if(n===Ne)return je;let s=Ne;for(;t>je;)t&Ne&&(s=s*e%n),e=e*e%n,t>>=Ne;return s}function ut(e,t,n){let s=e;for(;t-- >je;)s*=s,s%=n;return s}function Xr(e,t){if(e===je||t<=je)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=De(e,t),s=t,o=je,r=Ne;for(;n!==je;){const a=s/n,c=s%n,l=o-r*a;s=n,n=c,o=r,r=l}if(s!==Ne)throw new Error("invert: does not exist");return De(o,t)}function Uy(e){const t=(e-Ne)/Tn;let n,s,o;for(n=e-Ne,s=0;n%Tn===je;n/=Tn,s++);for(o=Tn;o<e&&Ly(o,t,e)!==e-Ne;o++);if(s===1){const i=(e+Ne)/Qr;return function(c,l){const u=c.pow(l,i);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const r=(n+Ne)/Tn;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=s,u=a.pow(a.mul(a.ONE,o),n),f=a.pow(c,r),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let h=1;for(let g=a.sqr(d);h<l&&!a.eql(g,a.ONE);h++)g=a.sqr(g);const v=a.pow(u,Ne<<BigInt(l-h-1));u=a.sqr(v),f=a.mul(f,v),d=a.mul(d,u),l=h}return f}}function Ny(e){if(e%Qr===Ty){const t=(e+Ne)/Qr;return function(s,o){const r=s.pow(o,t);if(!s.eql(s.sqr(r),o))throw new Error("Cannot find square root");return r}}if(e%yc===gc){const t=(e-gc)/yc;return function(s,o){const r=s.mul(o,Tn),i=s.pow(r,t),a=s.mul(o,i),c=s.mul(s.mul(a,Tn),i),l=s.mul(a,s.sub(c,s.ONE));if(!s.eql(s.sqr(l),o))throw new Error("Cannot find square root");return l}}return Uy(e)}const By=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function My(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=By.reduce((s,o)=>(s[o]="function",s),t);return js(e,n)}function Oy(e,t,n){if(n<je)throw new Error("Expected power > 0");if(n===je)return e.ONE;if(n===Ne)return t;let s=e.ONE,o=t;for(;n>je;)n&Ne&&(s=e.mul(s,o)),o=e.sqr(o),n>>=Ne;return s}function Hy(e,t){const n=new Array(t.length),s=t.reduce((r,i,a)=>e.is0(i)?r:(n[a]=r,e.mul(r,i)),e.ONE),o=e.inv(s);return t.reduceRight((r,i,a)=>e.is0(i)?r:(n[a]=e.mul(r,n[a]),e.mul(r,i)),o),n}function Eu(e,t){const n=t!==void 0?t:e.toString(2).length,s=Math.ceil(n/8);return{nBitLength:n,nByteLength:s}}function Fy(e,t,n=!1,s={}){if(e<=je)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:r}=Eu(e,t);if(r>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=Ny(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:r,MASK:Hi(o),ZERO:je,ONE:Ne,create:c=>De(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return je<=c&&c<e},is0:c=>c===je,isOdd:c=>(c&Ne)===Ne,neg:c=>De(-c,e),eql:(c,l)=>c===l,sqr:c=>De(c*c,e),add:(c,l)=>De(c+l,e),sub:(c,l)=>De(c-l,e),mul:(c,l)=>De(c*l,e),pow:(c,l)=>Oy(a,c,l),div:(c,l)=>De(c*Xr(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Xr(c,e),sqrt:s.sqrt||(c=>i(a,c)),invertBatch:c=>Hy(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Oi(c,r):Rn(c,r),fromBytes:c=>{if(c.length!==r)throw new Error(`Fp.fromBytes: expected ${r}, got ${c.length}`);return n?Mi(c):st(c)}});return Object.freeze(a)}function xu(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ru(e){const t=xu(e);return t+Math.ceil(t/2)}function Vy(e,t,n=!1){const s=e.length,o=xu(t),r=Ru(t);if(s<16||s<r||s>1024)throw new Error(`expected ${r}-1024 bytes of input, got ${s}`);const i=n?st(e):Mi(e),a=De(i,t-Ne)+Ne;return n?Oi(a,o):Rn(a,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jy=BigInt(0),xr=BigInt(1);function Dy(e,t){const n=(o,r)=>{const i=r.negate();return o?i:r},s=o=>{const r=Math.ceil(t/o)+1,i=2**(o-1);return{windows:r,windowSize:i}};return{constTimeNegate:n,unsafeLadder(o,r){let i=e.ZERO,a=o;for(;r>jy;)r&xr&&(i=i.add(a)),a=a.double(),r>>=xr;return i},precomputeWindow(o,r){const{windows:i,windowSize:a}=s(r),c=[];let l=o,u=l;for(let f=0;f<i;f++){u=l,c.push(u);for(let d=1;d<a;d++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(o,r,i){const{windows:a,windowSize:c}=s(o);let l=e.ZERO,u=e.BASE;const f=BigInt(2**o-1),d=2**o,h=BigInt(o);for(let v=0;v<a;v++){const g=v*c;let m=Number(i&f);i>>=h,m>c&&(m-=d,i+=xr);const w=g,E=g+Math.abs(m)-1,x=v%2!==0,A=m<0;m===0?u=u.add(n(x,r[w])):l=l.add(n(A,r[E]))}return{p:l,f:u}},wNAFCached(o,r,i,a){const c=o._WINDOW_SIZE||1;let l=r.get(o);return l||(l=this.precomputeWindow(o,c),c!==1&&r.set(o,a(l))),this.wNAF(c,l,i)}}}function Su(e){return My(e.Fp),js(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Eu(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qy(e){const t=Su(e);js(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:o}=t;if(n){if(!s.eql(o,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Wy,hexToBytes:Ky}=Ay,Un={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Un;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],s=e.subarray(2,n+2);if(!n||s.length!==n)throw new t("Invalid signature integer: wrong length");if(s[0]&128)throw new t("Invalid signature integer: negative");if(s[0]===0&&!(s[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Wy(s),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Un,n=typeof e=="string"?Ky(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let s=n.length;if(s<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:o,l:r}=Un._parseInt(n.subarray(2)),{d:i,l:a}=Un._parseInt(r);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:i}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},s=t(n(e.s)),o=t(n(e.r)),r=s.length/2,i=o.length/2,a=n(r),c=n(i);return`30${n(i+r+4)}02${c}${o}02${a}${s}`}},Vt=BigInt(0),ft=BigInt(1);BigInt(2);const vc=BigInt(3);BigInt(4);function zy(e){const t=qy(e),{Fp:n}=t,s=t.toBytes||((v,g,m)=>{const w=g.toAffine();return Fn(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),o=t.fromBytes||(v=>{const g=v.subarray(1),m=n.fromBytes(g.subarray(0,n.BYTES)),w=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:m,y:w}});function r(v){const{a:g,b:m}=t,w=n.sqr(v),E=n.mul(w,v);return n.add(n.add(E,n.mul(v,g)),m)}if(!n.eql(n.sqr(t.Gy),r(t.Gx)))throw new Error("bad generator point: equation left != right");function i(v){return typeof v=="bigint"&&Vt<v&&v<t.n}function a(v){if(!i(v))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(v){const{allowedPrivateKeyLengths:g,nByteLength:m,wrapPrivateKey:w,n:E}=t;if(g&&typeof v!="bigint"){if(v instanceof Uint8Array&&(v=rs(v)),typeof v!="string"||!g.includes(v.length))throw new Error("Invalid key");v=v.padStart(m*2,"0")}let x;try{x=typeof v=="bigint"?v:st(We("private key",v,m))}catch{throw new Error(`private key must be ${m} bytes, hex or bigint, not ${typeof v}`)}return w&&(x=De(x,E)),a(x),x}const l=new Map;function u(v){if(!(v instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(g,m,w){if(this.px=g,this.py=m,this.pz=w,g==null||!n.isValid(g))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(g){const{x:m,y:w}=g||{};if(!g||!n.isValid(m)||!n.isValid(w))throw new Error("invalid affine point");if(g instanceof f)throw new Error("projective point not allowed");const E=x=>n.eql(x,n.ZERO);return E(m)&&E(w)?f.ZERO:new f(m,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const m=n.invertBatch(g.map(w=>w.pz));return g.map((w,E)=>w.toAffine(m[E])).map(f.fromAffine)}static fromHex(g){const m=f.fromAffine(o(We("pointHex",g)));return m.assertValidity(),m}static fromPrivateKey(g){return f.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:m}=this.toAffine();if(!n.isValid(g)||!n.isValid(m))throw new Error("bad point: x or y not FE");const w=n.sqr(m),E=r(g);if(!n.eql(w,E))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:m,py:w,pz:E}=this,{px:x,py:A,pz:L}=g,P=n.eql(n.mul(m,L),n.mul(x,E)),D=n.eql(n.mul(w,L),n.mul(A,E));return P&&D}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:m}=t,w=n.mul(m,vc),{px:E,py:x,pz:A}=this;let L=n.ZERO,P=n.ZERO,D=n.ZERO,B=n.mul(E,E),J=n.mul(x,x),M=n.mul(A,A),Z=n.mul(E,x);return Z=n.add(Z,Z),D=n.mul(E,A),D=n.add(D,D),L=n.mul(g,D),P=n.mul(w,M),P=n.add(L,P),L=n.sub(J,P),P=n.add(J,P),P=n.mul(L,P),L=n.mul(Z,L),D=n.mul(w,D),M=n.mul(g,M),Z=n.sub(B,M),Z=n.mul(g,Z),Z=n.add(Z,D),D=n.add(B,B),B=n.add(D,B),B=n.add(B,M),B=n.mul(B,Z),P=n.add(P,B),M=n.mul(x,A),M=n.add(M,M),B=n.mul(M,Z),L=n.sub(L,B),D=n.mul(M,J),D=n.add(D,D),D=n.add(D,D),new f(L,P,D)}add(g){u(g);const{px:m,py:w,pz:E}=this,{px:x,py:A,pz:L}=g;let P=n.ZERO,D=n.ZERO,B=n.ZERO;const J=t.a,M=n.mul(t.b,vc);let Z=n.mul(m,x),ae=n.mul(w,A),re=n.mul(E,L),oe=n.add(m,w),O=n.add(x,A);oe=n.mul(oe,O),O=n.add(Z,ae),oe=n.sub(oe,O),O=n.add(m,E);let R=n.add(x,L);return O=n.mul(O,R),R=n.add(Z,re),O=n.sub(O,R),R=n.add(w,E),P=n.add(A,L),R=n.mul(R,P),P=n.add(ae,re),R=n.sub(R,P),B=n.mul(J,O),P=n.mul(M,re),B=n.add(P,B),P=n.sub(ae,B),B=n.add(ae,B),D=n.mul(P,B),ae=n.add(Z,Z),ae=n.add(ae,Z),re=n.mul(J,re),O=n.mul(M,O),ae=n.add(ae,re),re=n.sub(Z,re),re=n.mul(J,re),O=n.add(O,re),Z=n.mul(ae,O),D=n.add(D,Z),Z=n.mul(R,O),P=n.mul(oe,P),P=n.sub(P,Z),Z=n.mul(oe,ae),B=n.mul(R,B),B=n.add(B,Z),new f(P,D,B)}subtract(g){return this.add(g.negate())}is0(){return this.equals(f.ZERO)}wNAF(g){return h.wNAFCached(this,l,g,m=>{const w=n.invertBatch(m.map(E=>E.pz));return m.map((E,x)=>E.toAffine(w[x])).map(f.fromAffine)})}multiplyUnsafe(g){const m=f.ZERO;if(g===Vt)return m;if(a(g),g===ft)return this;const{endo:w}=t;if(!w)return h.unsafeLadder(this,g);let{k1neg:E,k1:x,k2neg:A,k2:L}=w.splitScalar(g),P=m,D=m,B=this;for(;x>Vt||L>Vt;)x&ft&&(P=P.add(B)),L&ft&&(D=D.add(B)),B=B.double(),x>>=ft,L>>=ft;return E&&(P=P.negate()),A&&(D=D.negate()),D=new f(n.mul(D.px,w.beta),D.py,D.pz),P.add(D)}multiply(g){a(g);let m=g,w,E;const{endo:x}=t;if(x){const{k1neg:A,k1:L,k2neg:P,k2:D}=x.splitScalar(m);let{p:B,f:J}=this.wNAF(L),{p:M,f:Z}=this.wNAF(D);B=h.constTimeNegate(A,B),M=h.constTimeNegate(P,M),M=new f(n.mul(M.px,x.beta),M.py,M.pz),w=B.add(M),E=J.add(Z)}else{const{p:A,f:L}=this.wNAF(m);w=A,E=L}return f.normalizeZ([w,E])[0]}multiplyAndAddUnsafe(g,m,w){const E=f.BASE,x=(L,P)=>P===Vt||P===ft||!L.equals(E)?L.multiplyUnsafe(P):L.multiply(P),A=x(this,m).add(x(g,w));return A.is0()?void 0:A}toAffine(g){const{px:m,py:w,pz:E}=this,x=this.is0();g==null&&(g=x?n.ONE:n.inv(E));const A=n.mul(m,g),L=n.mul(w,g),P=n.mul(E,g);if(x)return{x:n.ZERO,y:n.ZERO};if(!n.eql(P,n.ONE))throw new Error("invZ was invalid");return{x:A,y:L}}isTorsionFree(){const{h:g,isTorsionFree:m}=t;if(g===ft)return!0;if(m)return m(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:m}=t;return g===ft?this:m?m(f,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return this.assertValidity(),s(f,this,g)}toHex(g=!0){return rs(this.toRawBytes(g))}}f.BASE=new f(t.Gx,t.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,h=Dy(f,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:r,isWithinCurveOrder:i}}function Gy(e){const t=Su(e);return js(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Jy(e){const t=Gy(e),{Fp:n,n:s}=t,o=n.BYTES+1,r=2*n.BYTES+1;function i(O){return Vt<O&&O<n.ORDER}function a(O){return De(O,s)}function c(O){return Xr(O,s)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:d}=zy({...t,toBytes(O,R,k){const T=R.toAffine(),N=n.toBytes(T.x),Q=Fn;return k?Q(Uint8Array.from([R.hasEvenY()?2:3]),N):Q(Uint8Array.from([4]),N,n.toBytes(T.y))},fromBytes(O){const R=O.length,k=O[0],T=O.subarray(1);if(R===o&&(k===2||k===3)){const N=st(T);if(!i(N))throw new Error("Point is not on curve");const Q=f(N);let Y=n.sqrt(Q);const z=(Y&ft)===ft;return(k&1)===1!==z&&(Y=n.neg(Y)),{x:N,y:Y}}else if(R===r&&k===4){const N=n.fromBytes(T.subarray(0,n.BYTES)),Q=n.fromBytes(T.subarray(n.BYTES,2*n.BYTES));return{x:N,y:Q}}else throw new Error(`Point of length ${R} was invalid. Expected ${o} compressed bytes or ${r} uncompressed bytes`)}}),h=O=>rs(Rn(O,t.nByteLength));function v(O){const R=s>>ft;return O>R}function g(O){return v(O)?a(-O):O}const m=(O,R,k)=>st(O.slice(R,k));class w{constructor(R,k,T){this.r=R,this.s=k,this.recovery=T,this.assertValidity()}static fromCompact(R){const k=t.nByteLength;return R=We("compactSignature",R,k*2),new w(m(R,0,k),m(R,k,2*k))}static fromDER(R){const{r:k,s:T}=Un.toSig(We("DER",R));return new w(k,T)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new w(this.r,this.s,R)}recoverPublicKey(R){const{r:k,s:T,recovery:N}=this,Q=D(We("msgHash",R));if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");const Y=N===2||N===3?k+t.n:k;if(Y>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=N&1?"03":"02",fe=l.fromHex(z+h(Y)),K=c(Y),H=a(-Q*K),G=a(T*K),b=l.BASE.multiplyAndAddUnsafe(fe,H,G);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return v(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return is(this.toDERHex())}toDERHex(){return Un.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return is(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const E={isValidPrivateKey(O){try{return u(O),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const O=Ru(t.n);return Vy(t.randomBytes(O),t.n)},precompute(O=8,R=l.BASE){return R._setWindowSize(O),R.multiply(BigInt(3)),R}};function x(O,R=!0){return l.fromPrivateKey(O).toRawBytes(R)}function A(O){const R=O instanceof Uint8Array,k=typeof O=="string",T=(R||k)&&O.length;return R?T===o||T===r:k?T===2*o||T===2*r:O instanceof l}function L(O,R,k=!0){if(A(O))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(O)).toRawBytes(k)}const P=t.bits2int||function(O){const R=st(O),k=O.length*8-t.nBitLength;return k>0?R>>BigInt(k):R},D=t.bits2int_modN||function(O){return a(P(O))},B=Hi(t.nBitLength);function J(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(Vt<=O&&O<B))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Rn(O,t.nByteLength)}function M(O,R,k=Z){if(["recovered","canonical"].some(q=>q in k))throw new Error("sign() legacy options not supported");const{hash:T,randomBytes:N}=t;let{lowS:Q,prehash:Y,extraEntropy:z}=k;Q==null&&(Q=!0),O=We("msgHash",O),Y&&(O=We("prehashed msgHash",T(O)));const fe=D(O),K=u(R),H=[J(K),J(fe)];if(z!=null){const q=z===!0?N(n.BYTES):z;H.push(We("extraEntropy",q))}const G=Fn(...H),b=fe;function F(q){const te=P(q);if(!d(te))return;const he=c(te),pe=l.BASE.multiply(te).toAffine(),p=a(pe.x);if(p===Vt)return;const _=a(he*a(b+p*K));if(_===Vt)return;let S=(pe.x===p?0:2)|Number(pe.y&ft),$=_;return Q&&v(_)&&($=g(_),S^=1),new w(p,$,S)}return{seed:G,k2sig:F}}const Z={lowS:t.lowS,prehash:!1},ae={lowS:t.lowS,prehash:!1};function re(O,R,k=Z){const{seed:T,k2sig:N}=M(O,R,k),Q=t;return bu(Q.hash.outputLen,Q.nByteLength,Q.hmac)(T,N)}l.BASE._setWindowSize(8);function oe(O,R,k,T=ae){var pe;const N=O;if(R=We("msgHash",R),k=We("publicKey",k),"strict"in T)throw new Error("options.strict was renamed to lowS");const{lowS:Q,prehash:Y}=T;let z,fe;try{if(typeof N=="string"||N instanceof Uint8Array)try{z=w.fromDER(N)}catch(p){if(!(p instanceof Un.Err))throw p;z=w.fromCompact(N)}else if(typeof N=="object"&&typeof N.r=="bigint"&&typeof N.s=="bigint"){const{r:p,s:_}=N;z=new w(p,_)}else throw new Error("PARSE");fe=l.fromHex(k)}catch(p){if(p.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Q&&z.hasHighS())return!1;Y&&(R=t.hash(R));const{r:K,s:H}=z,G=D(R),b=c(H),F=a(G*b),q=a(K*b),te=(pe=l.BASE.multiplyAndAddUnsafe(fe,F,q))==null?void 0:pe.toAffine();return te?a(te.x)===K:!1}return{CURVE:t,getPublicKey:x,getSharedSecret:L,sign:re,verify:oe,ProjectivePoint:l,Signature:w,utils:E}}let ku=class extends vu{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,uy(t);const s=Ni(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,r=new Uint8Array(o);r.set(s.length>o?t.create().update(s).digest():s);for(let i=0;i<r.length;i++)r[i]^=54;this.iHash.update(r),this.oHash=t.create();for(let i=0;i<r.length;i++)r[i]^=106;this.oHash.update(r),r.fill(0)}update(t){return vo(this),this.iHash.update(t),this}digestInto(t){vo(this),gu(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:o,destroyed:r,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=r,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Cu=(e,t,n)=>new ku(e,t).update(n).digest();Cu.create=(e,t)=>new ku(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zy(e){return{hash:e,hmac:(t,...n)=>Cu(e,t,py(...n)),randomBytes:_u}}function Yy(e,t){const n=s=>Jy({...e,...Zy(s)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),_o=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),$u=BigInt(1),mo=BigInt(2),_c=(e,t)=>(e+t/mo)/t;function Pu(e){const t=qo,n=BigInt(3),s=BigInt(6),o=BigInt(11),r=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,f=ut(u,n,t)*u%t,d=ut(f,n,t)*u%t,h=ut(d,mo,t)*l%t,v=ut(h,o,t)*h%t,g=ut(v,r,t)*v%t,m=ut(g,a,t)*g%t,w=ut(m,c,t)*m%t,E=ut(w,a,t)*g%t,x=ut(E,n,t)*u%t,A=ut(x,i,t)*v%t,L=ut(A,s,t)*l%t,P=ut(L,mo,t);if(!ei.eql(ei.sqr(P),e))throw new Error("Cannot find square root");return P}const ei=Fy(qo,void 0,void 0,{sqrt:Pu}),fs=Yy({a:BigInt(0),b:BigInt(7),Fp:ei,n:_o,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=_o,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),s=-$u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=n,i=BigInt("0x100000000000000000000000000000000"),a=_c(r*e,t),c=_c(-s*e,t);let l=De(e-a*n-c*o,t),u=De(-a*s-c*r,t);const f=l>i,d=u>i;if(f&&(l=t-l),d&&(u=t-u),l>i||u>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:l,k2neg:d,k2:u}}}},Yr),Wo=BigInt(0),Iu=e=>typeof e=="bigint"&&Wo<e&&e<qo,Qy=e=>typeof e=="bigint"&&Wo<e&&e<_o,mc={};function wo(e,...t){let n=mc[e];if(n===void 0){const s=Yr(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Fn(s,s),mc[e]=n}return Yr(Fn(n,...t))}const Fi=e=>e.toRawBytes(!0).slice(1),ti=e=>Rn(e,32),Rr=e=>De(e,qo),Ms=e=>De(e,_o),Vi=fs.ProjectivePoint,Xy=(e,t,n)=>Vi.BASE.multiplyAndAddUnsafe(e,t,n);function ni(e){let t=fs.utils.normPrivateKeyToScalar(e),n=Vi.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Ms(-t),bytes:Fi(n)}}function Au(e){if(!Iu(e))throw new Error("bad x: need 0 < x < p");const t=Rr(e*e),n=Rr(t*e+BigInt(7));let s=Pu(n);s%mo!==Wo&&(s=Rr(-s));const o=new Vi(e,s,$u);return o.assertValidity(),o}function Tu(...e){return Ms(st(wo("BIP0340/challenge",...e)))}function e0(e){return ni(e).bytes}function t0(e,t,n=_u(32)){const s=We("message",e),{bytes:o,scalar:r}=ni(t),i=We("auxRand",n,32),a=ti(r^st(wo("BIP0340/aux",i))),c=wo("BIP0340/nonce",a,o,s),l=Ms(st(c));if(l===Wo)throw new Error("sign failed: k is zero");const{bytes:u,scalar:f}=ni(l),d=Tu(u,o,s),h=new Uint8Array(64);if(h.set(u,0),h.set(ti(Ms(f+d*r)),32),!Lu(h,s,o))throw new Error("sign: Invalid signature produced");return h}function Lu(e,t,n){const s=We("signature",e,64),o=We("message",t),r=We("publicKey",n,32);try{const i=Au(st(r)),a=st(s.subarray(0,32));if(!Iu(a))return!1;const c=st(s.subarray(32,64));if(!Qy(c))return!1;const l=Tu(ti(a),Fi(i),o),u=Xy(i,c,Ms(-l));return!(!u||!u.hasEvenY()||u.toAffine().x!==a)}catch{return!1}}const vs=(()=>({getPublicKey:e0,sign:t0,verify:Lu,utils:{randomPrivateKey:fs.utils.randomPrivateKey,lift_x:Au,pointToBytes:Fi,numberToBytesBE:Rn,bytesToNumberBE:st,taggedHash:wo,mod:De}}))(),Sr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ji=e=>e instanceof Uint8Array,kr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),xt=(e,t)=>e<<32-t|e>>>t,n0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!n0)throw new Error("Non little-endian hardware is not supported");const s0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nt(e){if(!ji(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=s0[e[n]];return t}function as(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let s=0;s<n.length;s++){const o=s*2,r=e.slice(o,o+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[s]=i}return n}function Uu(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Os(e){if(typeof e=="string"&&(e=Uu(e)),!ji(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function bo(...e){const t=new Uint8Array(e.reduce((s,o)=>s+o.length,0));let n=0;return e.forEach(s=>{if(!ji(s))throw new Error("Uint8Array expected");t.set(s,n),n+=s.length}),t}let Nu=class{clone(){return this._cloneInto()}};function Bu(e){const t=s=>e().update(Os(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Mu(e=32){if(Sr&&typeof Sr.getRandomValues=="function")return Sr.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function si(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function o0(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Ou(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function r0(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");si(e.outputLen),si(e.blockLen)}function i0(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a0(e,t){Ou(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const At={number:si,bool:o0,bytes:Ou,hash:r0,exists:i0,output:a0};function c0(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const o=BigInt(32),r=BigInt(4294967295),i=Number(n>>o&r),a=Number(n&r),c=s?4:0,l=s?0:4;e.setUint32(t+c,i,s),e.setUint32(t+l,a,s)}class l0 extends Nu{constructor(t,n,s,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=kr(this.buffer)}update(t){At.exists(this);const{view:n,buffer:s,blockLen:o}=this;t=Os(t);const r=t.length;for(let i=0;i<r;){const a=Math.min(o-this.pos,r-i);if(a===o){const c=kr(t);for(;o<=r-i;i+=o)this.process(c,i);continue}s.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){At.exists(this),At.output(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:o,isLE:r}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(s,0),i=0);for(let f=i;f<o;f++)n[f]=0;c0(s,o-8,BigInt(this.length*8),r),this.process(s,0);const a=kr(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:o,finished:r,destroyed:i,pos:a}=this;return t.length=o,t.pos=a,t.finished=r,t.destroyed=i,o%n&&t.buffer.set(s),t}}const u0=(e,t,n)=>e&t^~e&n,f0=(e,t,n)=>e&t^e&n^t&n,d0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),on=new Uint32Array(64);let Hu=class extends l0{constructor(){super(64,32,8,!1),this.A=sn[0]|0,this.B=sn[1]|0,this.C=sn[2]|0,this.D=sn[3]|0,this.E=sn[4]|0,this.F=sn[5]|0,this.G=sn[6]|0,this.H=sn[7]|0}get(){const{A:t,B:n,C:s,D:o,E:r,F:i,G:a,H:c}=this;return[t,n,s,o,r,i,a,c]}set(t,n,s,o,r,i,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=o|0,this.E=r|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)on[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=on[f-15],h=on[f-2],v=xt(d,7)^xt(d,18)^d>>>3,g=xt(h,17)^xt(h,19)^h>>>10;on[f]=g+on[f-7]+v+on[f-16]|0}let{A:s,B:o,C:r,D:i,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=xt(a,6)^xt(a,11)^xt(a,25),h=u+d+u0(a,c,l)+d0[f]+on[f]|0,g=(xt(s,2)^xt(s,13)^xt(s,22))+f0(s,o,r)|0;u=l,l=c,c=a,a=i+h|0,i=r,r=o,o=s,s=h+g|0}s=s+this.A|0,o=o+this.B|0,r=r+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(s,o,r,i,a,c,l,u)}roundClean(){on.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class h0 extends Hu{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Cs=Bu(()=>new Hu);Bu(()=>new h0);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ds(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function Zt(...e){const t=(o,r)=>i=>o(r(i)),n=Array.from(e).reverse().reduce((o,r)=>o?t(o,r.encode):r.encode,void 0),s=e.reduce((o,r)=>o?t(o,r.decode):r.decode,void 0);return{encode:n,decode:s}}function Yt(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(ds(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const s=e.indexOf(n);if(s===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return s})}}}function Qt(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Ko(e,t="="){if(ds(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let s of n)if(typeof s!="string")throw new Error(`padding.encode: non-string input=${s}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let s=n.length;if(s*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;s>0&&n[s-1]===t;s--)if(!((s-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,s)}}}function Fu(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function wc(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const o=[],r=Array.from(e);for(r.forEach(i=>{if(ds(i),i<0||i>=t)throw new Error(`Wrong integer: ${i}`)});;){let i=0,a=!0;for(let c=s;c<r.length;c++){const l=r[c],u=t*i+l;if(!Number.isSafeInteger(u)||t*i/t!==i||u-l!==t*i)throw new Error("convertRadix: carry overflow");if(i=u%n,r[c]=Math.floor(u/n),!Number.isSafeInteger(r[c])||r[c]*n+i!==u)throw new Error("convertRadix: carry overflow");if(a)r[c]?a=!1:s=c;else continue}if(o.push(i),a)break}for(let i=0;i<e.length-1&&e[i]===0;i++)o.push(0);return o.reverse()}const Vu=(e,t)=>t?Vu(t,e%t):e,Eo=(e,t)=>e+(t-Vu(e,t));function oi(e,t,n,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Eo(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Eo(t,n)}`);let o=0,r=0;const i=2**n-1,a=[];for(const c of e){if(ds(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,r+t>32)throw new Error(`convertRadix2: carry overflow pos=${r} from=${t}`);for(r+=t;r>=n;r-=n)a.push((o>>r-n&i)>>>0);o&=2**r-1}if(o=o<<n-r&i,!s&&r>=t)throw new Error("Excess padding");if(!s&&o)throw new Error(`Non-zero padding: ${o}`);return s&&r>0&&a.push(o>>>0),a}function p0(e){return ds(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return wc(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(wc(t,e,2**8))}}}function kn(e,t=!1){if(ds(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Eo(8,e)>32||Eo(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return oi(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(oi(n,e,8,t))}}}function bc(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const g0=Zt(kn(4),Yt("0123456789ABCDEF"),Qt("")),y0=Zt(kn(5),Yt("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ko(5),Qt(""));Zt(kn(5),Yt("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ko(5),Qt(""));Zt(kn(5),Yt("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Qt(""),Fu(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const Gt=Zt(kn(6),Yt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ko(6),Qt("")),v0=Zt(kn(6),Yt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ko(6),Qt("")),Di=e=>Zt(p0(58),Yt(e),Qt("")),ri=Di("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Di("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Di("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const Ec=[0,2,3,5,6,7,9,10,11],_0={encode(e){let t="";for(let n=0;n<e.length;n+=8){const s=e.subarray(n,n+8);t+=ri.encode(s).padStart(Ec[s.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const s=e.slice(n,n+11),o=Ec.indexOf(s.length),r=ri.decode(s);for(let i=0;i<r.length-o;i++)if(r[i]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(r.slice(r.length-o)))}return Uint8Array.from(t)}},ii=Zt(Yt("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Qt("")),xc=[996825010,642813549,513874426,1027748829,705979059];function _s(e){const t=e>>25;let n=(e&33554431)<<5;for(let s=0;s<xc.length;s++)(t>>s&1)===1&&(n^=xc[s]);return n}function Rc(e,t,n=1){const s=e.length;let o=1;for(let r=0;r<s;r++){const i=e.charCodeAt(r);if(i<33||i>126)throw new Error(`Invalid prefix (${e})`);o=_s(o)^i>>5}o=_s(o);for(let r=0;r<s;r++)o=_s(o)^e.charCodeAt(r)&31;for(let r of t)o=_s(o)^r;for(let r=0;r<6;r++)o=_s(o);return o^=n,ii.encode(oi([o%2**30],30,5,!1))}function ju(e){const t=e==="bech32"?1:734539939,n=kn(5),s=n.decode,o=n.encode,r=bc(s);function i(u,f,d=90){if(typeof u!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof u}`);if(!Array.isArray(f)||f.length&&typeof f[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof f}`);const h=u.length+7+f.length;if(d!==!1&&h>d)throw new TypeError(`Length ${h} exceeds limit ${d}`);return u=u.toLowerCase(),`${u}1${ii.encode(f)}${Rc(u,f,t)}`}function a(u,f=90){if(typeof u!="string")throw new Error(`bech32.decode input should be string, not ${typeof u}`);if(u.length<8||f!==!1&&u.length>f)throw new TypeError(`Wrong string length: ${u.length} (${u}). Expected (8..${f})`);const d=u.toLowerCase();if(u!==d&&u!==u.toUpperCase())throw new Error("String must be lowercase or uppercase");u=d;const h=u.lastIndexOf("1");if(h===0||h===-1)throw new Error('Letter "1" must be present between prefix and data only');const v=u.slice(0,h),g=u.slice(h+1);if(g.length<6)throw new Error("Data must be at least 6 characters long");const m=ii.decode(g).slice(0,-6),w=Rc(v,m,t);if(!g.endsWith(w))throw new Error(`Invalid checksum in ${u}: expected "${w}"`);return{prefix:v,words:m}}const c=bc(a);function l(u){const{prefix:f,words:d}=a(u,!1);return{prefix:f,words:d,bytes:s(d)}}return{encode:i,decode:a,decodeToBytes:l,decodeUnsafe:c,fromWords:s,fromWordsUnsafe:r,toWords:o}}const cs=ju("bech32");ju("bech32m");const m0={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},w0=Zt(kn(4),Yt("0123456789abcdef"),Qt(""),Fu(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),b0={utf8:m0,hex:w0,base16:g0,base32:y0,base64:Gt,base64url:v0,base58:ri,base58xmr:_0};`${Object.keys(b0).join(", ")}`;function Cr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Sc(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function E0(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Dt(e,...t){if(!E0(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Ge=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),x0=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!x0)throw new Error("Non little-endian hardware is not supported");function R0(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function S0(e,t){if(e.length!==t.length)return!1;let n=0;for(let s=0;s<e.length;s++)n|=e[s]^t[s];return n===0}const k0=(e,t)=>(Object.assign(t,e),t),wn=16,C0=283;function qi(e){return e<<1^C0&-(e>>7)}function Gn(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=qi(e);return n}const ai=(()=>{let e=new Uint8Array(256);for(let n=0,s=1;n<256;n++,s^=qi(s))e[n]=s;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let s=e[255-n];s|=s<<8,t[e[n]]=(s^s>>4^s>>5^s>>6^s>>7^99)&255}return t})(),$0=ai.map((e,t)=>ai.indexOf(t)),P0=e=>e<<24|e>>>8,$r=e=>e<<8|e>>>24;function Du(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((l,u)=>t(e[u])),s=n.map($r),o=s.map($r),r=o.map($r),i=new Uint32Array(256*256),a=new Uint32Array(256*256),c=new Uint16Array(256*256);for(let l=0;l<256;l++)for(let u=0;u<256;u++){const f=l*256+u;i[f]=n[l]^s[u],a[f]=o[l]^r[u],c[f]=e[l]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:s,T2:o,T3:r,T01:i,T23:a}}const Wi=Du(ai,e=>Gn(e,3)<<24|e<<16|e<<8|Gn(e,2)),qu=Du($0,e=>Gn(e,11)<<24|Gn(e,13)<<16|Gn(e,9)<<8|Gn(e,14)),I0=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=qi(n))e[t]=n;return e})();function Wu(e){Dt(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=Wi,s=Ge(e),o=s.length,r=a=>Tt(n,a,a,a,a),i=new Uint32Array(t+28);i.set(s);for(let a=o;a<i.length;a++){let c=i[a-1];a%o===0?c=r(P0(c))^I0[a/o-1]:o>6&&a%o===4&&(c=r(c)),i[a]=i[a-o]^c}return i}function A0(e){const t=Wu(e),n=t.slice(),s=t.length,{sbox2:o}=Wi,{T0:r,T1:i,T2:a,T3:c}=qu;for(let l=0;l<s;l+=4)for(let u=0;u<4;u++)n[l+u]=t[s-l-4+u];t.fill(0);for(let l=4;l<s-4;l++){const u=n[l],f=Tt(o,u,u,u,u);n[l]=r[f&255]^i[f>>>8&255]^a[f>>>16&255]^c[f>>>24]}return n}function pn(e,t,n,s,o,r){return e[n<<8&65280|s>>>8&255]^t[o>>>8&65280|r>>>24&255]}function Tt(e,t,n,s,o){return e[t&255|n&65280]|e[s>>>16&255|o>>>16&65280]<<16}function kc(e,t,n,s,o){const{sbox2:r,T01:i,T23:a}=Wi;let c=0;t^=e[c++],n^=e[c++],s^=e[c++],o^=e[c++];const l=e.length/4-2;for(let v=0;v<l;v++){const g=e[c++]^pn(i,a,t,n,s,o),m=e[c++]^pn(i,a,n,s,o,t),w=e[c++]^pn(i,a,s,o,t,n),E=e[c++]^pn(i,a,o,t,n,s);t=g,n=m,s=w,o=E}const u=e[c++]^Tt(r,t,n,s,o),f=e[c++]^Tt(r,n,s,o,t),d=e[c++]^Tt(r,s,o,t,n),h=e[c++]^Tt(r,o,t,n,s);return{s0:u,s1:f,s2:d,s3:h}}function T0(e,t,n,s,o){const{sbox2:r,T01:i,T23:a}=qu;let c=0;t^=e[c++],n^=e[c++],s^=e[c++],o^=e[c++];const l=e.length/4-2;for(let v=0;v<l;v++){const g=e[c++]^pn(i,a,t,o,s,n),m=e[c++]^pn(i,a,n,t,o,s),w=e[c++]^pn(i,a,s,n,t,o),E=e[c++]^pn(i,a,o,s,n,t);t=g,n=m,s=w,o=E}const u=e[c++]^Tt(r,t,o,s,n),f=e[c++]^Tt(r,n,t,o,s),d=e[c++]^Tt(r,s,n,t,o),h=e[c++]^Tt(r,o,s,n,t);return{s0:u,s1:f,s2:d,s3:h}}function Ku(e,t){if(!t)return new Uint8Array(e);if(Dt(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function L0(e){if(Dt(e),e.length%wn!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${wn}`)}function U0(e,t,n){let s=e.length;const o=s%wn;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const r=Ge(e);if(t){let c=wn-o;c||(c=wn),s=s+c}const i=Ku(s,n),a=Ge(i);return{b:r,o:a,out:i}}function N0(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const s=e[n-1];if(s<=0||s>16)throw new Error(`aes/pcks5: wrong padding byte: ${s}`);const o=e.subarray(0,-s);for(let r=0;r<s;r++)if(e[n-r-1]!==s)throw new Error("aes/pcks5: wrong padding");return o}function B0(e){const t=new Uint8Array(16),n=Ge(t);t.set(e);const s=wn-e.length;for(let o=wn-s;o<wn;o++)t[o]=s;return n}const zu=k0({blockSize:16,nonceLength:16},function(t,n,s={}){Dt(t),Dt(n,16);const o=!s.disablePadding;return{encrypt:(r,i)=>{const a=Wu(t),{b:c,o:l,out:u}=U0(r,o,i),f=Ge(n);let d=f[0],h=f[1],v=f[2],g=f[3],m=0;for(;m+4<=c.length;)d^=c[m+0],h^=c[m+1],v^=c[m+2],g^=c[m+3],{s0:d,s1:h,s2:v,s3:g}=kc(a,d,h,v,g),l[m++]=d,l[m++]=h,l[m++]=v,l[m++]=g;if(o){const w=B0(r.subarray(m*4));d^=w[0],h^=w[1],v^=w[2],g^=w[3],{s0:d,s1:h,s2:v,s3:g}=kc(a,d,h,v,g),l[m++]=d,l[m++]=h,l[m++]=v,l[m++]=g}return a.fill(0),u},decrypt:(r,i)=>{L0(r);const a=A0(t),c=Ge(n),l=Ku(r.length,i),u=Ge(r),f=Ge(l);let d=c[0],h=c[1],v=c[2],g=c[3];for(let m=0;m+4<=u.length;){const w=d,E=h,x=v,A=g;d=u[m+0],h=u[m+1],v=u[m+2],g=u[m+3];const{s0:L,s1:P,s2:D,s3:B}=T0(a,d,h,v,g);f[m++]=L^w,f[m++]=P^E,f[m++]=D^x,f[m++]=B^A}return a.fill(0),N0(l,o)}}}),Gu=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),M0=Gu("expand 16-byte k"),O0=Gu("expand 32-byte k"),H0=Ge(M0),Ju=Ge(O0);Ju.slice();function ke(e,t){return e<<t|e>>>32-t}function ci(e){return e.byteOffset%4===0}const Qs=64,F0=16,Zu=2**32-1,Cc=new Uint32Array;function V0(e,t,n,s,o,r,i,a){const c=o.length,l=new Uint8Array(Qs),u=Ge(l),f=ci(o)&&ci(r),d=f?Ge(o):Cc,h=f?Ge(r):Cc;for(let v=0;v<c;i++){if(e(t,n,s,u,i,a),i>=Zu)throw new Error("arx: counter overflow");const g=Math.min(Qs,c-v);if(f&&g===Qs){const m=v/4;if(v%4!==0)throw new Error("arx: invalid block position");for(let w=0,E;w<F0;w++)E=m+w,h[E]=d[E]^u[w];v+=Qs;continue}for(let m=0,w;m<g;m++)w=v+m,r[w]=o[w]^l[m];v+=g}}function j0(e,t){const{allowShortKeys:n,extendNonceFn:s,counterLength:o,counterRight:r,rounds:i}=R0({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Cr(o),Cr(i),Sc(r),Sc(n),(a,c,l,u,f=0)=>{Dt(a),Dt(c),Dt(l);const d=l.length;if(u||(u=new Uint8Array(d)),Dt(u),Cr(f),f<0||f>=Zu)throw new Error("arx: counter overflow");if(u.length<d)throw new Error(`arx: output (${u.length}) is shorter than data (${d})`);const h=[];let v=a.length,g,m;if(v===32)g=a.slice(),h.push(g),m=Ju;else if(v===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=H0,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${v}`);ci(c)||(c=c.slice(),h.push(c));const w=Ge(g);if(s){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");s(m,w,Ge(c.subarray(0,16)),w),c=c.subarray(16)}const E=16-o;if(E!==c.length)throw new Error(`arx: nonce must be ${E} or 16 bytes`);if(E!==12){const A=new Uint8Array(12);A.set(c,r?0:12-c.length),c=A,h.push(c)}const x=Ge(c);for(V0(e,m,w,x,l,u,f,i);h.length>0;)h.pop().fill(0);return u}}function D0(e,t,n,s,o,r=20){let i=e[0],a=e[1],c=e[2],l=e[3],u=t[0],f=t[1],d=t[2],h=t[3],v=t[4],g=t[5],m=t[6],w=t[7],E=o,x=n[0],A=n[1],L=n[2],P=i,D=a,B=c,J=l,M=u,Z=f,ae=d,re=h,oe=v,O=g,R=m,k=w,T=E,N=x,Q=A,Y=L;for(let fe=0;fe<r;fe+=2)P=P+M|0,T=ke(T^P,16),oe=oe+T|0,M=ke(M^oe,12),P=P+M|0,T=ke(T^P,8),oe=oe+T|0,M=ke(M^oe,7),D=D+Z|0,N=ke(N^D,16),O=O+N|0,Z=ke(Z^O,12),D=D+Z|0,N=ke(N^D,8),O=O+N|0,Z=ke(Z^O,7),B=B+ae|0,Q=ke(Q^B,16),R=R+Q|0,ae=ke(ae^R,12),B=B+ae|0,Q=ke(Q^B,8),R=R+Q|0,ae=ke(ae^R,7),J=J+re|0,Y=ke(Y^J,16),k=k+Y|0,re=ke(re^k,12),J=J+re|0,Y=ke(Y^J,8),k=k+Y|0,re=ke(re^k,7),P=P+Z|0,Y=ke(Y^P,16),R=R+Y|0,Z=ke(Z^R,12),P=P+Z|0,Y=ke(Y^P,8),R=R+Y|0,Z=ke(Z^R,7),D=D+ae|0,T=ke(T^D,16),k=k+T|0,ae=ke(ae^k,12),D=D+ae|0,T=ke(T^D,8),k=k+T|0,ae=ke(ae^k,7),B=B+re|0,N=ke(N^B,16),oe=oe+N|0,re=ke(re^oe,12),B=B+re|0,N=ke(N^B,8),oe=oe+N|0,re=ke(re^oe,7),J=J+M|0,Q=ke(Q^J,16),O=O+Q|0,M=ke(M^O,12),J=J+M|0,Q=ke(Q^J,8),O=O+Q|0,M=ke(M^O,7);let z=0;s[z++]=i+P|0,s[z++]=a+D|0,s[z++]=c+B|0,s[z++]=l+J|0,s[z++]=u+M|0,s[z++]=f+Z|0,s[z++]=d+ae|0,s[z++]=h+re|0,s[z++]=v+oe|0,s[z++]=g+O|0,s[z++]=m+R|0,s[z++]=w+k|0,s[z++]=E+T|0,s[z++]=x+N|0,s[z++]=A+Q|0,s[z++]=L+Y|0}const $c=j0(D0,{counterRight:!1,counterLength:4,allowShortKeys:!1});class Yu extends Nu{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,At.hash(t);const s=Os(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,r=new Uint8Array(o);r.set(s.length>o?t.create().update(s).digest():s);for(let i=0;i<r.length;i++)r[i]^=54;this.iHash.update(r),this.oHash=t.create();for(let i=0;i<r.length;i++)r[i]^=106;this.oHash.update(r),r.fill(0)}update(t){return At.exists(this),this.iHash.update(t),this}digestInto(t){At.exists(this),At.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:s,finished:o,destroyed:r,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=r,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=s._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zo=(e,t,n)=>new Yu(e,t).update(n).digest();zo.create=(e,t)=>new Yu(e,t);function q0(e,t,n){return At.hash(e),n===void 0&&(n=new Uint8Array(e.outputLen)),zo(e,Os(n),Os(t))}const Pr=new Uint8Array([0]),Pc=new Uint8Array;function W0(e,t,n,s=32){if(At.hash(e),At.number(s),s>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(s/e.outputLen);n===void 0&&(n=Pc);const r=new Uint8Array(o*e.outputLen),i=zo.create(e,t),a=i._cloneInto(),c=new Uint8Array(i.outputLen);for(let l=0;l<o;l++)Pr[0]=l+1,a.update(l===0?Pc:c).update(n).update(Pr).digestInto(c),r.set(c,e.outputLen*l),i._cloneInto(a);return i.destroy(),a.destroy(),c.fill(0),Pr.fill(0),r.slice(0,s)}var Qu=Object.defineProperty,K0=(e,t,n)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Me=(e,t)=>{for(var n in t)Qu(e,n,{get:t[n],enumerable:!0})},Go=(e,t,n)=>(K0(e,typeof t!="symbol"?t+"":t,n),n),In=Symbol("verified"),z0=e=>e instanceof Object;function Xu(e){if(!z0(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let s=0;s<n.length;s++)if(typeof n[s]=="object")return!1}return!0}var zt={};Me(zt,{Queue:()=>tf,QueueNode:()=>ef,binarySearch:()=>Ki,insertEventIntoAscendingList:()=>J0,insertEventIntoDescendingList:()=>G0,normalizeURL:()=>Jn,utf8Decoder:()=>jt,utf8Encoder:()=>Ut});var jt=new TextDecoder("utf-8"),Ut=new TextEncoder;function Jn(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function G0(e,t){const[n,s]=Ki(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return s||e.splice(n,0,t),e}function J0(e,t){const[n,s]=Ki(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return s||e.splice(n,0,t),e}function Ki(e,t){let n=0,s=e.length-1;for(;n<=s;){const o=Math.floor((n+s)/2),r=t(e[o]);if(r===0)return[o,!0];r<0?s=o-1:n=o+1}return[n,!1]}var ef=class{constructor(e){ve(this,"value");ve(this,"next",null);ve(this,"prev",null);this.value=e}},tf=class{constructor(){ve(this,"first");ve(this,"last");this.first=null,this.last=null}enqueue(e){const t=new ef(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},Z0=class{generateSecretKey(){return vs.utils.randomPrivateKey()}getPublicKey(e){return nt(vs.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=nt(vs.getPublicKey(t)),n.id=$s(n),n.sig=nt(vs.sign($s(n),t)),n[In]=!0,n}verifyEvent(e){if(typeof e[In]=="boolean")return e[In];const t=$s(e);if(t!==e.id)return e[In]=!1,!1;try{const n=vs.verify(e.sig,t,e.pubkey);return e[In]=n,n}catch{return e[In]=!1,!1}}};function Y0(e){if(!Xu(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function $s(e){let t=Cs(Ut.encode(Y0(e)));return nt(t)}var Jo=new Z0,nf=Jo.generateSecretKey,sf=Jo.getPublicKey,lt=Jo.finalizeEvent,Dn=Jo.verifyEvent,Q0={};Me(Q0,{Application:()=>Qv,BadgeAward:()=>av,BadgeDefinition:()=>Wv,BlockedRelaysList:()=>Iv,BookmarkList:()=>Cv,Bookmarksets:()=>jv,Calendar:()=>r_,CalendarEventRSVP:()=>i_,ChannelCreation:()=>lf,ChannelHideMessage:()=>df,ChannelMessage:()=>ff,ChannelMetadata:()=>uf,ChannelMuteUser:()=>hf,ClassifiedListing:()=>t_,ClientAuth:()=>pf,CommunitiesList:()=>$v,CommunityDefinition:()=>l_,CommunityPostApproval:()=>yv,Contacts:()=>sv,CreateOrUpdateProduct:()=>Gv,CreateOrUpdateStall:()=>zv,Curationsets:()=>Dv,Date:()=>s_,DraftClassifiedListing:()=>n_,DraftLong:()=>Zv,Emojisets:()=>Yv,EncryptedDirectMessage:()=>ov,EncryptedDirectMessages:()=>rv,EventDeletion:()=>iv,FileMetadata:()=>uv,FileServerPreference:()=>Uv,Followsets:()=>Hv,GenericRepost:()=>cv,Genericlists:()=>Fv,HTTPAuth:()=>Ji,Handlerinformation:()=>c_,Handlerrecommendation:()=>a_,Highlights:()=>xv,InterestsList:()=>Tv,Interestsets:()=>Kv,JobFeedback:()=>mv,JobRequest:()=>vv,JobResult:()=>_v,Label:()=>gv,LightningPubRPC:()=>Bv,LiveChatMessage:()=>fv,LiveEvent:()=>Xv,LongFormArticle:()=>Jv,Metadata:()=>ev,Mutelist:()=>Rv,NWCWalletInfo:()=>Nv,NWCWalletRequest:()=>gf,NWCWalletResponse:()=>Mv,NostrConnect:()=>Ov,OpenTimestamps:()=>lv,Pinlist:()=>Sv,ProblemTracker:()=>dv,ProfileBadges:()=>qv,PublicChatsList:()=>Pv,Reaction:()=>Gi,RecommendRelay:()=>nv,RelayList:()=>kv,Relaysets:()=>Vv,Report:()=>hv,Reporting:()=>pv,Repost:()=>zi,SearchRelaysList:()=>Av,ShortTextNote:()=>tv,Time:()=>o_,UserEmojiList:()=>Lv,UserStatuses:()=>e_,Zap:()=>Ev,ZapGoal:()=>wv,ZapRequest:()=>bv,classifyKind:()=>X0,isEphemeralKind:()=>af,isParameterizedReplaceableKind:()=>cf,isRegularKind:()=>of,isReplaceableKind:()=>rf});function of(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function rf(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function af(e){return 2e4<=e&&e<3e4}function cf(e){return 3e4<=e&&e<4e4}function X0(e){return of(e)?"regular":rf(e)?"replaceable":af(e)?"ephemeral":cf(e)?"parameterized":"unknown"}var ev=0,tv=1,nv=2,sv=3,ov=4,rv=4,iv=5,zi=6,Gi=7,av=8,cv=16,lf=40,uf=41,ff=42,df=43,hf=44,lv=1040,uv=1063,fv=1311,dv=1971,hv=1984,pv=1984,gv=1985,yv=4550,vv=5999,_v=6999,mv=7e3,wv=9041,bv=9734,Ev=9735,xv=9802,Rv=1e4,Sv=10001,kv=10002,Cv=10003,$v=10004,Pv=10005,Iv=10006,Av=10007,Tv=10015,Lv=10030,Uv=10096,Nv=13194,Bv=21e3,pf=22242,gf=23194,Mv=23195,Ov=24133,Ji=27235,Hv=3e4,Fv=30001,Vv=30002,jv=30003,Dv=30004,qv=30008,Wv=30009,Kv=30015,zv=30017,Gv=30018,Jv=30023,Zv=30024,Yv=30030,Qv=30078,Xv=30311,e_=30315,t_=30402,n_=30403,s_=31922,o_=31923,r_=31924,i_=31925,a_=31989,c_=31990,l_=34550;function u_(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(n=>t.id.startsWith(n))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(n=>t.pubkey.startsWith(n)))return!1;for(let n in e)if(n[0]==="#"){let s=n.slice(1),o=e[`#${s}`];if(o&&!t.tags.find(([r,i])=>r===n.slice(1)&&o.indexOf(i)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function f_(e,t){for(let n=0;n<e.length;n++)if(u_(e[n],t))return!0;return!1}var d_={};Me(d_,{getHex64:()=>Zo,getInt:()=>yf,getSubscriptionId:()=>vf,matchEventId:()=>h_,matchEventKind:()=>g_,matchEventPubkey:()=>p_});function Zo(e,t){let n=t.length+3,s=e.indexOf(`"${t}":`)+n,o=e.slice(s).indexOf('"')+s+1;return e.slice(o,o+64)}function yf(e,t){let n=t.length,s=e.indexOf(`"${t}":`)+n+3,o=e.slice(s),r=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,r),10)}function vf(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let s=t+7+1+n,o=e.slice(s+1,80).indexOf('"');if(o===-1)return null;let r=s+1+o;return e.slice(s+1,r)}function h_(e,t){return t===Zo(e,"id")}function p_(e,t){return t===Zo(e,"pubkey")}function g_(e,t){return t===yf(e,"kind")}var y_={};Me(y_,{makeAuthEvent:()=>_f});function _f(e,t){return{kind:pf,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function v_(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var __=e=>(e[In]=!0,!0),mf;try{mf=WebSocket}catch{}var Zi=class{constructor(e,t){ve(this,"url");ve(this,"_connected",!1);ve(this,"onclose",null);ve(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));ve(this,"_onauth",null);ve(this,"baseEoseTimeout",4400);ve(this,"connectionTimeout",4400);ve(this,"openSubs",new Map);ve(this,"connectionTimeoutHandle");ve(this,"connectionPromise");ve(this,"openCountRequests",new Map);ve(this,"openEventPublishes",new Map);ve(this,"ws");ve(this,"incomingMessageQueue",new tf);ve(this,"queueRunning",!1);ve(this,"challenge");ve(this,"serial",0);ve(this,"verifyEvent");this.url=Jn(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){const n=new Zi(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new mf(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var s;t(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(s=this.onclose)==null||s.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await v_();this.queueRunning=!1}handleNext(){var n,s,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=vf(e);if(t){const r=this.openSubs.get(t);if(!r)return;const i=Zo(e,"id"),a=(n=r.alreadyHaveEvent)==null?void 0:n.call(r,i);if((s=r.receivedEvent)==null||s.call(r,this,i),a)return}try{let r=JSON.parse(e);switch(r[0]){case"EVENT":{const i=this.openSubs.get(r[1]),a=r[2];this.verifyEvent(a)&&f_(i.filters,a)&&i.onevent(a);return}case"COUNT":{const i=r[1],a=r[2],c=this.openCountRequests.get(i);c&&(c.resolve(a.count),this.openCountRequests.delete(i));return}case"EOSE":{const i=this.openSubs.get(r[1]);if(!i)return;i.receivedEose();return}case"OK":{const i=r[1],a=r[2],c=r[3],l=this.openEventPublishes.get(i);a?l.resolve(c):l.reject(new Error(c)),this.openEventPublishes.delete(i);return}case"CLOSED":{const i=r[1],a=this.openSubs.get(i);if(!a)return;a.closed=!0,a.close(r[2]);return}case"NOTICE":this.onnotice(r[1]);return;case"AUTH":{this.challenge=r[1],(o=this._onauth)==null||o.call(this,r[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(_f(this.url,this.challenge)),n=new Promise((s,o)=>{this.openEventPublishes.set(t.id,{resolve:s,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,s)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:s})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,s=new Promise((o,r)=>{this.openCountRequests.set(n,{resolve:o,reject:r})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),s}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,s=new m_(this,n,e,t);return this.openSubs.set(n,s),s}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},m_=class{constructor(e,t,n,s){ve(this,"relay");ve(this,"id");ve(this,"closed",!1);ve(this,"eosed",!1);ve(this,"filters");ve(this,"alreadyHaveEvent");ve(this,"receivedEvent");ve(this,"onevent");ve(this,"oneose");ve(this,"onclose");ve(this,"eoseTimeout");ve(this,"eoseTimeoutHandle");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=s.alreadyHaveEvent,this.receivedEvent=s.receivedEvent,this.eoseTimeout=s.eoseTimeout||e.baseEoseTimeout,this.oneose=s.oneose,this.onclose=s.onclose,this.onevent=s.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},li=class extends Zi{constructor(e){super(e,{verifyEvent:Dn})}static async connect(e){const t=new li(e);return await t.connect(),t}},w_=class{constructor(e){ve(this,"relays",new Map);ve(this,"seenOn",new Map);ve(this,"trackRelays",!1);ve(this,"verifyEvent");ve(this,"trustedRelayURLs",new Set);this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Jn(e);let n=this.relays.get(e);return n||(n=new Zi(e,{verifyEvent:this.trustedRelayURLs.has(e)?__:this.verifyEvent}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Jn).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){return this.subscribeManyMap(Object.fromEntries(e.map(s=>[s,t])),n)}subscribeManyMap(e,t){this.trackRelays&&(t.receivedEvent=(f,d)=>{let h=this.seenOn.get(d);h||(h=new Set,this.seenOn.set(d,h)),h.add(f)});const n=new Set,s=[],o=Object.keys(e).length,r=[];let i=f=>{var d;r[f]=!0,r.filter(h=>h).length===o&&((d=t.oneose)==null||d.call(t),i=()=>{})};const a=[];let c=(f,d)=>{var h;i(f),a[f]=d,a.filter(v=>v).length===o&&((h=t.onclose)==null||h.call(t,a),c=()=>{})};const l=f=>{var h;if((h=t.alreadyHaveEvent)!=null&&h.call(t,f))return!0;const d=n.has(f);return n.add(f),d},u=Promise.all(Object.entries(e).map(async(f,d,h)=>{if(h.indexOf(f)!==d){c(d,"duplicate url");return}let[v,g]=f;v=Jn(v);let m;try{m=await this.ensureRelay(v,{connectionTimeout:t.maxWait?Math.max(t.maxWait*.8,t.maxWait-1e3):void 0})}catch(E){c(d,(E==null?void 0:E.message)||String(E));return}let w=m.subscribe(g,{...t,oneose:()=>i(d),onclose:E=>c(d,E),alreadyHaveEvent:l,eoseTimeout:t.maxWait});s.push(w)}));return{async close(){await u,s.forEach(f=>{f.close()})}}}subscribeManyEose(e,t,n){const s=this.subscribeMany(e,t,{...n,oneose(){s.close()}});return s}async querySync(e,t,n){return new Promise(async s=>{const o=[];this.subscribeManyEose(e,[t],{...n,onevent(r){o.push(r)},onclose(r){s(o)}})})}async get(e,t,n){t.limit=1;const s=await this.querySync(e,t,n);return s.sort((o,r)=>r.created_at-o.created_at),s[0]||null}publish(e,t){return e.map(Jn).map(async(n,s,o)=>o.indexOf(n)!==s?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}},Sn=class extends w_{constructor(){super({verifyEvent:Dn})}},Be={};Me(Be,{BECH32_REGEX:()=>wf,Bech32MaxSize:()=>Yi,decode:()=>Ds,encodeBytes:()=>Yo,naddrEncode:()=>C_,neventEncode:()=>k_,noteEncode:()=>R_,nprofileEncode:()=>S_,npubEncode:()=>x_,nrelayEncode:()=>$_,nsecEncode:()=>E_});var Yi=5e3,wf=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function b_(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function Ds(e){var o,r,i,a,c,l,u,f;let{prefix:t,words:n}=cs.decode(e,Yi),s=new Uint8Array(cs.fromWords(n));switch(t){case"nprofile":{let d=Xs(s);if(!((o=d[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:nt(d[0][0]),relays:d[1]?d[1].map(h=>jt.decode(h)):[]}}}case"nevent":{let d=Xs(s);if(!((r=d[0])!=null&&r[0]))throw new Error("missing TLV 0 for nevent");if(d[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(d[2]&&d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(d[3]&&d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:nt(d[0][0]),relays:d[1]?d[1].map(h=>jt.decode(h)):[],author:(i=d[2])!=null&&i[0]?nt(d[2][0]):void 0,kind:(a=d[3])!=null&&a[0]?parseInt(nt(d[3][0]),16):void 0}}}case"naddr":{let d=Xs(s);if(!((c=d[0])!=null&&c[0]))throw new Error("missing TLV 0 for naddr");if(!((l=d[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(d[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=d[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(d[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:jt.decode(d[0][0]),pubkey:nt(d[2][0]),kind:parseInt(nt(d[3][0]),16),relays:d[1]?d[1].map(h=>jt.decode(h)):[]}}}case"nrelay":{let d=Xs(s);if(!((f=d[0])!=null&&f[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:jt.decode(d[0][0])}}case"nsec":return{type:t,data:s};case"npub":case"note":return{type:t,data:nt(s)};default:throw new Error(`unknown prefix ${t}`)}}function Xs(e){let t={},n=e;for(;n.length>0;){let s=n[0],o=n[1],r=n.slice(2,2+o);if(n=n.slice(2+o),r.length<o)throw new Error(`not enough data to read on TLV ${s}`);t[s]=t[s]||[],t[s].push(r)}return t}function E_(e){return Yo("nsec",e)}function x_(e){return Yo("npub",as(e))}function R_(e){return Yo("note",as(e))}function qs(e,t){let n=cs.toWords(t);return cs.encode(e,n,Yi)}function Yo(e,t){return qs(e,t)}function S_(e){let t=Qo({0:[as(e.pubkey)],1:(e.relays||[]).map(n=>Ut.encode(n))});return qs("nprofile",t)}function k_(e){let t;e.kind!==void 0&&(t=b_(e.kind));let n=Qo({0:[as(e.id)],1:(e.relays||[]).map(s=>Ut.encode(s)),2:e.author?[as(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return qs("nevent",n)}function C_(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Qo({0:[Ut.encode(e.identifier)],1:(e.relays||[]).map(s=>Ut.encode(s)),2:[as(e.pubkey)],3:[new Uint8Array(t)]});return qs("naddr",n)}function $_(e){let t=Qo({0:[Ut.encode(e)]});return qs("nrelay",t)}function Qo(e){let t=[];return Object.entries(e).reverse().forEach(([n,s])=>{s.forEach(o=>{let r=new Uint8Array(o.length+2);r.set([parseInt(n)],0),r.set([o.length],1),r.set(o,2),t.push(r)})}),bo(...t)}var P_=/\bnostr:((note|npub|naddr|nevent|nprofile)1\w+)\b|#\[(\d+)\]/g;function Xo(e){let t=[];for(let n of e.content.matchAll(P_))if(n[2])try{let{type:s,data:o}=Ds(n[1]);switch(s){case"npub":{t.push({text:n[0],profile:{pubkey:o,relays:[]}});break}case"nprofile":{t.push({text:n[0],profile:o});break}case"note":{t.push({text:n[0],event:{id:o,relays:[]}});break}case"nevent":{t.push({text:n[0],event:o});break}case"naddr":{t.push({text:n[0],address:o});break}}}catch{}else if(n[3]){let s=parseInt(n[3],10),o=e.tags[s];if(!o)continue;switch(o[0]){case"p":{t.push({text:n[0],profile:{pubkey:o[1],relays:o[2]?[o[2]]:[]}});break}case"e":{t.push({text:n[0],event:{id:o[1],relays:o[2]?[o[2]]:[]}});break}case"a":{try{let[r,i,a]=o[1].split(":");t.push({text:n[0],address:{identifier:a,pubkey:i,kind:parseInt(r,10),relays:o[2]?[o[2]]:[]}})}catch{}break}}}return t}var I_={};Me(I_,{decrypt:()=>A_,encrypt:()=>bf});async function bf(e,t,n){const s=e instanceof Uint8Array?nt(e):e,o=fs.getSharedSecret(s,"02"+t),r=Ef(o);let i=Uint8Array.from(Mu(16)),a=Ut.encode(n),c=zu(r,i).encrypt(a),l=Gt.encode(new Uint8Array(c)),u=Gt.encode(new Uint8Array(i.buffer));return`${l}?iv=${u}`}async function A_(e,t,n){const s=e instanceof Uint8Array?nt(e):e;let[o,r]=n.split("?iv="),i=fs.getSharedSecret(s,"02"+t),a=Ef(i),c=Gt.decode(r),l=Gt.decode(o),u=zu(a,c).decrypt(l);return jt.decode(u)}function Ef(e){return e.slice(1,33)}var xf={};Me(xf,{NIP05_REGEX:()=>Rf,isValid:()=>U_,queryProfile:()=>Sf,searchDomain:()=>L_,useFetchImplementation:()=>T_});var Rf=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,er;try{er=fetch}catch{}function T_(e){er=e}async function L_(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`;return(await(await er(n,{redirect:"error"})).json()).names}catch{return{}}}async function Sf(e){var r;const t=e.match(Rf);if(!t)return null;const[n,s="_",o]=t;try{const i=`https://${o}/.well-known/nostr.json?name=${s}`,a=await(await er(i,{redirect:"error"})).json();let c=a.names[s];return c?{pubkey:c,relays:(r=a.relays)==null?void 0:r[c]}:null}catch{return null}}async function U_(e,t){let n=await Sf(t);return n?n.pubkey===e:!1}var Je={};Me(Je,{parse:()=>N_});function N_(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const s of e.tags)s[0]==="e"&&s[1]&&n.push(s),s[0]==="p"&&s[1]&&t.profiles.push({pubkey:s[1],relays:s[2]?[s[2]]:[]});for(let s=0;s<n.length;s++){const o=n[s],[r,i,a,c]=o,l={id:i,relays:a?[a]:[]},u=s===0,f=s===n.length-1;if(c==="root"){t.root=l;continue}if(c==="reply"){t.reply=l;continue}if(c==="mention"){t.mentions.push(l);continue}if(u){t.root=l;continue}if(f){t.reply=l;continue}t.mentions.push(l)}return t}var B_={};Me(B_,{fetchRelayInformation:()=>O_,useFetchImplementation:()=>M_});var kf;try{kf=fetch}catch{}function M_(e){kf=e}async function O_(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var H_={};Me(H_,{getPow:()=>Cf,minePow:()=>F_});function Cf(e){let t=0;for(let n=0;n<e.length;n++){const s=parseInt(e[n],16);if(s===0)t+=4;else{t+=Math.clz32(s)-28;break}}return t}function F_(e,t){let n=0;const s=e,o=["nonce",n.toString(),t.toString()];for(s.tags.push(o);;){const r=Math.floor(new Date().getTime()/1e3);if(r!==s.created_at&&(n=0,s.created_at=r),o[1]=(++n).toString(),s.id=$s(s),Cf(s.id)>=t)break}return s}var V_={};Me(V_,{finishRepostEvent:()=>j_,getRepostedEvent:()=>D_,getRepostedEventPointer:()=>$f});function j_(e,t,n,s){return lt({kind:zi,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},s)}function $f(e){if(e.kind!==zi)return;let t,n;for(let s=e.tags.length-1;s>=0&&(t===void 0||n===void 0);s--){const o=e.tags[s];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(s=>typeof s=="string"),author:n==null?void 0:n[1]}}function D_(e,{skipVerification:t}={}){const n=$f(e);if(n===void 0||e.content==="")return;let s;try{s=JSON.parse(e.content)}catch{return}if(s.id===n.id&&!(!t&&!Dn(s)))return s}var q_={};Me(q_,{NOSTR_URI_REGEX:()=>tr,parse:()=>K_,test:()=>W_});var tr=new RegExp(`nostr:(${wf.source})`);function W_(e){return typeof e=="string"&&new RegExp(`^${tr.source}$`).test(e)}function K_(e){const t=e.match(new RegExp(`^${tr.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:Ds(t[1])}}var z_={};Me(z_,{finishReactionEvent:()=>G_,getReactedEventPointer:()=>J_});function G_(e,t,n){const s=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return lt({...e,kind:Gi,tags:[...e.tags??[],...s,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function J_(e){if(e.kind!==Gi)return;let t,n;for(let s=e.tags.length-1;s>=0&&(t===void 0||n===void 0);s--){const o=e.tags[s];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(s=>s!==void 0),author:n[1]}}var Z_={};Me(Z_,{matchAll:()=>Y_,regex:()=>Qi,replaceAll:()=>Q_});var Qi=()=>new RegExp(`\\b${tr.source}\\b`,"g");function*Y_(e){const t=e.matchAll(Qi());for(const n of t)try{const[s,o]=n;yield{uri:s,value:o,decoded:Ds(o),start:n.index,end:n.index+s.length}}catch{}}function Q_(e,t){return e.replaceAll(Qi(),(n,s)=>t({uri:n,value:s,decoded:Ds(s)}))}var X_={};Me(X_,{channelCreateEvent:()=>e1,channelHideMessageEvent:()=>s1,channelMessageEvent:()=>n1,channelMetadataEvent:()=>t1,channelMuteUserEvent:()=>o1});var e1=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:lf,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},t1=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:uf,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},n1=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),lt({kind:ff,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},s1=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:df,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},o1=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return lt({kind:hf,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},r1={};Me(r1,{EMOJI_SHORTCODE_REGEX:()=>Pf,matchAll:()=>i1,regex:()=>Xi,replaceAll:()=>a1});var Pf=/:(\w+):/,Xi=()=>new RegExp(`\\B${Pf.source}\\B`,"g");function*i1(e){const t=e.matchAll(Xi());for(const n of t)try{const[s,o]=n;yield{shortcode:s,name:o,start:n.index,end:n.index+s.length}}catch{}}function a1(e,t){return e.replaceAll(Xi(),(n,s)=>t({shortcode:n,name:s}))}var c1={};Me(c1,{useFetchImplementation:()=>l1,validateGithub:()=>u1});var ea;try{ea=fetch}catch{}function l1(e){ea=e}async function u1(e,t,n){try{return await(await ea(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var nr={};Me(nr,{default:()=>d1,v2:()=>ta});var f1=new TextDecoder,Ct=class{static utf8Decode(e){return f1.decode(e)}static getConversationKey(e,t){const n=fs.getSharedSecret(e,"02"+t).subarray(1,33);return q0(Cs,n,"nip44-v2")}static getMessageKeys(e,t){const n=W0(Cs,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}static calcPaddedLen(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}static writeU16BE(e){if(!Number.isSafeInteger(e)||e<Ct.minPlaintextSize||e>Ct.maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}static pad(e){const t=Ct.utf8Encode(e),n=t.length,s=Ct.writeU16BE(n),o=new Uint8Array(Ct.calcPaddedLen(n)-n);return bo(s,t,o)}static unpad(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<Ct.minPlaintextSize||t>Ct.maxPlaintextSize||n.length!==t||e.length!==2+Ct.calcPaddedLen(t))throw new Error("invalid padding");return Ct.utf8Decode(n)}static hmacAad(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const s=bo(n,t);return zo(Cs,e,s)}static decodePayload(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=Gt.decode(e)}catch(r){throw new Error("invalid base64: "+r.message)}const s=n.length;if(s<99||s>65603)throw new Error("invalid data length: "+s);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}},gt=Ct;Go(gt,"minPlaintextSize",1);Go(gt,"maxPlaintextSize",65535);Go(gt,"utf8Encode",Uu);var ta=class{static encrypt(e,t,n=Mu(32)){const{chacha_key:s,chacha_nonce:o,hmac_key:r}=gt.getMessageKeys(t,n),i=gt.pad(e),a=$c(s,o,i),c=gt.hmacAad(r,a,n);return Gt.encode(bo(new Uint8Array([2]),n,a,c))}static decrypt(e,t){const{nonce:n,ciphertext:s,mac:o}=gt.decodePayload(e),{chacha_key:r,chacha_nonce:i,hmac_key:a}=gt.getMessageKeys(t,n),c=gt.hmacAad(a,s,n);if(!S0(c,o))throw new Error("invalid MAC");const l=$c(r,i,s);return gt.unpad(l)}};Go(ta,"utils",gt);var d1={v2:ta},h1={};Me(h1,{makeNwcRequestEvent:()=>g1,parseConnectionString:()=>p1});function p1(e){const{pathname:t,searchParams:n}=new URL(e),s=t,o=n.get("relay"),r=n.get("secret");if(!s||!o||!r)throw new Error("invalid connection string");return{pubkey:s,relay:o,secret:r}}async function g1(e,t,n){const o=await bf(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),r={kind:gf,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return lt(r,t)}var y1={};Me(y1,{getZapEndpoint:()=>_1,makeZapReceipt:()=>b1,makeZapRequest:()=>m1,useFetchImplementation:()=>v1,validateZapRequest:()=>w1});var na;try{na=fetch}catch{}function v1(e){na=e}async function _1(e){try{let t="",{lud06:n,lud16:s}=JSON.parse(e.content);if(n){let{words:i}=cs.decode(n,1e3),a=cs.fromWords(i);t=jt.decode(a)}else if(s){let[i,a]=s.split("@");t=new URL(`/.well-known/lnurlp/${i}`,`https://${a}`).toString()}else return null;let r=await(await na(t)).json();if(r.allowsNostr&&r.nostrPubkey)return r.callback}catch{}return null}function m1({profile:e,event:t,amount:n,relays:s,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let r={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...s]]};return t&&r.tags.push(["e",t]),r}function w1(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!Xu(t))return"Zap request is not a valid Nostr event.";if(!Dn(t))return"Invalid signature on zap request.";let n=t.tags.find(([r,i])=>r==="p"&&i);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let s=t.tags.find(([r,i])=>r==="e"&&i);return s&&!s[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([r,i])=>r==="relays"&&i)?null:"Zap request doesn't have a 'relays' tag."}function b1({zapRequest:e,preimage:t,bolt11:n,paidAt:s}){let o=JSON.parse(e),r=o.tags.filter(([a])=>a==="e"||a==="p"||a==="a"),i={kind:9735,created_at:Math.round(s.getTime()/1e3),content:"",tags:[...r,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&i.tags.push(["preimage",t]),i}var E1={};Me(E1,{getToken:()=>x1,hashPayload:()=>sa,unpackEventFromToken:()=>Af,validateEvent:()=>Mf,validateEventKind:()=>Lf,validateEventMethodTag:()=>Nf,validateEventPayloadTag:()=>Bf,validateEventTimestamp:()=>Tf,validateEventUrlTag:()=>Uf,validateToken:()=>R1});var If="Nostr ";async function x1(e,t,n,s=!1,o){const r={kind:Ji,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&r.tags.push(["payload",sa(o)]);const i=await n(r);return(s?If:"")+Gt.encode(Ut.encode(JSON.stringify(i)))}async function R1(e,t,n){const s=await Af(e).catch(r=>{throw r});return await Mf(s,t,n).catch(r=>{throw r})}async function Af(e){if(!e)throw new Error("Missing token");e=e.replace(If,"");const t=jt.decode(Gt.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function Tf(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function Lf(e){return e.kind===Ji}function Uf(e,t){const n=e.tags.find(s=>s[0]==="u");return n?n.length>0&&n[1]===t:!1}function Nf(e,t){const n=e.tags.find(s=>s[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function sa(e){const t=Cs(Ut.encode(JSON.stringify(e)));return nt(t)}function Bf(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const s=sa(t);return n.length>0&&n[1]===s}async function Mf(e,t,n,s){if(!Dn(e))throw new Error("Invalid nostr event, signature invalid");if(!Lf(e))throw new Error("Invalid nostr event, kind invalid");if(!Tf(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Uf(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!Nf(e,n))throw new Error("Invalid nostr event, method tag invalid");if(s&&typeof s=="object"&&Object.keys(s).length>0&&!Bf(e,s))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const Of=e=>(Xe("data-v-393546d0"),e=e(),et(),e),S1={class:"event-details"},k1={key:0},C1={class:"highlight"},$1={key:1},P1={key:0,class:"highlight"},I1={key:1,class:"event-details__no-user"},A1=Of(()=>y("div",null,"No info about author on this relay.",-1)),T1={class:"highlight"},L1={key:2},U1={key:0,class:"highlight"},N1={key:1,class:"event-details__no-user"},B1=Of(()=>y("div",null,"No info about author on this relay.",-1)),M1={class:"highlight"},O1=Ae({__name:"RawData",props:{event:{},authorEvent:{},isUserEvent:{}},setup(e){const t=e,n=V(1),s=V(!0),o=V(),r=V({});mt(()=>{const{event:c,authorEvent:l}=t;o.value=i(c),l&&(r.value=i(l)),t.authorEvent&&(s.value=t.event.id!==t.authorEvent.id)});const i=c=>{const{id:l,pubkey:u,created_at:f,kind:d,tags:h,content:v,sig:g}=c;return{id:l,pubkey:u,created_at:f,kind:d,tags:h,content:v,sig:g}},a=c=>{n.value=c};return(c,l)=>(C(),U("div",S1,[y("div",{class:Ce(["event-details__header",{"event-details__header_user":c.isUserEvent}])},[y("span",{onClick:l[0]||(l[0]=()=>a(1)),class:Ce(["event-details__tab",{"event-details__tab_active":n.value===1}])},"Note",2),s.value?(C(),U("span",{key:0,onClick:l[1]||(l[1]=()=>a(2)),class:Ce(["event-details__tab",{"event-details__tab_active":n.value===2}])},"Author",2)):ie("",!0),y("span",{onClick:l[2]||(l[2]=()=>a(3)),class:Ce(["event-details__tab",{"event-details__tab_active":n.value===3}])},"Author content",2)],2),n.value===1?(C(),U("div",k1,[y("pre",C1,le(JSON.stringify(o.value,null,2)),1)])):ie("",!0),s.value&&n.value===2?(C(),U("div",$1,[c.authorEvent?(C(),U("pre",P1,le(JSON.stringify(r.value,null,2)),1)):(C(),U("div",I1,[A1,y("pre",T1,"pubkey: "+le(c.event.pubkey)+` 
npub: `+le(ue(Be).npubEncode(c.event.pubkey)),1)]))])):ie("",!0),n.value===3?(C(),U("div",L1,[c.event.author?(C(),U("pre",U1,le(JSON.stringify(c.event.author,null,2)),1)):(C(),U("div",N1,[B1,y("pre",M1,"pubkey: "+le(c.event.pubkey)+`
npub: `+le(ue(Be).npubEncode(c.event.pubkey)),1)]))])):ie("",!0)]))}});const xe=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n},Hf=xe(O1,[["__scopeId","data-v-393546d0"]]),H1={},F1={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-heart",viewBox:"0 0 16 16"},V1=y("path",{d:"m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"},null,-1),j1=[V1];function D1(e,t){return C(),U("svg",F1,j1)}const q1=xe(H1,[["render",D1]]),W1={},K1={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-repeat",viewBox:"0 0 16 16"},z1=y("path",{d:"M11 5.466V4H5a4 4 0 0 0-3.584 5.777.5.5 0 1 1-.896.446A5 5 0 0 1 5 3h6V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m3.81.086a.5.5 0 0 1 .67.225A5 5 0 0 1 11 13H5v1.466a.25.25 0 0 1-.41.192l-2.36-1.966a.25.25 0 0 1 0-.384l2.36-1.966a.25.25 0 0 1 .41.192V12h6a4 4 0 0 0 3.585-5.777.5.5 0 0 1 .225-.67Z"},null,-1),G1=[z1];function J1(e,t){return C(),U("svg",K1,G1)}const Z1=xe(W1,[["render",J1]]),Y1={},Q1={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",class:"bi bi-reply",viewBox:"0 0 16 16"},X1=y("path",{d:"M6.598 5.013a.144.144 0 0 1 .202.134V6.3a.5.5 0 0 0 .5.5c.667 0 2.013.005 3.3.822.984.624 1.99 1.76 2.595 3.876-1.02-.983-2.185-1.516-3.205-1.799a8.74 8.74 0 0 0-1.921-.306 7.404 7.404 0 0 0-.798.008h-.013l-.005.001h-.001L7.3 9.9l-.05-.498a.5.5 0 0 0-.45.498v1.153c0 .108-.11.176-.202.134L2.614 8.254a.503.503 0 0 0-.042-.028.147.147 0 0 1 0-.252.499.499 0 0 0 .042-.028l3.984-2.933zM7.8 10.386c.068 0 .143.003.223.006.434.02 1.034.086 1.7.271 1.326.368 2.896 1.202 3.94 3.08a.5.5 0 0 0 .933-.305c-.464-3.71-1.886-5.662-3.46-6.66-1.245-.79-2.527-.942-3.336-.971v-.66a1.144 1.144 0 0 0-1.767-.96l-3.994 2.94a1.147 1.147 0 0 0 0 1.946l3.994 2.94a1.144 1.144 0 0 0 1.767-.96v-.667z"},null,-1),em=[X1];function tm(e,t){return C(),U("svg",Q1,em)}const nm=xe(Y1,[["render",tm]]),sm={},om={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chat",viewBox:"0 0 16 16"},rm=y("path",{d:"M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105"},null,-1),im=[rm];function am(e,t){return C(),U("svg",om,im)}const cm=xe(sm,[["render",am]]),lm={class:"actions-bar"},um={class:"actions-bar__action actions-bar__num"},fm={class:"actions_bar-number"},dm={class:"actions-bar__action actions-bar__num"},hm={class:"actions_bar-number"},pm={class:"actions_bar-number"},gm=Ae({__name:"EventActionsBar",props:{likes:{},reposts:{},replies:{},hasReplyBtn:{type:Boolean}},emits:["showReplyField","handleShowReplies","handleHideReplies"],setup(e,{emit:t}){const n=t,s=()=>{n("showReplyField")},o=()=>{n("handleShowReplies")};return(r,i)=>(C(),U("div",lm,[y("span",um,[ye(q1,{class:"actions-bar__icon"}),y("span",fm,le(r.likes),1)]),y("span",dm,[ye(Z1,{class:"actions-bar__icon"}),y("span",hm,le(r.reposts),1)]),r.hasReplyBtn?(C(),U("span",{key:0,onClick:o,class:"actions-bar__action actions-bar__num actions-bar__replies"},[ye(cm,{class:"actions-bar__icon"}),y("span",pm,le(r.replies),1)])):ie("",!0),r.hasReplyBtn?(C(),U("span",{key:1,onClick:s,class:"actions-bar__action actions-bar__reply"},[ye(nm,{class:"actions-bar__icon"})])):ie("",!0)]))}});const sr=Nt("npub",()=>{const e=V(""),t=V("");function n(o){e.value=o}function s(o){t.value=o}return{npubInput:e,cachedUrlNpub:t,updateNpubInput:n,updateCachedUrl:s}}),oa=Nt("user",()=>{const e=V(!1);function t(n){e.value=n}return{isRoutingUser:e,updateRoutingStatus:t}}),ym={class:"event-content"},vm={key:0},_m={key:1},mm=["onClick"],wm=Ae({__name:"EventText",props:{event:{},slice:{}},setup(e){const t=e,n=Vo(),s=sr(),o=oa(),r=V([]);mt(()=>{r.value=a(t.event,t.slice)}),Ci(()=>{r.value=a(t.event,t.slice)});const i=(f,d)=>{let h=[],v="";for(const g of f){const m=v.length;if(v+=g.value,v.length<=d)h.push(g);else{if(g.type==="text"){const w=d-m;g.value=g.value.slice(0,w)}h.push(g),h.push({type:"text",value:"..."});break}}return h},a=(f,d)=>{const h=f.content,v=f.references;let g=[];if(!(v!=null&&v.length))return g.push({type:"text",value:h}),g;const m=[];v.forEach(E=>{let x=h.indexOf(E.text);if(m.includes(x))for(const A of m){if(!m.includes(x))break;x=h.indexOf(E.text,x+E.text.length)}E.textIndex=x,m.push(x)}),v.sort((E,x)=>E.textIndex-x.textIndex);let w=h;return v.forEach(E=>{const x=w.indexOf(E.text),A=w.slice(0,x),L=w.slice(x+E.text.length),P=c(E);g.push({type:"text",value:A}),g.push({type:"profile",value:P,npub:l(E.profile.pubkey)}),w=L}),g.push({type:"text",value:w}),d&&(g=i(g,d)),g},c=f=>{const d=f.profile_details,h=l(f.profile.pubkey);return`@${d.name||d.username||d.display_name||`${h.slice(0,15)}...`}`},l=f=>Be.npubEncode(f),u=f=>{f&&(s.updateNpubInput(f),o.updateRoutingStatus(!0),n.push({path:`/user/${f}`}))};return(f,d)=>(C(),U("div",ym,[(C(!0),U(be,null,Qe(r.value,h=>(C(),U("span",null,[h.type==="text"?(C(),U("span",vm,le(h.value),1)):ie("",!0),h.type==="profile"?(C(),U("span",_m,[y("a",{onClick:Ns(()=>u(h.npub),["prevent"]),href:"#"},le(h.value),9,mm)])):ie("",!0)]))),256))]))}});const bm=xe(wm,[["__scopeId","data-v-2c0eedfd"]]);function Em(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ra(e,...t){if(!Em(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ic(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function xm(e,t){ra(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ir=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Rt=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const Rm=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function or(e){ra(e);let t="";for(let n=0;n<e.length;n++)t+=Rm[e[n]];return t}const Ft={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Ac(e){if(e>=Ft._0&&e<=Ft._9)return e-Ft._0;if(e>=Ft._A&&e<=Ft._F)return e-(Ft._A-10);if(e>=Ft._a&&e<=Ft._f)return e-(Ft._a-10)}function Tc(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const s=new Uint8Array(n);for(let o=0,r=0;o<n;o++,r+=2){const i=Ac(e.charCodeAt(r)),a=Ac(e.charCodeAt(r+1));if(i===void 0||a===void 0){const c=e[r]+e[r+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+r)}s[o]=i*16+a}return s}function Sm(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ff(e){return typeof e=="string"&&(e=Sm(e)),ra(e),e}class km{clone(){return this._cloneInto()}}function Cm(e){const t=s=>e().update(Ff(s)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const Bt=Nt("nsec",()=>{const e=V(""),t=V(!1),n=V("");function s(v){e.value=v}function o(v){n.value=v}function r(v){t.value=v}function i(){try{const v=a();if(!v)throw new Error("Invalid private key");return sf(v)}catch{return""}}function a(){try{return e.value.indexOf("nsec")===-1?Tc(e.value):Be.decode(e.value).data}catch{return null}}function c(){const v=a();if(!v)return"";try{return or(v)}catch{return""}}function l(){try{return e.value.indexOf("nsec")===-1?Be.nsecEncode(Tc(e.value)):e.value}catch{return""}}function u(){return e.value.length>0&&d()}function f(){return e.value.length>0&&!d()}function d(){return e.value.length===0?!1:i().length>0}const h=me(()=>d());return{nsec:e,updateNsec:s,rememberMe:t,setRememberMe:r,isNsecValid:d,isValidNsecPresented:u,isNotValidNsecPresented:f,getPubkey:i,cachedNsec:n,updateCachedNsec:o,getPrivkeyBytes:a,getPrivkeyHex:c,getPrivkey:l,isNsecValidTemp:h}}),rr=Nt("images",()=>{const e=V(!1);function t(n){e.value=n}return{showImages:e,updateShowImages:t}}),{normalizeURL:St}=zt,Mt=Nt("relay",()=>{const e=V({}),t=V(!1),n=V(""),s=V(""),o=V(0),r=V([]),i=V([]),a=V([]),c=V([]),l=V([]),u=V(!1),f=V(!1),d=V([]),h=V([]),v=me(()=>{const K=new Set([...c.value,...l.value]),H=[],G=[];return K.forEach(b=>{c.value.includes(b)&&!l.value.includes(b)?H.push({url:b,type:"read"}):G.push({url:b,type:"write"})}),[...H,...G].sort((b,F)=>b.url.localeCompare(F.url))}),g=me(()=>{const K=new Set([...i.value,...a.value]);return e.value.connected&&K.add(e.value.url),[...K]}),m=me(()=>h.value.length?h.value:g.value),w=me(()=>v.value.map(K=>K.url)),E=me(()=>{const K=e.value.url,H=w.value;return H.includes(K)?H:[K,...H]}),x=me(()=>{const K=i.value,H=e.value;return H.connected&&!K.includes(H.url)&&K.push(H.url),K}),A=me(()=>{const K=c.value,H=l.value,G=new Set([...K,...H]),b=[];return G.forEach(F=>{K.includes(F)&&H.includes(F)?b.push(["r",F]):K.includes(F)?b.push(["r",F,"read"]):H.includes(F)&&b.push(["r",F,"write"])}),b}),L=me(()=>d.value.map(K=>K.replace("wss://","").replace("/","")).join(", ")),P=me(()=>e.value.connected);function D(K){e.value=K}function B(K){t.value=K}function J(K){i.value=K.map(H=>St(H))}function M(K){a.value=K.map(H=>St(H))}function Z(K){d.value=K.map(H=>St(H))}function ae(K){c.value=K.map(H=>St(H))}function re(K){l.value=K.map(H=>St(H))}function oe(K){l.value.includes(K)||l.value.push(St(K))}function O(K){const H=St(K);if(!H||w.value.includes(H))return!1;c.value.push(H)}function R(K){l.value=l.value.filter(H=>H!==K)}function k(K){c.value=c.value.filter(H=>H!==K),l.value=l.value.filter(H=>H!==K),i.value=i.value.filter(H=>H!==K)}function T(K){n.value=K==="custom"?"custom":St(K)}function N(K){o.value=K}function Q(K,H){r.value[K]=H.length?St(H):""}function Y(K){u.value=K}function z(K){f.value=K}function fe(K){h.value=K.map(H=>St(H))}return{isConnectingToRelay:t,setConnectionToRelayStatus:B,connectedUserReadRelayUrls:i,setConnectedUserReadRelayUrls:J,selectInputRelayUrl:n,setSelectedRelay:T,selectInputCustomRelayUrl:s,currentRelay:e,updateCurrentRelay:D,additionalRelaysCountForSignedEvent:o,updateAdditionalRelaysCountForSignedEvent:N,additionalRelaysUrlsForSignedEvent:r,updateRelayAdditionalRelaysUrlsForSignedEvent:Q,connectedFeedRelaysPrettyStr:L,reedRelays:c,writeRelays:l,setReedRelays:ae,setWriteRelays:re,isConnectedToRelay:P,userReadWriteRelays:v,removeWriteRelay:R,addWriteRelay:oe,removeUserRelay:k,addUserRelay:O,nip65Tags:A,userReadWriteRelaysUrls:w,allRelaysUrlsWithSelectedRelay:E,connectedFeedRelaysUrls:d,setConnectedFeedRelayUrls:Z,connectedUserReadRelayUrlsWithSelectedRelay:x,isConnectingToReadWriteRelays:u,setIsConnectingToReadWriteRelaysStatus:Y,setConnectedUserWriteRelayUrls:M,connectedUserWriteRelaysUrls:a,connectedUserReadWriteUrlsWithSelectedRelay:g,setIsConnectedToReadWriteRelaysStatus:z,isConnectedToReadWriteRelays:f,userChatRelaysUrls:m,setUserDMRelaysUrls:fe}}),bn={META:0,REPLY:1,LIKE:7,REPOST:6,DM_RELAYS:10050,GIFT_WRAP:1059,RELAY_LIST_META:10002},Lc="wss://purplepag.es/",gn=async(e,t=[],n,s)=>{const o=jf(e,t,n),r=Df(e,t,n),i=Vf(e,t,n,s),a=Im(e,t,n);return e.forEach(c=>c.isRoot=!0),Promise.all([o,r,i,a])},$m=(e,t=[])=>{(!t||!t.length)&&(t=[]);const n=[],s=[],o=[];for(const r of t)switch(r.kind){case bn.LIKE:n.push(r);break;case bn.REPOST:s.push(r);break;case bn.REPLY:o.push(r);break}Bm(e,n),Mm(e,s),Am(e,o)},Xn=async(e,t,n=[],s)=>{const o=jf(t,n,s),r=Df(t,n,s),i=Vf(t,n,s),a=Tm(t,n,s);return t.forEach(c=>c.isRoot=!1),e&&Pm(e,t),Promise.all([o,r,i,a])},Pm=(e,t)=>{for(const n of t)n.replyingTo={user:e.author,pubkey:e.pubkey,event:e}},Im=async(e,t=[],n)=>{var i;if(!t.length)return e;const s=n||new Sn,o=e.map(a=>a.id),r=await s.querySync(t,{kinds:[1],"#e":o});for(const a of e){let c=0;for(const l of r){const u=Je.parse(l);!u.reply&&((i=u==null?void 0:u.root)==null?void 0:i.id)===a.id&&c++}a.replies=c}},Am=async(e,t)=>{var s;let n=0;for(const o of t){const r=Je.parse(o);!r.reply&&((s=r==null?void 0:r.root)==null?void 0:s.id)===e.id&&n++}e.replies=n},Tm=async(e,t=[],n)=>{var i;if(!t.length)return e;const s=n||new Sn,o=e.map(a=>a.id),r=await s.querySync(t,{kinds:[1],"#e":o});for(const a of e){let c=0;for(const l of r){const u=Je.parse(l);((i=u==null?void 0:u.reply)==null?void 0:i.id)===a.id&&c++}a.replies=c}},Pt=(e,t)=>{const n=[...e],s=[];return n.forEach(o=>{let r=!1;t.forEach(i=>{if(!r&&o.pubkey===(i==null?void 0:i.pubkey)){const a=o;a.author=JSON.parse(i.content),a.authorEvent=i,s.push(a),r=!0}}),r||s.push(o)}),s},Vf=async(e,t=[],n,s)=>{var f;if(!t.length)return e;let o=n||new Sn;const r={},i=new Set;for(const d of e){if(!Kf(d.content))continue;const h=Xo(d);for(let v=0;v<h.length;v++){let{profile:g}=h[v];g!=null&&g.pubkey&&i.add(g.pubkey)}r[d.id]=h}if(!i.size){e.forEach(d=>d.references=[]);return}const a=[];let c=[];if(s)for(const d of i){const h=(f=s[d])==null?void 0:f.event;h?a.push(h):c.push(d)}else c=[...i];const l=await Promise.all(c.map(async d=>o.get(t,{kinds:[0],authors:[d]}))),u=[...a,...l].sort((d,h)=>h.created_at-d.created_at);for(const d of e){const h=r[d.id];if(!h){d.references=[];continue}const v=[];for(let g=0;g<h.length;g++){let{profile:m}=h[g];m!=null&&m.pubkey&&u.forEach(w=>{if((w==null?void 0:w.pubkey)===m.pubkey){const E=h[g];E.profile_details=JSON.parse((w==null?void 0:w.content)||"{}"),v.push(E)}})}d.references=v}},Lm=e=>{if(!Kf(e.content))return[];const t=new Set,n=Xo(e);for(let s=0;s<n.length;s++){let{profile:o}=n[s];o!=null&&o.pubkey&&t.add(o.pubkey)}return t.size?[...t]:[]},Um=async(e,t)=>{if(!t.length){e.references=[];return}const n=Xo(e),s=[];for(let o=0;o<n.length;o++){let{profile:r}=n[o];r!=null&&r.pubkey&&t.forEach(i=>{if((i==null?void 0:i.pubkey)===(r==null?void 0:r.pubkey)){const a=n[o];a.profile_details=JSON.parse((i==null?void 0:i.content)||"{}"),s.push(a)}})}e.references=s},Nm=e=>{const t=new Set,n=[];return e.sort((o,r)=>r.created_at-o.created_at).forEach(o=>{const{pubkey:r}=o;t.has(r)||(t.add(r),n.push(o))}),n},jf=async(e,t=[],n)=>{if(!t.length)return e;const s=e.map(i=>i.id),r=await(n||new Sn).querySync(t,{kinds:[7],"#e":s});e.forEach(i=>{let a=0;r.forEach(c=>{var u;const l=(u=c.tags.reverse().find(f=>f[0]==="e"))==null?void 0:u[1];l&&l===i.id&&c.content&&zf(c.content)&&a++}),i.likes=a})},Bm=(e,t)=>{let n=0;t.forEach(s=>{var r;const o=(r=s.tags.reverse().find(i=>i[0]==="e"))==null?void 0:r[1];o&&o===e.id&&s.content&&zf(s.content)&&n++}),e.likes=n},Df=async(e,t=[],n)=>{if(!t.length)return e;const s=e.map(i=>i.id),r=await(n||new Sn).querySync(t,{kinds:[6],"#e":s});e.forEach(i=>{let a=0;r.forEach(c=>{var u;const l=(u=c.tags.find(f=>f[0]==="e"))==null?void 0:u[1];l&&l===i.id&&a++}),i.reposts=a})},Mm=(e,t)=>{let n=0;t.forEach(s=>{var r;const o=(r=s.tags.find(i=>i[0]==="e"))==null?void 0:r[1];o&&o===e.id&&n++}),e.reposts=n},qf=(e,t)=>t.filter(n=>{var o;const s=Je.parse(n);return!s.reply&&((o=s==null?void 0:s.root)==null?void 0:o.id)===e.id}),Wf=(e,t)=>t.filter(n=>{var o,r;const s=Je.parse(n);return((o=s==null?void 0:s.reply)==null?void 0:o.id)===e.id||((r=s==null?void 0:s.root)==null?void 0:r.id)===e.id}),Kf=e=>e.indexOf("nostr:npub")!==-1||e.indexOf("nostr:nprofile1")!==-1,zf=e=>!["-","👎"].includes(e),eo=(e,t=3e3)=>{try{return new Promise(n=>{const s=new WebSocket(e),o=setTimeout(()=>{s.close(),n(!1)},t);s.onopen=()=>{clearTimeout(o),s.close(),n(!0)},s.onerror=()=>{clearTimeout(o),s.close(),n(!1)}})}catch{return Promise.resolve(!1)}},ui=e=>/^[a-f0-9]{64}$/.test(e),Om=(e,t,n)=>{const s=new Promise(r=>{setTimeout(()=>{r(null)},n)}),o=new Promise(r=>{const i=e.subscribe(t,{onevent(a){r(a)},oneose(){i.close()}})});return Promise.race([o,s])},Gf=e=>{const{tags:t}=e,n={read:[],write:[],all:[]};return t.length&&t.forEach(s=>{if(s[0]==="r"){const r=zt.normalizeURL(s[1]),i=s[2];i?i==="read"?n.read.push(r):i==="write"&&n.write.push(r):(n.read.push(r),n.write.push(r)),n.all.push({url:r,type:i||"write"})}}),n},Jf=async(e,t,n)=>{const s=e.map(async o=>{const r=await t.publish([o],n),i=(await Promise.allSettled(r))[0];return{relay:o,success:i.status==="fulfilled"}});return await Promise.all(s)},Zf=e=>new Date(e*1e3).toLocaleString("default",{day:"numeric",month:"short",hour:"numeric",minute:"numeric"}),Hm=e=>new Date(e*1e3).toLocaleString("default",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"}),Yf=(e,t,n)=>{if(e.length===0)return;const s=e.map(o=>o.then(r=>({result:r,isFulfilled:!0,originalPromise:o})).catch(r=>({result:r,isFulfilled:!1,originalPromise:o})));Promise.race(s).then(({result:o,isFulfilled:r,originalPromise:i})=>{r?t(o):n(o);const a=e.filter(c=>c!==i);Yf(a,t,n)})},Fm={},Vm={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",class:"bi bi-link-45deg",viewBox:"0 0 16 16"},jm=y("path",{d:"M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1 1 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4 4 0 0 1-.128-1.287z"},null,-1),Dm=y("path",{d:"M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243z"},null,-1),qm=[jm,Dm];function Wm(e,t){return C(),U("svg",Vm,qm)}const Uc=xe(Fm,[["render",Wm]]),Km={},zm={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",class:"bi bi-check2",viewBox:"0 0 16 16"},Gm=y("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0"},null,-1),Jm=[Gm];function Zm(e,t){return C(),U("svg",zm,Jm)}const Nc=xe(Km,[["render",Zm]]),Ym={},Qm={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-check-square",viewBox:"0 0 16 16"},Xm=y("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"},null,-1),ew=y("path",{d:"M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"},null,-1),tw=[Xm,ew];function nw(e,t){return C(),U("svg",Qm,tw)}const Qf=xe(Ym,[["render",nw]]),sw={},ow={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-diagram-2-fill",viewBox:"0 0 16 16"},rw=y("path",{"fill-rule":"evenodd",d:"M6 3.5A1.5 1.5 0 0 1 7.5 2h1A1.5 1.5 0 0 1 10 3.5v1A1.5 1.5 0 0 1 8.5 6v1H11a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-1 0V8h-5v.5a.5.5 0 0 1-1 0v-1A.5.5 0 0 1 5 7h2.5V6A1.5 1.5 0 0 1 6 4.5zm-3 8A1.5 1.5 0 0 1 4.5 10h1A1.5 1.5 0 0 1 7 11.5v1A1.5 1.5 0 0 1 5.5 14h-1A1.5 1.5 0 0 1 3 12.5zm6 0a1.5 1.5 0 0 1 1.5-1.5h1a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1-1.5 1.5h-1A1.5 1.5 0 0 1 9 12.5z"},null,-1),iw=[rw];function aw(e,t){return C(),U("svg",ow,iw)}const cw=xe(sw,[["render",aw]]),lw={},uw={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"currentColor",class:"bi bi-exclamation-octagon",viewBox:"0 0 16 16"},fw=y("path",{d:"M4.54.146A.5.5 0 0 1 4.893 0h6.214a.5.5 0 0 1 .353.146l4.394 4.394a.5.5 0 0 1 .146.353v6.214a.5.5 0 0 1-.146.353l-4.394 4.394a.5.5 0 0 1-.353.146H4.893a.5.5 0 0 1-.353-.146L.146 11.46A.5.5 0 0 1 0 11.107V4.893a.5.5 0 0 1 .146-.353zM5.1 1 1 5.1v5.8L5.1 15h5.8l4.1-4.1V5.1L10.9 1z"},null,-1),dw=y("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"},null,-1),hw=[fw,dw];function pw(e,t){return C(),U("svg",uw,hw)}const Xf=xe(lw,[["render",pw]]),gw={class:"thread"},yw={key:0,class:"loading-thread"},vw={class:"event-card"},_w={key:0,class:"event-img"},mw=["src","title"],ww={class:"event-content"},bw={class:"event-header"},Ew=["href"],xw={class:"event-username-text"},Rw={key:0,class:"event-replying-to"},Sw={key:1,class:"replying-to-separator"},kw=["href"],Cw={class:"event-body"},$w={class:"event-footer"},Pw={class:"event-footer__right-actions"},Iw={class:"event-footer__link-wrapper"},Aw={class:"event__raw-data"},Tw={class:"event-footer-code-wrapper"},Lw={class:"event-footer__signature-text"},Uw={class:"event-footer__right-actions"},Nw={class:"event-footer__link-wrapper"},Bw={key:0,class:"reply-field"},Mw={class:"reply-field__actions"},Ow={class:"reply-field__error"},Hw=["disabled"],Fw={key:1,class:"loading-replies"},Vw={key:2,class:"replies"},jw=Ae({__name:"EventContent",props:{event:{},pool:{},pubKey:{},index:{},hasReplyBtn:{type:Boolean},isMainEvent:{type:Boolean},currentReadRelays:{},threadDescender:{}},emits:["toggleRawData","showReplyField","loadRootReplies","resetSentStatus","loadMoreReplies"],setup(e,{emit:t}){const n=t,s=V(""),o=V(""),r=e,i=Vo(),a=sr(),c=Bt(),l=oa(),u=rr(),f=Mt(),d=V(!1),h=V(!1),v=V([]),g=V(!1),m=V(!1),w=V(!1),E=V(!1),x=V([]),A=V(!1),L=R=>{if(r.isMainEvent)return n("toggleRawData",R);r.event.showRawData=!r.event.showRawData},P=R=>`/user/${Be.npubEncode(R)}`;mt(()=>{Object.keys(r.event).length!==0&&(w.value=Dn(r.event))});const D=(R,k)=>{if(R){let T="";if(R.name?T=R.name:R.username?T=R.username:T=R.display_name,T.length)return T}return Be.npubEncode(k).slice(0,10)+"..."},B=()=>{d.value=!d.value,n("showReplyField")},J=async()=>{if(h.value)return;if(!(c.nsec?c.nsec.trim():"").length){o.value="Please provide your private key or generate random key.";return}const k=s.value.trim();if(!k.length){o.value="Please provide message to broadcast.";return}let T,N;try{if(T=c.getPrivkeyBytes(),!T)throw new Error;if(N=c.getPubkey(),!N.length)throw new Error}catch{o.value="Invalid private key. Please check it and try again.";return}const Q=f.writeRelays;if(!Q.length){o.value="Please provide your write relays to broadcast event";return}const Y={kind:1,pubkey:N,created_at:Math.floor(Date.now()/1e3),content:k,tags:[],id:"",sig:""},z=[],fe=[];r.event.tags.forEach(S=>{const $=[S[0],S[1]];S[2]&&$.push(S[2]),S[3]&&$.push(S[3]),$[0]==="e"?z.push($):$[0]==="p"&&fe.push($)});const K=[];if(z.length){const S=z.find($=>$[3]==="root");S?K.push(S):K.push(z[0]),K.push(["e",r.event.id,"","reply"])}else K.push(["e",r.event.id,"","root"]);const H=Xo(Y),G=fe.map(S=>S[1]),b=[];H.forEach(S=>{var I;const $=(I=S==null?void 0:S.profile)==null?void 0:I.pubkey;$&&!G.includes($)&&(b.push(["p",$]),G.push($))});const F=[...b,...fe];G.includes(r.event.pubkey)||F.push(["p",r.event.pubkey]),Y.tags=[...F,...K];const q=lt(Y,T);o.value="",h.value=!0;const te=F.filter(S=>S[1]!==N).map(S=>S[1]);let he=[];const{pool:pe}=r;if(te.length){const S=[...f.reedRelays,...f.writeRelays,f.currentRelay.url],$=[...new Set(S)],I=await pe.querySync($,{kinds:[10002],authors:te}),W=new Set;I.forEach(ne=>{if(ne.tags.length){const{read:X}=Gf(ne);X.forEach(ee=>{f.writeRelays.includes(ee)||W.add(ee)})}}),he=[...W]}if(!(await Jf(Q,pe,q)).some(S=>S.success)){o.value="Failed to broadcast reply";return}if(he.length)try{await pe.publish(he,q)}catch{console.error("Failed to broadcast reply to some additional relays")}if(h.value=!1,d.value=!1,s.value="",r.isMainEvent)return n("loadRootReplies");M()},M=async()=>{const{event:R,currentReadRelays:k,pool:T}=r;if(!(k!=null&&k.length)||!T)return;if(r.isMainEvent)return n("loadMoreReplies");E.value=!0;let N=await T.querySync(k,{kinds:[1],"#e":[R.id]});R.isRoot?N=qf(R,N):N=Wf(R,N);const Q=r.threadDescender;if(N.length==1&&(Q==null?void 0:Q.id)===N[0].id){E.value=!1;return}const Y=N.map(K=>K.pubkey),z=[...new Set(Y)],fe=await T.querySync(k,{kinds:[0],authors:z});N=Pt(N,fe),await Xn(R,N,k,T),v.value=N,g.value=!0,E.value=!1},Z=()=>{g.value=!1},ae=()=>{const{origin:R,pathname:k}=window.location;let T=Be.noteEncode(r.event.id);const N=`${R}${k}#/event/${T}`;navigator.clipboard.writeText(N),m.value=!0,setTimeout(()=>{m.value=!1},2e3)},re=R=>{const k=Be.npubEncode(R);a.updateNpubInput(k),l.updateRoutingStatus(!0),i.push({path:P(R)})},oe=async R=>{var Q,Y;const{currentReadRelays:k,pool:T}=r;if(!(k!=null&&k.length)||!T)return[];const N=Je.parse(R);if(!N.root&&!N.reply)return[];if(N.root&&!N.reply){let z=await T.get(k,{kinds:[1],ids:[N.root.id]});if(!z)return[];const fe=await T.get(k,{kinds:[0],authors:[z.pubkey]});return fe&&await Pt([z],[fe]),await gn([z],k,T),[z]}if(N.reply){let z=await T.get(k,{kinds:[1],ids:[N.reply.id]});if(!z)return[];const fe=await T.get(k,{kinds:[0],authors:[z.pubkey]});fe&&await Pt([z],[fe]);const K=Je.parse(z),H=((Q=K==null?void 0:K.reply)==null?void 0:Q.id)||((Y=K==null?void 0:K.root)==null?void 0:Y.id),G=await T.get(k,{kinds:[1],ids:[H||""]});if(G){const F=await T.get(k,{kinds:[0],authors:[G.pubkey]});F&&await Pt([G],[F])}await Xn(G,[z],k,T);const b=await oe(z);return[z,...b]}return[]},O=async()=>{var K,H;const{event:R,pool:k,currentReadRelays:T}=r;if(!(T!=null&&T.length)||!k||A.value)return;A.value=!0;const N=R.replyingTo.event,Q=await k.get(T,{kinds:[0],authors:[N.pubkey]});Q&&await Pt([N],[Q]);const Y=Je.parse(N);if(!Y.root&&!Y.reply)await gn([N],T,k);else{const G=((K=Y==null?void 0:Y.reply)==null?void 0:K.id)||((H=Y==null?void 0:Y.root)==null?void 0:H.id),b=await k.get(T,{kinds:[1],ids:[G||""]});if(b){const F=await k.get(T,{kinds:[0],authors:[b.pubkey]});F&&await Pt([b],[F])}await Xn(b,[N],T,k)}const z=await oe(N),fe=[N,...z].reverse();A.value=!1,x.value=fe};return(R,k)=>{const T=Ts("EventContent",!0);return C(),U(be,null,[y("div",gw,[(C(!0),U(be,null,Qe(x.value,(N,Q)=>(C(),U("div",{class:"ancestor",key:R.event.id},[ye(T,{onToggleRawData:()=>L(N.id),event:N,currentReadRelays:R.currentReadRelays,pool:R.pool,hasReplyBtn:R.hasReplyBtn,threadDescender:x.value[Q+1]?x.value[Q+1]:R.event},null,8,["onToggleRawData","event","currentReadRelays","pool","hasReplyBtn","threadDescender"])]))),128)),A.value?(C(),U("div",yw,"Loading thread...")):ie("",!0)]),y("div",vw,[y("div",{class:Ce(["event-card__content",{flipped:R.event.showRawData}])},[y("div",{class:Ce(["event-card__front","event__presentable-date",{"event-card__front_custom":R.pubKey===R.event.pubkey}])},[ue(u).showImages&&R.event.author?(C(),U("div",_w,[y("img",{class:"author-pic",src:R.event.author.picture,alt:"user's avatar",title:`Avatar for ${R.event.author.name}`},null,8,mw)])):ie("",!0),y("div",ww,[y("div",bw,[y("div",null,[y("a",{class:"event-username-link",onClick:k[0]||(k[0]=Ns(()=>re(R.event.pubkey),["prevent"])),href:P(R.event.pubkey)},[y("b",xw,le(D(R.event.author,R.event.pubkey)),1)],8,Ew)]),y("div",null,le(ue(Zf)(R.event.created_at)),1)]),R.event.replyingTo?(C(),U("div",Rw,[R.isMainEvent?(C(),U("span",{key:0,onClick:O,class:"view-thread event-username-link event-username-text"},[ye(cw),Re(" View thread ")])):ie("",!0),R.isMainEvent?(C(),U("span",Sw,"  |  ")):ie("",!0),y("span",null,[Re(" Replying to "),y("a",{onClick:k[1]||(k[1]=Ns(()=>re(R.event.replyingTo.pubkey),["prevent"])),href:P(R.event.replyingTo.pubkey),class:"event-username-link event-username-text"},"@"+le(D(R.event.replyingTo.user,R.event.replyingTo.pubkey)),9,kw)])])):ie("",!0),y("div",Cw,[ye(bm,{event:R.event},null,8,["event"])]),y("div",$w,[ye(gm,{onShowReplyField:B,onHandleShowReplies:M,onHandleHideReplies:Z,hasReplyBtn:R.hasReplyBtn,likes:R.event.likes,reposts:R.event.reposts,replies:R.event.replies},null,8,["hasReplyBtn","likes","reposts","replies"]),y("div",Pw,[y("div",Iw,[m.value?(C(),Le(Nc,{key:0,class:"event-footer-copy-icon event-footer-copy-icon_check"})):ie("",!0),m.value?ie("",!0):(C(),Le(Uc,{key:1,onClick:ae,title:"Copy link",class:"event-footer-copy-icon"}))]),y("span",{onClick:k[2]||(k[2]=()=>L(R.event.id)),title:"See raw data",class:"event-footer-code"}," {...} ")])])])],2),y("div",{class:Ce(["event-card__back",{"event-card__back_custom":R.pubKey===R.event.pubkey,"event-details-first":R.index===0}])},[y("div",Aw,[ye(Hf,{event:R.event,authorEvent:R.event.authorEvent},null,8,["event","authorEvent"])]),y("div",Tw,[y("div",{class:Ce(["event-footer__signature",{"event-footer__signature_invalid":!w.value}])},[w.value?(C(),Le(Qf,{key:0})):ie("",!0),w.value?ie("",!0):(C(),Le(Xf,{key:1})),y("span",Lw,le(w.value?"Signature is valid":"Invalid signature"),1)],2),y("div",Uw,[y("div",Nw,[m.value?(C(),Le(Nc,{key:0,class:"event-footer-copy-icon event-footer-copy-icon_check"})):ie("",!0),m.value?ie("",!0):(C(),Le(Uc,{key:1,onClick:ae,title:"Copy link",class:"event-footer-copy-icon"}))]),y("span",{onClick:k[3]||(k[3]=()=>L(R.event.id)),title:"See raw data",class:"event-footer-code"}," {...} ")])])],2)],2)]),d.value?(C(),U("div",Bw,[Wt(y("textarea",{"onUpdate:modelValue":k[4]||(k[4]=N=>s.value=N),rows:"4",class:"reply-field__textarea",placeholder:"Write a reply..."},null,512),[[Hn,s.value]]),y("div",Mw,[y("div",Ow,le(o.value),1),y("button",{disabled:h.value,onClick:J,class:"reply-field__btn"},le(h.value?"Sending reply...":"Reply"),9,Hw)])])):ie("",!0),E.value?(C(),U("div",Fw," Loading replies... ")):ie("",!0),g.value&&v.value.length?(C(),U("div",Vw,[(C(!0),U(be,null,Qe(v.value,(N,Q)=>(C(),U("div",{class:"reply",key:N.id},[ye(T,{onToggleRawData:k[5]||(k[5]=()=>L(R.event.id)),event:N,currentReadRelays:R.currentReadRelays,pool:R.pool,hasReplyBtn:R.hasReplyBtn},null,8,["event","currentReadRelays","pool","hasReplyBtn"])]))),128))])):ie("",!0)],64)}}});const Ar=xe(jw,[["__scopeId","data-v-9a01161f"]]),Dw={},qw={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},Ww=y("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8ZM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2ZM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10Z"},null,-1),Kw=[Ww];function zw(e,t){return C(),U("svg",qw,Kw)}const Gw=xe(Dw,[["render",zw]]),qn=Nt("pool",()=>{const e=V(new Sn);function t(){e.value=new Sn}return{pool:e,resetPool:t}}),ed=e=>(Xe("data-v-4a71c53d"),e=e(),et(),e),Jw={class:"event"},Zw={key:0},Yw={key:1,class:"replies"},Qw={class:"replies__other-link"},Xw=ed(()=>y("span",{class:"replies__other-text"}," Show more replies ",-1)),eb={key:1,class:"replies__other"},tb={key:2,class:"replies__other"},nb={class:"replies__other-text"},sb={key:4},ob={key:5,class:"replies__list"},rb={class:"replies__list-item"},ib=ed(()=>y("div",{class:"replies__list-item-line-horizontal"},null,-1)),ab=Ae({__name:"ParentEventView",props:{event:{},pubKey:{},index:{},showReplies:{type:Boolean},hasReplyBtn:{type:Boolean},showRootReplies:{type:Boolean},currentReadRelays:{}},emits:["toggleRawData"],setup(e,{emit:t}){const s=qn().pool,o=t,r=e,i=V(!1),a=V(!1),c=V(!1),l=V(!1),u=V(!1),f=V(null),d=V([]);mt(async()=>{r.showReplies&&await h()});const h=async()=>{const{event:E,currentReadRelays:x}=r;if(!x.length)return;let A=await s.querySync(x,{kinds:[1],"#e":[E.id]});if(r.showRootReplies?A=A.filter(B=>{var M;const J=Je.parse(B);return!J.reply&&((M=J==null?void 0:J.root)==null?void 0:M.id)===E.id}):A=A.filter(B=>{var M,Z;const J=Je.parse(B);return((M=J==null?void 0:J.reply)==null?void 0:M.id)===E.id||((Z=J==null?void 0:J.root)==null?void 0:Z.id)===E.id}),!A.length)return;u.value=!0,a.value=A.length>1;let L=A[0],P=[L];await Xn(E,P,x,s),L=P[0];const D=await s.get(x,{kinds:[0],limit:1,authors:[L.pubkey]});D&&(L.author=JSON.parse(D.content)),f.value=L,u.value=!1},v=(E,x=!1)=>{if(x)return o("toggleRawData",E)},g=()=>{i.value=!i.value},m=async()=>{const{event:E,currentReadRelays:x}=r;if(!x.length)return;l.value=!0;let A=await s.querySync(x,{kinds:[1],"#e":[E.id]});if(E.isRoot?A=qf(E,A):A=Wf(E,A),!A.length){l.value=!1;return}const L=A.map(B=>B.pubkey),P=[...new Set(L)],D=await s.querySync(x,{kinds:[0],authors:P});A=Pt(A,D),await Xn(E,A,x,s),d.value=A,c.value=!0,l.value=!1},w=async()=>{i.value=!1,c.value?await m():await h()};return(E,x)=>(C(),U("div",Jw,[(C(),Le(Ar,{key:E.event.id,onLoadRootReplies:w,onShowReplyField:g,onToggleRawData:x[0]||(x[0]=A=>v(A,!0)),onLoadMoreReplies:m,event:E.event,pubKey:E.pubKey,isMainEvent:!0,currentReadRelays:E.currentReadRelays,pool:ue(s),hasReplyBtn:E.hasReplyBtn},null,8,["event","pubKey","currentReadRelays","pool","hasReplyBtn"])),u.value?(C(),U("div",Zw,"Loading replies...")):ie("",!0),E.showReplies&&f.value?(C(),U("div",Yw,[!c.value&&a.value&&!l.value?(C(),U("div",{key:0,onClick:m,class:"replies__other"},[y("span",Qw,[Xw,ye(Gw)])])):ie("",!0),l.value?(C(),U("div",eb," Loading replies... ")):ie("",!0),c.value&&a.value?(C(),U("div",tb,[y("span",nb," Loaded "+le(d.value.length)+" replies ",1)])):ie("",!0),y("div",{class:Ce(["line-vertical",{"line-vertical_long":a.value,"line-vertical_reply-field":i.value&&!a.value,"line-vertical_reply-field_long":i.value&&a.value}])},null,2),c.value?ie("",!0):(C(),U("div",{key:3,class:Ce(["line-horizontal",{"line-horizontal_height":a.value}])},null,2)),c.value?ie("",!0):(C(),U("div",sb,[(C(),Le(Ar,{key:f.value.id,event:f.value,currentReadRelays:E.currentReadRelays,pool:ue(s),hasReplyBtn:E.hasReplyBtn},null,8,["event","currentReadRelays","pool","hasReplyBtn"]))])),c.value?(C(),U("div",ob,[(C(!0),U(be,null,Qe(d.value,(A,L)=>(C(),U("div",rb,[ib,y("div",{class:Ce(["replies__list-item-line-vertical",{"replies__list-item-line-vertical_short":L===d.value.length-1}])},null,2),(C(),Le(Ar,{key:A.id,event:A,currentReadRelays:E.currentReadRelays,pool:ue(s),hasReplyBtn:E.hasReplyBtn},null,8,["event","currentReadRelays","pool","hasReplyBtn"]))]))),256))])):ie("",!0)])):ie("",!0)]))}});const td=xe(ab,[["__scopeId","data-v-4a71c53d"]]),cb=Ae({__name:"RelayEventsList",props:{events:{},pubKey:{},currentReadRelays:{}},emits:["toggleRawData"],setup(e,{emit:t}){const n=t,s=o=>{n("toggleRawData",o)};return(o,r)=>(C(),U("div",null,[(C(!0),U(be,null,Qe(o.events,(i,a)=>(C(),Le(td,{key:i.id,class:"event",onToggleRawData:s,currentReadRelays:o.currentReadRelays,event:i,pubKey:o.pubKey,index:a,showRootReplies:!0,showReplies:!0,hasReplyBtn:!0},null,8,["currentReadRelays","event","pubKey","index"]))),128))]))}});const lb=xe(cb,[["__scopeId","data-v-68b94602"]]),ub={key:0,class:"pagination"},fb={key:0},db={key:1},hb={key:1},pb={key:4},gb=Ae({__name:"Pagination",props:{pagesCount:{},currentPage:{}},emits:["showPage"],setup(e,{emit:t}){const n=t,s=Vs(),o=r=>({path:s.path,query:{...s.query,page:r}});return ct(()=>s.query.page,async r=>{const i=parseInt(r);i&&n("showPage",i)}),(r,i)=>{const a=Ts("router-link");return r.pagesCount>1?(C(),U("div",ub,[Re(" Pages: "),r.pagesCount<5?(C(),U("span",fb,[(C(!0),U(be,null,Qe(r.pagesCount,c=>(C(),Le(a,{key:c,class:Ce(["pagination__link",{pagination__link_active:r.currentPage==c}]),to:o(c)},{default:Ke(()=>[Re(le(c),1)]),_:2},1032,["class","to"]))),128))])):ie("",!0),r.pagesCount>=5?(C(),U("span",db,[r.currentPage>=3?(C(),Le(a,{key:1,class:Ce(["pagination__link"]),to:o(1)},{default:Ke(()=>[Re(le(1))]),_:1},8,["to"])):ie("",!0),r.currentPage>3?(C(),U("span",hb,"...")):ie("",!0),r.currentPage!=1?(C(),Le(a,{key:r.currentPage-1,class:Ce(["pagination__link"]),to:o(r.currentPage-1)},{default:Ke(()=>[Re(le(r.currentPage-1),1)]),_:1},8,["to"])):ie("",!0),(C(),Le(a,{key:r.currentPage,class:Ce(["pagination__link pagination__link_active"]),to:o(r.currentPage)},{default:Ke(()=>[Re(le(r.currentPage),1)]),_:1},8,["to"])),r.currentPage!=r.pagesCount?(C(),Le(a,{key:r.currentPage+1,class:Ce(["pagination__link"]),to:o(r.currentPage+1)},{default:Ke(()=>[Re(le(r.currentPage+1),1)]),_:1},8,["to"])):ie("",!0),r.currentPage<r.pagesCount-2?(C(),U("span",pb,"...")):ie("",!0),r.currentPage<=r.pagesCount-2?(C(),Le(a,{key:r.pagesCount,class:Ce(["pagination__link"]),to:o(r.pagesCount)},{default:Ke(()=>[Re(le(r.pagesCount),1)]),_:1},8,["to"])):ie("",!0)])):ie("",!0)])):ie("",!0)}}});const nd=xe(gb,[["__scopeId","data-v-fa836b0e"]]),yb=e=>(Xe("data-v-1382f7cb"),e=e(),et(),e),vb={class:"log"},_b=yb(()=>y("strong",null,"Relay events log",-1)),mb={class:"log__list"},wb={class:"log__list-item"},bb={key:0},Eb={key:1},xb=Ae({__name:"RelayLog",props:{eventsLog:{}},setup(e){const t=e;return(n,s)=>(C(),U("div",vb,[_b,y("ul",mb,[(C(!0),U(be,null,Qe(t.eventsLog,o=>(C(),U("li",wb,[(C(!0),U(be,null,Qe(o,({type:r,value:i})=>(C(),U(be,null,[r==="text"?(C(),U("span",bb,le(i),1)):(C(),U("b",Eb,le(i),1))],64))),256))]))),256))])]))}});const Rb=xe(xb,[["__scopeId","data-v-1382f7cb"]]),hs=Nt("feed",()=>{const e=V([]),t=V(!1),n=V([]),s=V(0),o=V([]),r=V([]),i=V(""),a=V(""),c=V("network"),l=me(()=>c.value==="follows"),u=me(()=>c.value==="network"),f=V(!1),d=V(!1),h=V(!1);function v(oe){e.value=oe}function g(oe){e.value.push(oe)}function m(oe){const O=e.value.find(R=>R.id===oe);O&&(O.showRawData=!O.showRawData)}function w(oe){t.value=oe}function E(oe){n.value=oe}function x(oe){s.value=oe}function A(oe){o.value=oe}function L(oe){o.value.push(oe)}function P(oe){r.value=oe}function D(oe){r.value.push(oe)}function B(oe){i.value=oe}function J(oe){a.value=oe}function M(oe){f.value=oe}function Z(oe){h.value=oe}function ae(oe){d.value=oe}function re(oe){c.value=oe==="follows"?oe:"network"}return{events:e,updateEvents:v,toggleEventRawData:m,showNewEventsBadge:t,setShowNewEventsBadge:w,newEventsBadgeImageUrls:n,setNewEventsBadgeImageUrls:E,newEventsBadgeCount:s,setNewEventsBadgeCount:x,newEventsToShow:o,updateNewEventsToShow:A,pushToNewEventsToShow:L,paginationEventsIds:r,updatePaginationEventsIds:P,pushToPaginationEventsIds:D,messageToBroadcast:i,updateMessageToBroadcast:B,signedJson:a,updateSignedJson:J,selectedFeedSource:c,setSelectedFeedSource:re,isFollowsSource:l,isNetworkSource:u,isLoadingFeedSource:f,setLoadingFeedSourceStatus:M,setLoadingNewEventsStatus:ae,isLoadingNewEvents:d,pushToEvents:g,setLoadingMoreStatus:Z,isLoadingMore:h}}),ia=e=>(Xe("data-v-e563eef7"),e=e(),et(),e),Sb={class:"laod-from"},kb=ia(()=>y("div",{class:"laod-from__title"}," Load posts from ",-1)),Cb={class:"load-from__select-wrapper"},$b=ia(()=>y("option",{value:"network"},"network",-1)),Pb=ia(()=>y("option",{value:"follows"},"follows",-1)),Ib=[$b,Pb],Ab={key:0,class:"notice"},Tb=Ae({__name:"LoadFromFeedSelect",setup(e){const t=Bt(),n=hs(),s=me(()=>n.selectedFeedSource==="follows"&&!t.isNsecValidTemp);return(o,r)=>(C(),U(be,null,[y("div",Sb,[kb,y("div",Cb,[Wt(y("select",{"onUpdate:modelValue":r[0]||(r[0]=i=>ue(n).selectedFeedSource=i),class:"load-from__select",name:"feed-source",id:"feed-source-select"},Ib,512),[[Wp,ue(n).selectedFeedSource]])])]),s.value?(C(),U("div",Ab," Please log in to load posts from people you follow. ")):ie("",!0)],64))}});const Lb=xe(Tb,[["__scopeId","data-v-e563eef7"]]),Bc=["wss://nos.lol","wss://relay.nostr.band","wss://relay.nostr.ai","wss://relayable.org","wss://relay.damus.io"],Pn=["wss://relay.damus.io","wss://nostr-pub.wellorder.net","wss://offchain.pub","wss://nostr.fmt.wiz.biz","wss://eden.nostr.land","wss://atlas.nostr.land","wss://relay.snort.social","wss://nostr.fly.dev","wss://nostr.nostr.band","wss://relay.nostrgraph.net","wss://relay.nostr.bg","wss://nostr.wine","wss://nos.lol","wss://relay.mostr.pub","wss://no.str.cr","wss://brb.io","wss://nostr.zebedee.cloud"],Mn=20,Ub=e=>(Xe("data-v-1dfc7855"),e=e(),et(),e),Nb={id:"feed"},Bb={class:"columns"},Mb={key:0,class:"connecting-notice"},Ob={key:1,class:"connecting-notice"},Hb={key:0,class:"new-events__imgs"},Fb=["src"],Vb=["src"],jb={class:"new-events__text"},Db=Ub(()=>y("b",{class:"new-events__arrow"},"↑",-1)),qb={key:3,class:"loading-more"},Wb=Ae({__name:"Feed",props:{eventsLog:{}},emits:["loadNewRelayEvents","handleRelayConnect"],setup(e,{emit:t}){const n=Mt(),s=rr(),o=hs(),r=Bt(),a=qn().pool,c=t,l=me(()=>o.newEventsBadgeImageUrls[0]),u=me(()=>o.newEventsBadgeImageUrls[1]),f=V(1),d=me(()=>Math.ceil(o.paginationEventsIds.length/Mn)),h=Vs(),v=me(()=>h.path);ct(()=>h.path,async()=>{f.value>1&&g(1)}),ct(()=>o.selectedFeedSource,async w=>{n.currentRelay.connected&&r.isValidNsecPresented()&&await c("handleRelayConnect",!0,!0)}),mt(()=>{d.value>1&&g(1)});const g=async w=>{if(o.isLoadingNewEvents)return;o.setLoadingNewEventsStatus(!0);const E=n.connectedFeedRelaysUrls;if(!E.length)return;const x=Mn,A=(w-1)*x,L=A+x,D=o.paginationEventsIds.slice().reverse().slice(A,L),B=await a.querySync(E,{ids:D}),J=Array.from(new Set([...B.map(re=>re.pubkey)])),Z=(await Promise.all([Promise.all(J.map(async re=>a.get(E,{kinds:[0],authors:[re]}))),gn(B,E,a)]))[0];let ae=Pt(B,Z);ae=ae.sort((re,oe)=>oe.created_at-re.created_at),o.updateEvents(ae),o.setLoadingNewEventsStatus(!1),f.value=w},m=async()=>{await c("loadNewRelayEvents"),f.value=1};return(w,E)=>(C(),U("div",Nb,[ye(Lb),y("div",Bb,[y("div",{class:Ce(["events",{events_hidden:v.value==="/log"}])},[ue(o).isLoadingFeedSource?(C(),U("div",Mb," Loading feed from "+le(ue(o).selectedFeedSource)+"... ",1)):ie("",!0),ue(o).isLoadingNewEvents?(C(),U("div",Ob," Loading new notes... ")):ie("",!0),ue(o).showNewEventsBadge?(C(),U("div",{key:2,onClick:m,class:Ce(["new-events",{"new-events_top-shifted":ue(o).isLoadingNewEvents}])},[ue(s).showImages?(C(),U("div",Hb,[y("img",{class:"new-events__img",src:l.value,alt:"user's avatar"},null,8,Fb),y("img",{class:"new-events__img",src:u.value,alt:"user's avatar"},null,8,Vb)])):ie("",!0),y("span",jb,le(ue(o).newEventsBadgeCount)+" new notes",1),Db],2)):ie("",!0),ye(lb,{events:ue(o).events,pubKey:ue(r).getPubkey(),showImages:ue(s).showImages,currentReadRelays:ue(n).connectedFeedRelaysUrls,onToggleRawData:ue(o).toggleEventRawData},null,8,["events","pubKey","showImages","currentReadRelays","onToggleRawData"]),ue(o).isLoadingMore?(C(),U("div",qb," Loading more posts... ")):ie("",!0),ye(nd,{pagesCount:d.value,currentPage:f.value,onShowPage:g},null,8,["pagesCount","currentPage"])],2),y("div",{class:Ce(["log-wrapper",{"log-wrapper_hidden":v.value!=="/log"}])},[ye(Rb,{eventsLog:w.eventsLog},null,8,["eventsLog"])],2)])]))}});const Tr=xe(Wb,[["__scopeId","data-v-1dfc7855"]]),Kb=e=>(Xe("data-v-7bdb886c"),e=e(),et(),e),zb={class:"message-fields-wrapper"},Gb={class:"message-fields"},Jb={class:"message-fields__field"},Zb=Kb(()=>y("label",{for:"message"},[y("strong",null,"Message to broadcast")],-1)),Yb={class:"field-elements"},Qb=["value"],Xb={class:"send-btn-wrapper"},e2=["disabled"],t2={class:"error"},n2={class:"notice"},s2=Ae({__name:"MessageInput",props:{sentEventIds:{},isSendingMessage:{type:Boolean},broadcastNotice:{}},emits:["broadcastEvent"],setup(e,{emit:t}){const n=e,s=t,o=Bt(),r=hs(),i=V(""),a=async()=>{if(!(o.nsec?o.nsec.trim():"").length){i.value="Please provide your private key or generate random key.";return}const u=r.messageToBroadcast.trim();if(!u.length){i.value="Please provide message to broadcast.";return}let f,d;try{if(f=o.getPrivkeyBytes(),!f)throw new Error;if(d=o.getPubkey(),!d.length)throw new Error}catch{i.value="Invalid private key. Please check it and try again.";return}const h={kind:1,pubkey:d,created_at:Math.floor(Date.now()/1e3),content:u,tags:[],id:"",sig:""},v=lt(h,f);if(n.sentEventIds.has(v.id)){i.value="The same event can't be sent twice (same id, signature).";return}i.value="",s("broadcastEvent",v,"text")},c=l=>{var u;r.updateMessageToBroadcast((u=l==null?void 0:l.target)==null?void 0:u.value)};return(l,u)=>(C(),U("div",zb,[y("div",Gb,[y("div",Jb,[Zb,y("div",Yb,[y("textarea",{class:"message-input",name:"message",id:"message",cols:"30",rows:"3",value:ue(r).messageToBroadcast,onInput:c,placeholder:"Test message 👋"},null,40,Qb)]),y("div",Xb,[y("button",{disabled:l.isSendingMessage,class:"send-btn",onClick:a},le(l.isSendingMessage?"Broadcasting...":"Broadcast"),9,e2)])])]),y("div",t2,le(i.value),1),y("div",n2,le(l.broadcastNotice),1)]))}});const Mc=xe(s2,[["__scopeId","data-v-7bdb886c"]]),ir=e=>(Xe("data-v-efc02ad6"),e=e(),et(),e),o2={class:"message-fields-wrapper"},r2={class:"signed-message-desc"},i2=ir(()=>y("p",{class:"signed-message-desc_p"},[Re(" Event should be signed with your private key in advance. Event will be broadcasted to a selected relay. More details about events and signatures are "),y("a",{target:"_blank",href:"https://github.com/nostr-protocol/nips/blob/master/01.md#events-and-signatures"},"here"),Re(". ")],-1)),a2={class:"signed-message-desc_p"},c2=ir(()=>y("br",null,null,-1)),l2={key:0,class:"additional-relays"},u2={class:"additional-relay-field"},f2=ir(()=>y("span",null,"1.",-1)),d2=["value"],h2={class:"additional-relay-field"},p2=["onInput"],g2={class:"message-fields__field_sig"},y2=ir(()=>y("label",{class:"message-fields__label",for:"signed_json"},[y("strong",null,"JSON of a signed event")],-1)),v2={class:"field-elements"},_2={class:"signed-json-btn-wrapper"},m2={class:"error"},w2=["disabled"],b2=Ae({__name:"SignedEventInput",props:{isSendingMessage:{type:Boolean},broadcastError:{}},emits:["broadcastEvent"],setup(e,{emit:t}){const n=t,s=Mt(),o=hs(),r=V(""),i=()=>{if(!o.signedJson.length){r.value="Provide signed event.";return}let u;try{u=JSON.parse(o.signedJson)}catch{r.value="Invalid JSON. Please check it and try again.";return}const f=s.currentRelay;if(!(f!=null&&f.connected)){r.value="Please connect to relay first.";return}r.value="",n("broadcastEvent",u,"json")},a=()=>{const u=s.additionalRelaysCountForSignedEvent+1;s.updateAdditionalRelaysCountForSignedEvent(u)},c=u=>{var f;o.updateSignedJson((f=u==null?void 0:u.target)==null?void 0:f.value)},l=(u,f)=>{var h;const d=(h=u==null?void 0:u.target)==null?void 0:h.value;s.updateRelayAdditionalRelaysUrlsForSignedEvent(f,d)};return(u,f)=>{var d,h;return C(),U("div",o2,[y("div",r2,[i2,y("p",a2,[Re(" Event will be broadcasted to a selected relay. You can add more relays to retransmit the event. "),c2,y("button",{class:"additional-relay-btn",onClick:a}," Add relay "),ue(s).additionalRelaysCountForSignedEvent>0?(C(),U("div",l2,[y("div",u2,[f2,y("input",{readonly:"",value:(d=ue(s).currentRelay)!=null&&d.url?`${(h=ue(s).currentRelay)==null?void 0:h.url} (already selected)`:"Firstly connect to default relay",type:"text"},null,8,d2)]),(C(!0),U(be,null,Qe(ue(s).additionalRelaysCountForSignedEvent,v=>(C(),U("div",null,[y("div",h2,[y("span",null,le(v+1)+".",1),y("input",{onInput:g=>l(g,v),placeholder:"[wss://]relay.example.com",type:"text"},null,40,p2)])]))),256))])):ie("",!0)])]),y("div",g2,[y2,y("div",v2,[y("textarea",{class:"signed-json-textarea",name:"signed_json",id:"signed_json",cols:"30",rows:"5",onInput:c,placeholder:'{"kind":1,"pubkey":"5486dbb083512982669fa180aa02d722ce35054233cea724061fbc5f39f81aa3","created_at":1685664152,"content":"Test message 👋","tags":[],"id":"89adae408121ba6d721203365becff4d312292a9dd9b7a35ffa230a1483b09a2","sig":"b2592ae88ba1040c928e458dd6822413f148c8cc4f478d992e024e8c9d9648b96e6ce6dc564ab5815675007f824d9e9f634f8dbde554afeb6e594bcaac4389dd"}'},le(ue(o).signedJson),33)])]),y("div",_2,[y("div",m2,le(r.value)+" "+le(u.broadcastError),1),y("button",{disabled:u.isSendingMessage,class:"send-btn send-btn_signed-json",onClick:i},le(u.isSendingMessage?"Broadcasting...":"Broadcast"),9,w2)])])}}});const E2=xe(b2,[["__scopeId","data-v-efc02ad6"]]),x2=Ii('<h3>Slightly Private App</h3><p><a href="https://nostr.com">nostr</a> is public, censorship-resistant social network. It&#39;s simple: <ol><li>Select a relay from the list, or specify a <a href="https://nostr.watch/" target="_blank">custom URL</a></li><li><em>Optionally</em>, set your private key, to create new messages</li></ol></p><p> Traditional social networks can suppress certain posts or users. In nostr, every message is signed by user&#39;s <em>private key</em> and broadcasted to <em>relays</em>. <strong>Messages are tamper-resistant</strong>: no one can edit them, or the signature will become invalid. <strong>Users can&#39;t be blocked</strong>: even if a relay blocks someone, it&#39;s always possible to switch to a different one, or create up a personal relay. </p><p> The app is available at <a href="http://nostr.spa">nostr.spa</a>. You can: <ul><li><em>Connect</em> and see relay&#39;s global feed.</li><li><em>Post</em> new messages to the relay.</li><li><em>Broadcast</em> a pre-signed message. No need to enter a private key.</li><li><em>Search</em> information about a user or an event.</li></ul></p>',4),R2=Ii("<ul><li>No tracking from our end</li><li>Private keys are not sent anywhere. They are stored in RAM of your device</li><li>Relay will see your ip+browser after you click <em>Connect</em> button</li><li>GitHub will see ip+browser of anyone who&#39;s using the app, because it&#39;s hosted on GitHub Pages. They won&#39;t see any nostr-specific interactions you will make</li><li><em>Show avatars</em> feature will leak your ip+browser to random people on the internet. Since there are no centralized servers in nostr, every user can specify their own URL for avatar hosting. Meaning, users can control the hosting webservers and see logs</li><li><em>Remember me</em> feature will write private key you&#39;ve entered to browser&#39;s Local Storage, which is usually stored on your device&#39;s disk</li><li>VPN or TOR usage is advised, <em>as with any nostr client</em>, to prevent ip leakage</li></ul>",1),S2=Ii('<h3>Open source</h3><p> The lightweight nostr client is built to showcase <a href="/noble/">noble</a> cryptography. Signing is done using <a target="_blank" href="https://github.com/paulmillr/noble-curves">noble-curves</a>, while <a target="_blank" href="https://github.com/paulmillr/scure-base">scure-base</a> is used for bech32, <a target="_blank" href="https://github.com/nbd-wtf/nostr-tools">nostr-tools</a> are used for general nostr utilities and Vue.js is utilized for UI. Check out <a target="_blank" href="https://github.com/paulmillr/paulmillr.github.io">the source code</a>. You are welcome to host the client on your personal website. </p>',2),Oc=Ae({__name:"Help",props:{showPrivacy:{}},setup(e){const t=Vs(),n=V(null);return mt(()=>{n.value&&t.hash=="#privacy"&&n.value.scrollIntoView()}),Ci(()=>{n.value&&t.hash=="#privacy"&&n.value.scrollIntoView()}),(s,o)=>(C(),U(be,null,[x2,y("p",null,[y("h3",{id:"#privacy",ref_key:"privacyEl",ref:n},"Privacy policy",512),R2]),S2],64))}}),kt=us({value:1,update(e){this.value=e}}),k2=Nt("user-notes",()=>{const e=V([]),t=V([]);function n(r){e.value=r}function s(r){t.value=r}function o(r){const i=e.value.find(a=>a.id===r);i&&(i.showRawData=!i.showRawData)}return{notes:e,allNotesIds:t,updateNotes:n,updateIds:s,toggleRawData:o}}),ar=e=>(Xe("data-v-59817eec"),e=e(),et(),e),C2={class:"event"},$2={key:0,class:"event__content"},P2=ar(()=>y("hr",null,null,-1)),I2={class:"event__code-block"},A2={class:"event__code-title"},T2=ar(()=>y("b",null,"Author: ",-1)),L2={class:"content-col_code"},U2={class:"event__code"},N2={class:"event__code-block"},B2={class:"event__code-title"},M2=ar(()=>y("b",null,"Event id: ",-1)),O2={class:"content-col_code"},H2={class:"event__code"},F2=ar(()=>y("div",{class:"header-col"},[y("b",null,"Created: ")],-1)),V2={class:"content-col_code"},j2={class:"event__code"},D2={class:"event-footer__signature-text"},q2=Ae({__name:"UserEvent",props:{event:{},author:{},key:{}},setup(e){const t=e,n=V(!1),s=V(!1),o=V(!1),r=V(""),i=V(""),a=V(""),c=V(0),l=V(!1);Eh(()=>{const{event:f}=t;r.value=f.id,i.value=f.sig,a.value=f.pubkey,c.value=f.created_at}),mt(()=>{Object.keys(t.event).length!==0&&(l.value=Dn(t.event))});const u=()=>{n.value=!n.value};return(f,d)=>(C(),U("div",C2,[n.value?ie("",!0):(C(),U("div",$2,[Th(f.$slots,"default",{},()=>[Re("No content for event")],!0),P2,y("div",I2,[y("div",A2,[T2,y("button",{class:"event__code-btn",onClick:d[0]||(d[0]=h=>o.value=!o.value)},le(o.value?"npub":"hex"),1)]),y("div",L2,[y("code",U2,le(o.value?a.value:ue(Be).npubEncode(a.value)),1)])]),y("div",N2,[y("div",B2,[M2,y("button",{class:"event__code-btn",onClick:d[1]||(d[1]=h=>s.value=!s.value)},le(s.value?"nevent":"hex"),1)]),y("div",O2,[y("code",H2,le(s.value?r.value:ue(Be).neventEncode({id:r.value})),1)])]),y("div",null,[F2,y("div",V2,[y("code",j2,le(ue(Zf)(c.value)),1)])])])),n.value?(C(),Le(Hf,{key:1,isUserEvent:!0,event:f.event,authorEvent:f.event},null,8,["event","authorEvent"])):ie("",!0),y("div",{class:Ce(["event-footer",{"event-footer_flex-end":!n.value}])},[n.value?(C(),U("div",{key:0,class:Ce(["event-footer__signature",{"event-footer__signature_invalid":!l.value}])},[l.value?(C(),Le(Qf,{key:0})):ie("",!0),l.value?ie("",!0):(C(),Le(Xf,{key:1})),y("span",D2,le(l.value?"Signature is valid":"Invalid signature"),1)],2)):ie("",!0),y("div",null,[y("span",{class:"event-footer-code",onClick:u},"{...}")])],2)]))}});const W2=xe(q2,[["__scopeId","data-v-59817eec"]]),K2={},z2={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-download",viewBox:"0 0 16 16"},G2=y("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"},null,-1),J2=y("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"},null,-1),Z2=[G2,J2];function Y2(e,t){return C(),U("svg",z2,Z2)}const Q2=xe(K2,[["render",Y2]]),cr=e=>(Xe("data-v-2dff21be"),e=e(),et(),e),X2={class:"field"},eE={class:"field-label",for:"user_public_key"},tE=cr(()=>y("strong",null,"Profile's public key or event id",-1)),nE={class:"field-elements"},sE={class:"error"},oE={key:0,class:"loading-notice"},rE={class:"user"},iE={key:0,class:"user__avatar-wrapper"},aE=["src"],cE={class:"user__info"},lE={class:"user__nickname"},uE={class:"user__name"},fE={class:"user__desc"},dE={key:0,class:"user__nip05"},hE=["href"],pE=cr(()=>y("strong",null,"nip05",-1)),gE={key:1,class:"user__contacts"},yE={class:"user__contacts-col user__following-cnt"},vE={class:"user__contacts-col user__followers-cnt"},_E={key:0},mE={key:1,class:"user__contacts-download-icon"},wE=cr(()=>y("span",{class:"user__contacts-followers-word"}," Followers ",-1)),bE={key:2},EE={key:3,id:"user-posts"},xE={key:0},RE={key:1},SE={key:5,class:"not-found"},kE=cr(()=>y("div",{class:"not-found__desc"}," Data was not found on selected relay. Please try to connect to another one or you can try to load info from the list of popular relays: ",-1)),CE=Ae({__name:"User",props:{handleRelayConnect:{type:Function}},setup(e){const n=qn().pool,s=sr(),o=k2(),r=oa(),i=rr(),a=Bt(),c=Mt(),l=e,u=V({}),f=V({}),d=V(!1),h=V(!1),v=V(""),g=V(!1),m=V(""),w=V(!1),E=V(""),x=V(!1),A=V(!1),L=V(!1),P=V(!1),D=V(!0),B=V(1),J=me(()=>Math.ceil(o.allNotesIds.length/Mn)),M=Vo(),Z=Vs(),ae=H=>{const[G,b]=H.split("@");return`https://${b}/.well-known/nostr.json?name=${G}`},re=V([]);mt(()=>{var H,G;if((G=(H=Z.params)==null?void 0:H.id)!=null&&G.length&&!c.currentRelay.connected){s.updateNpubInput(Z.params.id),s.updateCachedUrl(Z.params.id),c.currentRelay.connected||(L.value=!0);return}if(r.isRoutingUser&&s.npubInput.length){s.updateCachedUrl(s.npubInput),r.updateRoutingStatus(!1),k();return}}),ct(()=>Z.params,()=>{r.isRoutingUser&&(s.updateCachedUrl(s.npubInput),r.updateRoutingStatus(!1),k())}),ct(()=>Z.redirectedFrom,()=>{s.updateNpubInput(Z.params.id),s.updateCachedUrl(Z.params.id),R()}),Al(()=>{o.notes.length&&k()});const oe=()=>{E.value="",g.value=!1},O=async H=>{const G=c.connectedUserReadRelayUrlsWithSelectedRelay;if(!G.length)return;const b=Mn,F=(H-1)*b,q=F+b,te=o.allNotesIds.slice(F,q),he=await n.querySync(G,{ids:te});let pe=T(he,f.value);await gn(pe,G,n),o.updateNotes(pe),B.value=H},R=()=>{u.value={},f.value={},o.updateNotes([]),o.updateIds([])},k=async()=>{kt.update(kt.value+1);const H=kt.value,G=s.npubInput.trim();let b=!1;if(!G.length){v.value="Public key or event id is required.";return}if(ui(G))m.value=G,b=!0;else try{let{data:pe,type:p}=Be.decode(G);if(p!=="npub"&&p!=="note"){v.value="Public key or event id should be in npub or note format, or hex.";return}P.value=p==="note",m.value=pe.toString()}catch{v.value="Public key or event id is invalid. Please check it and try again.";return}L.value&&await l.handleRelayConnect();const F=c.connectedUserReadRelayUrlsWithSelectedRelay;if(H!==kt.value)return;if(!F.length){v.value=L.value?"Connection error, try to connect again or try to choose other relay.":"Please connect to relay first.";return}L.value=!1,R(),h.value=!1,v.value="",w.value=!0;let q=[];if(P.value||b){const pe=m.value;if(q=await n.querySync(F,{ids:[pe]}),H!==kt.value)return;q.length&&(o.updateIds(q.map(p=>p.id)),m.value=q[0].pubkey,P.value=!0)}const te=await n.get(F,{kinds:[0],limit:1,authors:[m.value]});if(H!==kt.value)return;if(!te){w.value=!1,g.value=!0;return}re.value=F;const he=await n.get(F,{kinds:[3],limit:1,authors:[m.value]});if(H===kt.value){if(u.value=te,f.value=JSON.parse(te.content),f.value.followingCount=(he==null?void 0:he.tags.length)||0,d.value=!1,w.value=!1,g.value=!1,P.value?M.push({path:`/event/${G}`}):M.push({path:`/user/${G}`}),s.updateCachedUrl(G),A.value=!0,N(H),!P.value){if(q=await n.querySync(F,{kinds:[1],authors:[m.value]}),H!==kt.value)return;const pe=new Set;q.forEach(_=>{const S=Je.parse(_);(S.reply||S.root)&&pe.add(_.id)}),q=q.filter(_=>!pe.has(_.id)),o.updateIds(q.map(_=>_.id));const p=Mn;B.value=1,q=q.slice(0,p)}if(q=T(q,f.value),P.value){const pe=q[0],p=Je.parse(pe),_=p.reply||p.root;if(_){D.value=!1;let S=await n.get(re.value,{kinds:[1],ids:[_.id]});if(S){const $=await n.get(re.value,{kinds:[0],authors:[S.pubkey]});$&&(S.author=JSON.parse($.content))}await Xn(S,q,re.value,n)}else await gn(q,F,n)}else await gn(q,F,n);H===kt.value&&(o.updateNotes(q),A.value=!1)}},T=(H,G)=>H.map(b=>(b.author=G,b)),N=async(H=0)=>{const G=f.value.nip05,b=u.value.pubkey;if(!(!G||!b))try{const F=await Q(G,b);if(H&&H!==kt.value)return;d.value=F}catch{console.log("Failed to check nip05")}},Q=async(H,G)=>{const b=await xf.queryProfile(H);return G===(b==null?void 0:b.pubkey)},Y=()=>{if(!a.nsec.trim().length){v.value="Please provide private key first.";return}try{const G=a.getPubkey();if(!G.length)throw new Error;s.updateNpubInput(Be.npubEncode(G)),v.value=""}catch{v.value="Private key is invalid. Please check it and try again.";return}},z=async()=>{const H=s.npubInput.trim();let G=!1;if(!H.length){E.value="Public key or event id is required.";return}if(ui(H))m.value=H,G=!0;else try{let{data:te,type:he}=Be.decode(H);if(he!=="npub"&&he!=="note"){E.value="Public key or event id should be in npub or note format, or hex.";return}P.value=he==="note",m.value=te.toString()}catch{E.value="Public key or event id is invalid. Please check it and try again.";return}x.value=!0,o.updateIds([]);let b=[];if(P.value||G){const te=m.value;b=await n.querySync(Pn,{ids:[te]}),b.length&&(m.value=b[0].pubkey,P.value=!0)}const F=await n.get(Pn,{kinds:[0],limit:1,authors:[m.value]});if(!F){x.value=!1,E.value="User was not found on listed relays.";return}re.value=Pn;const q=await n.get(Pn,{kinds:[3],limit:1,authors:[m.value]});if(u.value=F,f.value=JSON.parse(F.content),f.value.followingCount=(q==null?void 0:q.tags.length)||0,E.value="",x.value=!1,g.value=!1,h.value=!0,d.value=!1,P.value?M.push({path:`/event/${H}`}):M.push({path:`/user/${H}`}),s.updateCachedUrl(H),A.value=!0,N(),!P.value){b=await n.querySync(Pn,{kinds:[1],authors:[m.value]});const te=new Set;b.forEach(he=>{const pe=Je.parse(he);(pe.reply||pe.root)&&te.add(he.id)}),b=b.filter(he=>!te.has(he.id))}b=T(b,f.value),await gn(b,Pn,n),o.updateNotes(b),A.value=!1},fe=async()=>{f.value.followersCount=0;const H=n.subscribeMany(re.value,[{"#p":[m.value],kinds:[3]}],{onevent(G){f.value.followersCount=f.value.followersCount+1},oneose(){H.close()}})},K=H=>{o.toggleRawData(H)};return(H,G)=>(C(),U(be,null,[y("div",X2,[y("label",eE,[tE,ue(a).nsec.length?(C(),U("button",{key:0,onClick:Y,class:"random-key-btn"},"Use mine")):ie("",!0)]),y("div",nE,[Wt(y("input",{onInput:oe,"onUpdate:modelValue":G[0]||(G[0]=b=>ue(s).npubInput=b),class:"pubkey-input",id:"user_public_key",type:"text",placeholder:"npub, note, hex of pubkey or note id..."},null,544),[[Hn,ue(s).npubInput]]),y("button",{onClick:k,class:"get-user-btn"},le(L.value?"Connect & Search":"Search"),1)]),y("div",sE,le(v.value),1)]),w.value?(C(),U("div",oE," Loading event info... ")):ie("",!0),u.value.id?(C(),Le(W2,{author:f.value,event:u.value,key:u.value.id},{default:Ke(()=>[y("div",rE,[ue(i).showImages?(C(),U("div",iE,[y("img",{class:"user__avatar",src:f.value.picture},null,8,aE)])):ie("",!0),y("div",cE,[y("div",null,[y("div",lE,le(f.value.username||f.value.name),1),y("div",uE,le(f.value.display_name||""),1),y("div",fE,le(f.value.about||""),1),d.value?(C(),U("div",dE,[y("a",{target:"_blank",href:ae(f.value.nip05)},[pE,Re(": "+le(f.value.nip05),1)],8,hE)])):ie("",!0),f.value.followingCount>=0?(C(),U("div",gE,[y("span",yE,[y("b",null,le(f.value.followingCount),1),Re(" Following ")]),y("span",vE,[f.value.followersCount?(C(),U("b",_E,le(f.value.followersCount),1)):(C(),U("span",mE,[ye(Q2,{onClick:fe})])),wE])])):ie("",!0)])])])]),_:1},8,["author","event"])):ie("",!0),A.value?(C(),U("div",bE,"Loading notes...")):ie("",!0),ue(o).notes.length>0&&!A.value?(C(),U("h3",EE,[P.value?(C(),U("span",xE,"Event info")):(C(),U("span",RE,"User notes"))])):ie("",!0),(C(!0),U(be,null,Qe(ue(o).notes,(b,F)=>(C(),Le(td,{key:b.id,hasReplyBtn:!0,showReplies:!0,showRootReplies:D.value,currentReadRelays:re.value,index:F,onToggleRawData:K,event:b},null,8,["showRootReplies","currentReadRelays","index","event"]))),128)),!A.value&&!w.value?(C(),Le(nd,{key:4,pagesCount:J.value,currentPage:B.value,onShowPage:O},null,8,["pagesCount","currentPage"])):ie("",!0),g.value?(C(),U("div",SE,[kE,y("div",null,[y("button",{onClick:z,class:"fallback-search-btn"}," Search in all listed relays "),y("div",{class:Ce(["not-found__status",{error:E.value.length}])},le(E.value)+" "+le(x.value?"Searching...":""),3),y("ul",null,[(C(!0),U(be,null,Qe(ue(Pn),b=>(C(),U("li",null,le(b),1))),256))])])])):ie("",!0)],64))}});const Hc=xe(CE,[["__scopeId","data-v-2dff21be"]]),$E={},PE={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},IE=y("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"},null,-1),AE=y("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"},null,-1),TE=[IE,AE];function LE(e,t){return C(),U("svg",PE,TE)}const UE=xe($E,[["render",LE]]),NE={class:"show-images"},BE={class:"show-images__field"},ME=["checked"],OE=y("label",{class:"show-images__label",for:"show-feed-images"}," Show avatars",-1),HE=Ae({__name:"ShowImagesCheckbox",props:{showImages:{type:Boolean}},emits:["toggleImages"],setup(e,{emit:t}){const n=e,s=t;return(o,r)=>{const i=Ts("router-link");return C(),U("div",NE,[y("span",BE,[y("input",{onChange:r[0]||(r[0]=a=>s("toggleImages")),class:"show-images__input",type:"checkbox",id:"show-feed-images",checked:n.showImages},null,40,ME),OE]),y("small",null,[Re(" ("),ye(i,{to:{path:"/help",hash:"#privacy"}},{default:Ke(()=>[Re("Exposes your IP")]),_:1}),Re(")")])])}}});const Ot=e=>(Xe("data-v-d5b9796a"),e=e(),et(),e),FE=Ot(()=>y("h4",null,"Images:",-1)),VE={class:"show-images"},jE=Ot(()=>y("h4",null,"Your relays:",-1)),DE={class:"error"},qE={class:"relays"},WE={class:"relay"},KE={class:"actions"},zE=["onChange","id","name","checked"],GE=["for"],JE=Ot(()=>y("span",{class:"actions__delimiter"}," | ",-1)),ZE=["onClick"],YE=Ot(()=>y("span",{class:"actions__remove-label"},"remove",-1)),QE={key:0},XE={key:0},ex={key:1},tx=Ot(()=>y("h4",null,"Add relay:",-1)),nx={class:"add-relay"},sx={class:"error"},ox=Ot(()=>y("h4",null,"Your Keys:",-1)),rx={class:"keys"},ix={class:"key-block"},ax=Ot(()=>y("div",null," Public key: ",-1)),cx=Ot(()=>y("div",{class:"key-block__desc"},[y("small",null," Public key identifies your Nostr account. Feel free to share it with others. ")],-1)),lx={key:0,class:"key-block__code"},ux={key:1},fx={class:"key-block"},dx=Ot(()=>y("div",null," Private key: ",-1)),hx=Ot(()=>y("div",{class:"key-block__desc"},[y("small",null,[Re(" Private key fully controls your Nostr account and used to cryptographically sign your messages. "),y("b",null,"Do not share your private key with anyone and keep it secure.")])],-1)),px={key:0,class:"key-block__code"},gx={key:1},Lr="Updating relays error. Please reload the page and try again or write us about the issue.",yx=Ae({__name:"Settings",props:{handleRelayConnect:{type:Function}},setup(e){const t=e,n=qn(),s=Bt(),o=rr(),r=n.pool,i=Mt(),a=V(""),c=V(""),l=V(""),u=x=>{if(l.value="",!(s.nsec?s.nsec.trim():"").length){l.value="Please provide your private key.";return}let L,P;try{if(L=s.getPrivkeyBytes(),!L)throw new Error;if(P=s.getPubkey(),!P.length)throw new Error}catch{l.value="Invalid private key. Please check it and try again.";return}const D={kind:10002,pubkey:P,created_at:Math.floor(Date.now()/1e3),content:"",tags:x};return lt(D,L)},f=async(x,A)=>{l.value="",x.target.checked?i.addWriteRelay(A):i.removeWriteRelay(A);const P=i.nip65Tags,D=u(P);if(D)return await r.publish(i.allRelaysUrlsWithSelectedRelay,D);l.value.length||(l.value=Lr)},d=async x=>{l.value="",i.removeUserRelay(x),t.handleRelayConnect(!0);const A=i.nip65Tags,L=u(A);if(L)return await r.publish(i.allRelaysUrlsWithSelectedRelay,L);l.value.length||(l.value=Lr)},h=async()=>{let x="";l.value="",c.value="";try{x=zt.normalizeURL(a.value)}catch{c.value="Invalid relay url.";return}i.addUserRelay(x),t.handleRelayConnect(!0),a.value="";const A=i.nip65Tags,L=u(A);if(L)return await r.publish(i.allRelaysUrlsWithSelectedRelay,L);l.value.length||(l.value=Lr)},v=()=>{o.updateShowImages(!o.showImages)},g=()=>{if(!s.isValidNsecPresented())return;const x=s.getPubkey();navigator.clipboard.writeText(Be.npubEncode(x))},m=()=>{s.isValidNsecPresented()&&navigator.clipboard.writeText(s.getPubkey())},w=()=>{s.isValidNsecPresented()&&navigator.clipboard.writeText(s.getPrivkey())},E=()=>{s.isValidNsecPresented()&&navigator.clipboard.writeText(s.getPrivkeyHex())};return(x,A)=>(C(),U(be,null,[FE,y("div",VE,[ye(HE,{showImages:ue(o).showImages,onToggleImages:v},null,8,["showImages"])]),jE,y("div",DE,le(l.value),1),y("ul",qE,[(C(!0),U(be,null,Qe(ue(i).userReadWriteRelays,(L,P)=>(C(),U("li",WE,[Re(le(L.url)+" ",1),y("div",KE,[y("input",{onChange:D=>f(D,L.url),class:"actions__checkbox",type:"checkbox",id:`write-${P}`,name:`write-${P}`,checked:L.type==="write"},null,40,zE),y("label",{class:"actions__label",for:`write-${P}`}," publish to relay",8,GE),JE,y("span",{onClick:()=>d(L.url),class:"actions__remove"},[ye(UE,{class:"trash-icon"}),YE],8,ZE)])]))),256))]),ue(i).userReadWriteRelays.length?ie("",!0):(C(),U("div",QE,[ue(i).isConnectedToRelay?(C(),U("span",XE,[Re(" The private key was not provided or the list with your relays was not found on "),y("b",null,le(ue(i).currentRelay.url),1)])):(C(),U("span",ex," Please connect to a relay to see the list of your relays. "))])),tx,y("div",nx,[Wt(y("input",{"onUpdate:modelValue":A[0]||(A[0]=L=>a.value=L),class:"add-relay__input",type:"text",placeholder:"[wss://]relay.url"},null,512),[[Hn,a.value]]),y("button",{onClick:h,class:"add-relay__btn"},"Add")]),y("div",sx,le(c.value),1),ox,y("div",rx,[y("div",ix,[ax,cx,y("div",null,[Re(" 🔑  "),ue(s).isValidNsecPresented()?(C(),U("code",lx,le(ue(Be).npubEncode(ue(s).getPubkey())),1)):(C(),U("span",ux,"Please login to get the key."))]),y("div",{class:"key-block__btns"},[y("button",{onClick:g}," Copy pubkey "),y("button",{onClick:m}," Copy hex ")])]),y("div",fx,[dx,hx,y("div",null,[Re(" 🔐  "),ue(s).isValidNsecPresented()?(C(),U("code",px," *************************************************************** ")):(C(),U("span",gx,"Please login to get the key."))]),y("div",{class:"key-block__btns"},[y("button",{onClick:w}," Copy privkey "),y("button",{onClick:E}," Copy hex ")])])])],64))}});const vx=xe(yx,[["__scopeId","data-v-d5b9796a"]]),sd=2*24*60*60,_x=()=>crypto.getRandomValues(new Uint32Array(1))[0]/(4294967295+1),aa=()=>Math.round(Date.now()/1e3),od=()=>Math.round(aa()-_x()*sd),rd=(e,t)=>nr.v2.utils.getConversationKey(or(e),t),id=(e,t,n)=>nr.v2.encrypt(JSON.stringify(e),rd(t,n)),Fc=(e,t)=>JSON.parse(nr.v2.decrypt(e.content,rd(t,e.pubkey))),mx=(e,t)=>{const n={kind:14,created_at:aa(),content:"",tags:[],...e,pubkey:sf(t)};return n.id=$s(n),n},wx=(e,t,n)=>lt({kind:13,content:id(e,t,n),created_at:od(),tags:[]},t),bx=(e,t)=>{const n=nf();return lt({kind:1059,content:id(e,n,t),created_at:od(),tags:[["p",t]]},n)};function Ex(e,t,n,s){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,s);const o=BigInt(32),r=BigInt(4294967295),i=Number(n>>o&r),a=Number(n&r),c=s?4:0,l=s?0:4;e.setUint32(t+c,i,s),e.setUint32(t+l,a,s)}const xx=(e,t,n)=>e&t^~e&n,Rx=(e,t,n)=>e&t^e&n^t&n;class Sx extends km{constructor(t,n,s,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=s,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ir(this.buffer)}update(t){Ic(this);const{view:n,buffer:s,blockLen:o}=this;t=Ff(t);const r=t.length;for(let i=0;i<r;){const a=Math.min(o-this.pos,r-i);if(a===o){const c=Ir(t);for(;o<=r-i;i+=o)this.process(c,i);continue}s.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ic(this),xm(t,this),this.finished=!0;const{buffer:n,view:s,blockLen:o,isLE:r}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(s,0),i=0);for(let f=i;f<o;f++)n[f]=0;Ex(s,o-8,BigInt(this.length*8),r),this.process(s,0);const a=Ir(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<l;f++)a.setUint32(4*f,u[f],r)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const s=t.slice(0,n);return this.destroy(),s}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:s,length:o,finished:r,destroyed:i,pos:a}=this;return t.length=o,t.pos=a,t.finished=r,t.destroyed=i,o%n&&t.buffer.set(s),t}}const kx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),an=new Uint32Array(64);class Cx extends Sx{constructor(){super(64,32,8,!1),this.A=rn[0]|0,this.B=rn[1]|0,this.C=rn[2]|0,this.D=rn[3]|0,this.E=rn[4]|0,this.F=rn[5]|0,this.G=rn[6]|0,this.H=rn[7]|0}get(){const{A:t,B:n,C:s,D:o,E:r,F:i,G:a,H:c}=this;return[t,n,s,o,r,i,a,c]}set(t,n,s,o,r,i,a,c){this.A=t|0,this.B=n|0,this.C=s|0,this.D=o|0,this.E=r|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)an[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const d=an[f-15],h=an[f-2],v=Rt(d,7)^Rt(d,18)^d>>>3,g=Rt(h,17)^Rt(h,19)^h>>>10;an[f]=g+an[f-7]+v+an[f-16]|0}let{A:s,B:o,C:r,D:i,E:a,F:c,G:l,H:u}=this;for(let f=0;f<64;f++){const d=Rt(a,6)^Rt(a,11)^Rt(a,25),h=u+d+xx(a,c,l)+kx[f]+an[f]|0,g=(Rt(s,2)^Rt(s,13)^Rt(s,22))+Rx(s,o,r)|0;u=l,l=c,c=a,a=i+h|0,i=r,r=o,o=s,s=h+g|0}s=s+this.A|0,o=o+this.B|0,r=r+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(s,o,r,i,a,c,l,u)}roundClean(){an.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ad=Cm(()=>new Cx),$x=async(e,t,n,s)=>{const o=n||new Sn,r=await Px(e.messages,t,o,s);return e.title=r,e},Px=async(e,t,n,s)=>{const o=e[0].event,{pubkey:r,tags:i}=o,a=i.filter(h=>h[0]==="p").map(h=>h[1]),c=[r,...a],l=new Set(c);if(l.size>2)return`group of ${l.size} events`;let u={};if(l.size===1)u={kinds:[0],authors:[r]};else if(l.size===2){const h=c.filter(v=>v!==t)[0];u={kinds:[0],authors:[h]}}const f=await n.get(s,u),d=JSON.parse((f==null?void 0:f.content)||"{}");return d.display_name?d.display_name:d.name?d.name:d.username?d.username:Be.npubEncode(r).slice(0,10)+"..."},Ix=async(e,t,n)=>{let s={};s={kinds:[0],authors:[e]};const o=await t.get(n,s),r=JSON.parse((o==null?void 0:o.content)||"{}");return r.display_name?r.display_name:r.name?r.name:r.username?r.username:Be.npubEncode(e).slice(0,10)+"..."},Vc=e=>{const n=e.tags.filter(s=>s[0]==="p").map(s=>s[1]).sort().join("");return or(ad(n))},Ax=e=>{const t=e.sort().join("");return or(ad(t))},jc=(e,t)=>{const n=Fc(e,t),s=Fc(n,t);return n.pubkey!==s.pubkey?null:s},Dc=e=>({event:e,isPublished:!0}),qc=e=>e.tags.filter(n=>(n[0]==="r"||n[0]==="relay")&&n[1]&&n[1].length).map(n=>n[1]).length>2,cd=Nt("chat",()=>{const e=V(new Set);function t(n){e.value.add(n)}return{ownRumors:e,addOwnRumor:t}}),Tx={key:0,class:"no-chats"},Lx=["onClick"],Ux=Ae({__name:"ChatsList",props:{chats:{},currentChatId:{},showChatsList:{type:Boolean},handleSelectChat:{type:Function}},setup(e){return(t,n)=>(C(),U("div",{class:Ce(["chats__list",{"chats__list_mobile-hidden":!t.showChatsList}])},[t.chats.length?ie("",!0):(C(),U("div",Tx," No chats yet... ")),(C(!0),U(be,null,Qe(t.chats,s=>(C(),U("div",{key:s.id,class:Ce(["chats__list-item",{active:t.currentChatId===s.id}]),onClick:o=>t.handleSelectChat(s.id)},[y("strong",null,le(s.title),1)],10,Lx))),128))],2))}});const Nx=xe(Ux,[["__scopeId","data-v-8b709582"]]),Bx={class:"message-date"},Mx=Ae({__name:"ChatMessagesList",props:{messages:{},userPubkey:{}},setup(e){return(t,n)=>(C(!0),U(be,null,Qe(t.messages,s=>(C(),U("div",{class:Ce(["message-line",{own:s.event.pubkey===t.userPubkey}])},[y("div",{class:Ce(["message",{own:s.event.pubkey===t.userPubkey}])},[y("div",null,le(s.event.content),1)],2),y("div",Bx,le(s.isPublished?ue(Hm)(s.event.created_at):"sending..."),1)],2))),256))}});const Ox=xe(Mx,[["__scopeId","data-v-a4799345"]]),Hx=e=>(Xe("data-v-05389505"),e=e(),et(),e),Fx={class:"chats__text-field"},Vx=Hx(()=>y("button",{type:"submit",class:"chats__send-btn"},"Send",-1)),jx=Ae({__name:"ChatMessageForm",props:{roomTags:{},recipientsPubkeys:{},userPubkey:{}},emits:["preSendMessage"],setup(e,{emit:t}){const n=t,s=V(""),o=Bt(),r=e,i=()=>{const a=s.value;if(!a.length)return;const c=o.getPrivkeyBytes();if(!c)return;const l=r.roomTags;if(!l.length)return;const u=r.recipientsPubkeys;if(!u.length)return;const f={content:a,tags:l},d=[];let h=null;u.forEach(v=>{const g=mx(f,c),m=wx(g,c,v),w=bx(m,v);d.push(w),v===r.userPubkey&&(h=g)}),s.value="",n("preSendMessage",h,d)};return(a,c)=>(C(),U("form",{onSubmit:Ns(i,["prevent"])},[y("div",Fx,[Wt(y("input",{"onUpdate:modelValue":c[0]||(c[0]=l=>s.value=l),class:"chats__input",type:"text"},null,512),[[Hn,s.value,void 0,{trim:!0}]]),Vx])],32))}});const Dx=xe(jx,[["__scopeId","data-v-05389505"]]),qx={},Wx={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-left",viewBox:"0 0 16 16"},Kx=y("path",{"fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"},null,-1),zx=[Kx];function Gx(e,t){return C(),U("svg",Wx,zx)}const Jx=xe(qx,[["render",Gx]]),{normalizeURL:Zx}=zt,Yx=Nt("chatsRelaysCache",()=>{const e=V({}),t=V(!1);function n(i){i.forEach(a=>{const{pubkey:c,tags:l}=a;e.value.hasOwnProperty(c)||(e.value[c]={relays:new Set,cache_created:Date.now()}),l.forEach(u=>{if((u[0]==="r"||u[0]==="relay")&&u[1]&&u[1].length){const f=Zx(u[1]);e.value[c].relays.add(f)}})})}function s(i){const a=new Set;return i.forEach(c=>{r(c).forEach(u=>a.add(u))}),a}function o(i){return e.value.hasOwnProperty(i)}function r(i){return o(i)?e.value[i].relays:new Set}return{metas:e,hasMeta:o,getMetaRelays:r,addMetas:n,getRelaysByPubkeys:s,isLoadingRelays:t}}),Qx=e=>(Xe("data-v-e5e92b02"),e=e(),et(),e),Xx={class:"chat-header"},eR=Qx(()=>y("span",null,"Chats",-1)),tR={class:"chat-title"},nR={class:"chats__chat-footer"},sR=Ae({__name:"ChatsConversation",props:{chat:{},userPubkey:{},showChatsList:{type:Boolean}},emits:["setMessageStatusToPublished","handleDeselectChat"],setup(e,{emit:t}){const n=t,s=cd(),o=Yx(),r=Mt(),a=qn().pool,c=V({}),l=V({}),u=e,f=V(null),d=me(()=>{var x,A,L;return(x=u==null?void 0:u.chat)!=null&&x.messages.length?(A=u.chat.messages[u.chat.messages.length-1])==null?void 0:A.event.tags:(L=u==null?void 0:u.chat)!=null&&L.initialRoomTags?u.chat.initialRoomTags:[]}),h=me(()=>d.value.length?[...new Set(d.value.map(x=>x[1]))]:[]),v=me(()=>h.value.filter(x=>x!==u.userPubkey));Tl(async()=>{g();let x=[];v.value.forEach(B=>{o.hasMeta(B)||x.push(B)});const{chat:A}=u;if(!x.length||l.value[A.id])return;l.value[A.id]=!0;const L=r.connectedUserReadWriteUrlsWithSelectedRelay,P=await a.querySync(L,{kinds:[bn.DM_RELAYS],authors:x}),D=new Set;if(P.forEach(B=>{B.tags.some(M=>(M[0]==="r"||M[0]==="relay")&&M[1]&&M[1].length)&&D.add(B.pubkey)}),o.addMetas(P),x=x.filter(B=>!D.has(B)),x.length){const B=await a.querySync(L,{kinds:[bn.RELAY_LIST_META],authors:x});o.addMetas(B)}l.value[A.id]=!1,await On(),setTimeout(()=>{var J;if(!((J=c.value[A.id])!=null&&J.length))return;const B=[...c.value[A.id]].reverse();c.value[A.id]=[],B.forEach(async M=>{await E(M.relays,M.wrapsBundle),n("setMessageStatusToPublished",A.id,M.rumorId)})},1)});const g=async()=>{await On();const x=f.value;x&&(x.scrollTop=x.scrollHeight)},m=async(x,A)=>{const{chat:L}=u,P={event:x,isPublished:!1};s.addOwnRumor(x.id),L.messages.push(P),g();const D=w();if(l.value[L.id]){c.value[L.id]||(c.value[L.id]=[]),c.value[L.id].push({rumorId:x.id,relays:D,wrapsBundle:A});return}await E(D,A);const B=L.messages.findIndex(J=>J.event.id===x.id);L.messages[B].isPublished=!0},w=()=>{const x=r.userChatRelaysUrls,A=o.getRelaysByPubkeys(v.value);return[...new Set([...x,...A])]},E=async(x,A)=>{const L=[];return A.forEach(P=>{L.push(...a.publish(x,P))}),await Promise.allSettled(L)};return(x,A)=>(C(),U("div",{class:Ce(["conversation",{"conversation_mobile-hidden":x.showChatsList}])},[y("div",Xx,[y("span",{onClick:A[0]||(A[0]=L=>n("handleDeselectChat")),class:"chats-link"},[ye(Jx),eR]),y("span",tR,le(x.chat?x.chat.title:"Select chat"),1)]),x.chat?(C(),U("div",{key:0,class:"chats__messages",ref_key:"messagesContainer",ref:f},[ye(Ox,{messages:x.chat.messages,userPubkey:x.userPubkey},null,8,["messages","userPubkey"])],512)):ie("",!0),y("div",nR,[ye(Dx,{roomTags:d.value,recipientsPubkeys:h.value,userPubkey:x.userPubkey,onPreSendMessage:m},null,8,["roomTags","recipientsPubkeys","userPubkey"])])],2))}});const oR=xe(sR,[["__scopeId","data-v-e5e92b02"]]),ld=e=>(Xe("data-v-94c27758"),e=e(),et(),e),rR=ld(()=>y("label",{for:"start-chat-pubkey"},[y("strong",null,"Profile's public key")],-1)),iR={class:"user-field"},aR=ld(()=>y("button",{type:"submit",class:"start-chat-btn"},"Start chat",-1)),cR={key:0,class:"notice"},lR={key:1,class:"error"},uR=Ae({__name:"ChatCreateRoomForm",props:{isLoadingProfile:{type:Boolean}},emits:["startChat"],setup(e,{emit:t}){const n=t,s=Mt(),o=V(""),r=V(""),i=()=>{const a=o.value;let c="";if(!s.isConnectedToReadWriteRelays){r.value="Please connect to a relay first.";return}if(!a.length){r.value="Provide the public key of the person to chat with.";return}if(ui(a))c=a;else try{let{data:l,type:u}=Be.decode(a);if(u!=="npub"){r.value="Public key is invalid. Please check it and try again.";return}c=l.toString()}catch{r.value="Public key is invalid. Please check it and try again.";return}r.value="",n("startChat",c)};return(a,c)=>(C(),U(be,null,[y("form",{onSubmit:Ns(i,["prevent"])},[rR,y("div",iR,[Wt(y("input",{"onUpdate:modelValue":c[0]||(c[0]=l=>o.value=l),class:"find-user-input",id:"start-chat-pubkey",type:"text",placeholder:"npub or hex of pubkey"},null,512),[[Hn,o.value,void 0,{trim:!0}]]),aR])],32),a.isLoadingProfile?(C(),U("div",cR," Loading profile info... ")):ie("",!0),r.value?(C(),U("div",lR,le(r.value),1)):ie("",!0)],64))}});const fR=xe(uR,[["__scopeId","data-v-94c27758"]]),ud=e=>(Xe("data-v-3771f7a9"),e=e(),et(),e),dR=ud(()=>y("div",{class:"chats-desc"},[y("p",null,[Re(" Chats use the new Nostr "),y("a",{target:"_blank",href:"https://github.com/nostr-protocol/nips/blob/master/44.md"},"NIP-44"),Re(" encryption standard. Make sure the person you are chatting with uses a Nostr client that supports this NIP. ")])],-1)),hR={class:"user-field-wrapper"},pR=ud(()=>y("h3",{class:"chats-title"}," Chats ",-1)),gR={key:0,class:"no-chats"},yR={key:1},vR={key:2,class:"chats"},_R=Ae({__name:"Chat",setup(e){const{normalizeURL:t}=zt;let n;const s=Mt(),o=Bt(),r=cd(),a=qn().pool,c=V(""),l=V(!1),u=V({}),f=V({}),d=V(""),h=V(!1),v=me(()=>Object.keys(u.value).length===0),g=me(()=>s.isConnectedToReadWriteRelays&&o.isNsecValidTemp),m=me(()=>Object.entries(u.value).map(([M,Z])=>Z).sort((M,Z)=>Z.created_at_last_message-M.created_at_last_message)),w=V(!0);ct(()=>o.nsec,async()=>{o.isNsecValidTemp&&(d.value=o.getPubkey())},{immediate:!0}),ct(()=>s.isConnectingToReadWriteRelays,M=>{M&&(h.value=!0)}),ct(()=>s.isConnectedToReadWriteRelays,M=>{M&&o.isNsecValidTemp&&A()}),mt(()=>{g.value&&A()});const E=M=>{u.value[M.id]=M,setTimeout(()=>{if(f.value[M.id]){const Z=[...f.value[M.id]];f.value[M.id]=[],Z.forEach(ae=>{u.value[M.id].messages.push(ae)})}},1),h.value=!1},x=M=>{console.error("Chats error:",M)},A=async()=>{h.value=!0;let M=s.connectedUserReadWriteUrlsWithSelectedRelay;const Z=o.getPubkey();u.value={},n==null||n.close();const ae=await a.querySync(M,{kinds:[bn.DM_RELAYS],authors:[Z]});if(ae.length){const Q=new Set;ae.forEach(Y=>{Y.tags.forEach(z=>{(z[0]==="r"||z[0]==="relay")&&z[1]&&z[1].length&&Q.add(t(z[1]))})}),Q.size&&(M=[...Q],s.setUserDMRelaysUrls(M))}const re=await a.querySync(M,{kinds:[bn.GIFT_WRAP],"#p":[Z]}),oe=o.getPrivkeyBytes();let O={},R=0;const k=new Set;re.forEach(Q=>{k.add(Q.id);const Y=jc(Q,oe);if(!Y||qc(Y))return;const z=Vc(Y),fe=Dc(Y);O[z]?O[z].messages.push(fe):O[z]={messages:[fe]},Y.created_at>R&&(R=Y.created_at)});const T=[];for(const Q in O){const Y=O[Q];Y.id=Q,Y.messages=Y.messages.sort((fe,K)=>fe.event.created_at-K.event.created_at),Y.created_at_last_message=Y.messages[Y.messages.length-1].event.created_at;const z=$x(Y,Z,a,s.connectedUserReadWriteUrlsWithSelectedRelay);T.push(z)}T.length?Yf(T,E,x):h.value=!1;const N=re.length?R-sd:null;L(M,N,k)},L=(M,Z=null,ae=null)=>{const re=o.getPubkey(),oe=o.getPrivkeyBytes(),O={kinds:[bn.GIFT_WRAP],"#p":[re]};Z&&(O.since=Z),n=a.subscribeMany(M,[O],{onevent(R){if(ae&&ae.has(R.id))return;const k=jc(R,oe);if(!k||qc(k))return;const T=Vc(k),N=Dc(k);if(u.value[T]){if(r.ownRumors.has(N.event.id))return;u.value[T].messages.push(N)}else f.value[T]||(f.value[T]=[]),f.value[T].push(N)}})},P=M=>{c.value=M,w.value=!1},D=()=>{c.value="",w.value=!0},B=(M,Z)=>{const ae=u.value[M].messages.find(re=>re.event.id===Z);ae&&(ae.isPublished=!0)},J=async M=>{const Z=M===d.value?[M]:[d.value,M],ae=Ax(Z);if(u.value[ae])return P(ae);l.value=!0;const re=await Ix(M,a,s.connectedUserReadWriteUrlsWithSelectedRelay);l.value=!1;const oe={id:ae,messages:[],title:re,initialRoomTags:Z.map(O=>["p",O]),created_at_last_message:aa()};E(oe),await On(),P(ae)};return(M,Z)=>(C(),U(be,null,[dR,y("div",hR,[ye(fR,{onStartChat:J,isLoadingProfile:l.value},null,8,["isLoadingProfile"])]),pR,!g.value&&!h.value?(C(),U("div",gR," Please connect and login to see you chats. ")):ie("",!0),h.value?(C(),U("div",yR," Loading chats... ")):ie("",!0),g.value&&!h.value?(C(),U("div",vR,[ye(Nx,{chats:m.value,currentChatId:c.value,handleSelectChat:P,showChatsList:w.value},null,8,["chats","currentChatId","showChatsList"]),v.value?ie("",!0):(C(),Le(oR,{key:0,onSetMessageStatusToPublished:B,onHandleDeselectChat:D,chat:u.value[c.value],userPubkey:d.value,showChatsList:w.value},null,8,["chat","userPubkey","showChatsList"]))])):ie("",!0)],64))}});const mR=xe(_R,[["__scopeId","data-v-3771f7a9"]]),wR=[{path:"/feed",name:"Feed",components:{default:Tr,messageInput:Mc}},{path:"/message",name:"Message",components:{default:Tr,signedEventInput:E2}},{path:"/chat",name:"Chat",component:mR},{path:"/log",name:"Log",components:{default:Tr,messageInput:Mc}},{path:"/user",name:"User",component:Hc,alias:["/event"]},{path:"/user/:id",component:Hc,alias:["/event/:id"]},{path:"/help",name:"Help",component:Oc},{path:"/",component:Oc,beforeEnter:(e,t,n)=>{const s=e.query.user,o=e.query.event;s!=null&&s.length?n({path:`/user/${s}`}):o!=null&&o.length?n({path:`/event/${o}`}):n()}},{path:"/settings",component:vx}],bR=cy({history:Rg(),routes:wR}),Ws=e=>(Xe("data-v-d1398494"),e=e(),et(),e),ER={class:"relay-fields"},xR={class:"relay-fields__wrapper"},RR={class:"relay-fields__relay"},SR={class:"relay-fields__select-field"},kR=Ws(()=>y("label",{class:"field-label_priv-key",for:"relays"},[y("strong",null,"Select relay")],-1)),CR={class:"field-elements"},$R=["value"],PR=Ws(()=>y("option",{value:"custom"},"custom url",-1)),IR={class:"message-fields__field"},AR=Ws(()=>y("label",{for:"priv_key"},[y("strong",null,"Private key (optional)")],-1)),TR={class:"field-elements"},LR={class:"remember-me"},UR=Ws(()=>y("label",{class:"remember-me__label",for:"remember-me"}," Remember me",-1)),NR={class:"error"},BR={key:0,class:"field"},MR=Ws(()=>y("label",{for:"relay_url"},[y("strong",null,"Relay URL")],-1)),OR={class:"field-elements"},HR=Ae({__name:"HeaderFields",props:{wsError:{}},emits:["relayConnect","relayDisconnect"],setup(e,{emit:t}){const n=e,s=t,o=Mt(),r=hs(),i=Bt(),a=V(!1),c=V(!1),l=me(()=>o.currentRelay.connected?o.selectInputRelayUrl!==o.currentRelay.url:!0);o.setSelectedRelay(Bc[0]);const u=w=>{const E=w.target.value;c.value=E==="custom",o.setSelectedRelay(E)};mt(()=>{i.isValidNsecPresented()&&(a.value=!0)});const f=w=>{if(!i.isNsecValid()){a.value=!1;return}a.value=!0,i.rememberMe&&localStorage.setItem("privkey",i.nsec),o.isConnectedToRelay&&(i.cachedNsec!==i.nsec||r.selectedFeedSource==="follows")&&s("relayConnect")},d=()=>{const w=nf();i.updateNsec(Be.nsecEncode(w)),a.value=!0},h=()=>{i.updateNsec(""),localStorage.removeItem("privkey"),a.value=!1,o.isConnectedToRelay&&o.userReadWriteRelays.length&&(r.setSelectedFeedSource("network"),s("relayDisconnect"),s("relayConnect"))},v=()=>{i.rememberMe?(localStorage.setItem("rememberMe","true"),localStorage.setItem("privkey",i.nsec)):localStorage.clear()},g=()=>{s("relayConnect")},m=()=>{s("relayDisconnect")};return(w,E)=>(C(),U(be,null,[y("p",ER,[y("div",xR,[y("div",RR,[y("div",SR,[kR,y("div",CR,[y("select",{class:"select-relay__select",onChange:u,name:"relays",id:"relays"},[(C(!0),U(be,null,Qe(ue(Bc),x=>(C(),U("option",{value:x},le(x),9,$R))),256)),PR],32),l.value?(C(),U("button",{key:0,onClick:g,class:"select-relay__btn"},le(ue(o).isConnectingToRelay?"Connecting...":"Connect"),1)):(C(),U("button",{key:1,onClick:m,class:"select-relay__btn"}," Disconnect "))])])]),y("div",IR,[AR,y("div",TR,[Wt(y("input",{onInput:f,"onUpdate:modelValue":E[0]||(E[0]=x=>ue(i).nsec=x),class:"priv-key-input",id:"priv_key",type:"password",placeholder:"nsec..."},null,544),[[Hn,ue(i).nsec]]),a.value?ie("",!0):(C(),U("button",{key:0,onClick:d,class:"random-key-btn"},"Random")),a.value?(C(),U("button",{key:1,onClick:h,class:"random-key-btn"},"Logout")):ie("",!0)]),y("div",LR,[Wt(y("input",{onChange:v,class:"remember-me__input",type:"checkbox",id:"remember-me","onUpdate:modelValue":E[1]||(E[1]=x=>ue(i).rememberMe=x)},null,544),[[qp,ue(i).rememberMe]]),UR])])]),y("div",NR,le(n.wsError),1)]),c.value?(C(),U("div",BR,[MR,y("div",OR,[Wt(y("input",{"onUpdate:modelValue":E[2]||(E[2]=x=>ue(o).selectInputCustomRelayUrl=x),class:"relay-input",id:"relay_url",type:"text",placeholder:"[wss://]relay.example.com"},null,512),[[Hn,ue(o).selectInputCustomRelayUrl]])])])):ie("",!0)],64))}});const FR=xe(HR,[["__scopeId","data-v-d1398494"]]),VR={class:"tabs"},jR=Ae({__name:"App",setup(e){const t=Vo(),n=Vs(),s=sr(),o=Bt(),r=Mt(),i=hs(),c=qn().pool;let l,u;const f=localStorage.getItem("rememberMe")==="true";o.setRememberMe(f);const d=f?localStorage.getItem("privkey"):"";o.updateNsec(d||"");const h=new Set,v=new Set;let g=V([]),m=V(0),w=V(""),E=V("");const x=V([]),A=V(""),L=V(""),P=V(""),D=V(!1),B=me(()=>s.cachedUrlNpub.length?`/user/${s.cachedUrlNpub}`:"/user"),J=k=>{x.value.unshift(k)},M=async()=>{var H,G;const k=r.connectedFeedRelaysUrls;if(!k.length)return;const T=i.newEventsToShow;if(T.length<2)return;const N=T[T.length-1].pubkey,Q=T[T.length-2].pubkey,Y={kinds:[0],authors:[N],limit:1},z={kinds:[0],authors:[Q],limit:1},fe=await c.querySync(k,Y),K=await c.querySync(k,z);u&&(!((H=fe[0])!=null&&H.content)||!((G=K[0])!=null&&G.content)||(w.value=JSON.parse(fe[0].content).picture,E.value=JSON.parse(K[0].content).picture,i.setNewEventsBadgeImageUrls([w.value,E.value]),m.value=T.length,i.setNewEventsBadgeCount(T.length),i.setShowNewEventsBadge(!0)))},Z=k=>new Promise(T=>setTimeout(T,k)),ae=(k,T,N)=>new Promise(Q=>{const Y=[];let z,fe=N;if(N&&N.length&&N[0].limit){let{limit:G,...b}=N[0];fe=[b],z=G}let K=!1;const H=k.subscribeMany(T,fe,{onevent(G){if(K)return;const b=Je.parse(G);b.reply||b.root||(Y.push(G),z&&Y.length>=z&&(H.close(),K=!0,Q(Y.slice(0,z))))},oneose(){H.close();const G=z?Y.slice(0,z):Y;Q(G)}})});async function re(k=!1,T=!1){var _,S;if(r.isConnectingToRelay)return;let N=r.selectInputRelayUrl;if(N==="custom"){const $=r.selectInputCustomRelayUrl;N=$.length?zt.normalizeURL($):""}if(!N.length)return;if(o.isNotValidNsecPresented()){A.value="Private key is invalid. Please check it and try again.";return}else o.updateCachedNsec(o.nsec);!k&&r.currentRelay.connected&&(r.currentRelay.close(),J([{type:"text",value:"disconnected from "},{type:"bold",value:r.currentRelay.url}])),l&&l.close(),u&&(clearInterval(u),u=0),k||(r.setReedRelays([]),r.setWriteRelays([]));let Q;if(r.setIsConnectingToReadWriteRelaysStatus(!0),r.setIsConnectedToReadWriteRelaysStatus(!1),!k){try{r.setConnectionToRelayStatus(!0),i.setLoadingFeedSourceStatus(!0);try{Q=await li.connect(N)}catch{await Z(500),Q=await li.connect(N)}A.value=""}catch{let I=`WebSocket connection to "${N}" failed. You can try again. `;navigator.onLine?I+="Also check WebSocket address. Relay address should be a correct WebSocket URL. Or relay is unavailable or you are offline.":I+="Or check your internet connection.",A.value=I,r.setConnectionToRelayStatus(!1);return}if(r.updateCurrentRelay(Q),J([{type:"text",value:"connected to "},{type:"bold",value:Q.url}]),o.isNotValidNsecPresented()&&(A.value="Private key is invalid. Please check it and try again."),o.isValidNsecPresented()){const $=o.getPubkey(),W=await Om(Q,[{kinds:[10002],limit:1,authors:[$]}],3e3);if(W&&W.tags.length){const{read:ne,write:X}=Gf(W);r.setReedRelays(ne),r.setWriteRelays(X)}}}i.setShowNewEventsBadge(!1),g.value=[],i.updateNewEventsToShow([]),(T||k)&&i.setLoadingFeedSourceStatus(!0);const Y=[],z=[];r.userReadWriteRelays.length&&(await Promise.all(r.userReadWriteRelays.map(async I=>{const W=await eo(I.url);return{url:I.url,connected:W,type:I.type}}))).forEach(I=>{if(k&&!r.reedRelays.includes(I.url)||(I.connected&&(Y.push(I.url),I.type==="write"&&z.push(I.url)),(Q==null?void 0:Q.url)===I.url))return;const W=I.connected?"connected to ":"failed to connect to ";J([{type:"text",value:W},{type:"bold",value:I.url}])}),r.setConnectedUserReadRelayUrls(Y),r.setConnectedUserWriteRelayUrls(z),r.setIsConnectingToReadWriteRelaysStatus(!1),r.setIsConnectedToReadWriteRelaysStatus(!0);let fe=Y.length?Y:[N];const K=o.getPubkey(),H={};let G=[];if(i.isFollowsSource&&o.isValidNsecPresented()){const $=await c.get(fe,{kinds:[3],limit:1,authors:[K]});if($&&$.tags.length){G=$.tags.map(j=>j[1]);const I=await c.querySync(fe,{kinds:[10002],authors:G}),W=new Set;I.forEach(j=>{j.tags.forEach(se=>{if(se[0]!=="r")return;const de=zt.normalizeURL(se[1]);fe.includes(de)||W.add(de)})});const ne=await Promise.all(Array.from(W).map(async j=>{const se=await eo(j,1e3);return{url:j,connected:se}})),X=ne.some(j=>j.connected);J(X?[{type:"text",value:"Connected to follows relays"}]:[{type:"text",value:"Failed to connect to follows relays"}]);const ee=ne.filter(j=>j.connected).map(j=>j.url);I.forEach(j=>{const se=[];j.tags.forEach(de=>{if(de[0]!=="r")return;const ce=zt.normalizeURL(de[1]);(ee.includes(ce)||fe.includes(ce))&&se.push(ce)}),H[j.pubkey]=se}),fe=[...new Set([...fe,...ee])]}}let b={kinds:[1],limit:Mn};G=G.filter($=>$!==K),G.length&&(b.authors=G),r.setConnectedFeedRelayUrls(fe);const q=(await ae(c,fe,[b])).sort(($,I)=>I.created_at-$.created_at),te=[],he=[],pe={};for(const $ of q){const I=$.pubkey,W=i.isFollowsSource&&((_=H[I])!=null&&_.length)?H[I]:fe;let ne=i.isFollowsSource&&((S=H[I])==null?void 0:S.length)&&W.includes(Lc),X=null,ee=null;const j=Lm($);!ne&&!j.includes(I)&&j.push(I),ne&&!he.includes(I)&&(he.push(I),ee=c.get([Lc],{kinds:[0],authors:[I]}));const se=[];j.forEach(ge=>{he.includes(ge)||(he.push(ge),se.push(ge))}),se.length&&(X=c.querySync(W,{kinds:[0],authors:se}));const de=c.querySync(W,{kinds:[1,6,7],"#e":[$.id]}),ce=Promise.all([$,X,de,ee]);te.push(ce)}h.clear(),i.updatePaginationEventsIds([]),i.updateEvents([]);for(const $ of te){const I=await $,W=I[0],ne=I[1]||[],X=I[2]||[];let ee=I[3];const j=[],se=[];ee&&(pe[ee.pubkey]=ee,j.push(ee),se.push(ee.pubkey)),Nm(ne).forEach(ce=>{const ge=ce;pe[ce.pubkey]=ce,j.push(ge),se.push(ge.pubkey),ce.pubkey===W.pubkey&&(ee=ce)}),he.forEach(ce=>{if(se.includes(ce))return;pe.hasOwnProperty(ce)||(pe[ce]=null);const ge=pe[ce];j.push(ge),ce===W.pubkey&&(ee=ge)}),Um(W,j),Pt([W],[ee]),$m(W,X),i.pushToEvents(W),i.isLoadingFeedSource&&(i.setLoadingFeedSourceStatus(!1),i.setLoadingMoreStatus(!0))}i.setLoadingMoreStatus(!1),q.forEach($=>{h.add($.id),i.pushToPaginationEventsIds($.id)}),r.setConnectionToRelayStatus(!1);let p={kinds:[1],limit:1};G.length&&(p.authors=G),l=c.subscribeMany(fe,[p],{onevent($){if(h.has($.id))return;const I=Je.parse($);I.reply||I.root||(g.value.push({id:$.id,pubkey:$.pubkey}),i.pushToNewEventsToShow({id:$.id,pubkey:$.pubkey}))}}),u=setInterval(M,3e3)}const oe=async()=>{if(i.isLoadingNewEvents)return;i.setLoadingNewEventsStatus(!0);const k=r.connectedFeedRelaysUrls;if(!k.length)return;t.push({path:`${n.path}`});let T=i.newEventsToShow;i.updateNewEventsToShow(i.newEventsToShow.filter(b=>!T.includes(b)));const N=T.map(b=>b.id),Q=Mn;i.updatePaginationEventsIds(i.paginationEventsIds.concat(N));const Y=i.paginationEventsIds.slice(-Q),z=await c.querySync(k,{ids:Y}),fe=Array.from(new Set([...z.map(b=>b.pubkey)])),H=(await Promise.all([Promise.all(fe.map(async b=>c.get(k,{kinds:[0],authors:[b]}))),gn(z,k,c)]))[0];let G=Pt(z,H);G.forEach(b=>h.add(b.id)),G=G.sort((b,F)=>F.created_at-b.created_at),i.updateEvents(G),i.setShowNewEventsBadge(!1),i.setLoadingNewEventsStatus(!1),J([{type:"text",value:`loaded ${T.length}`},{type:"text",value:" new event(s) from "},{type:"bold",value:r.connectedFeedRelaysPrettyStr}])},O=async(k,T)=>{let N=r.writeRelays;if(T==="json"){const H=r.additionalRelaysUrlsForSignedEvent;let G=[];if(H.length){let b="Can't connect to these relays: ",F=!1;for(const te of H)if(te!=null&&te.length){if(!await eo(te)){F=!0,b+=`${te}, `;continue}G.push(te)}const q=r.currentRelay.url;if(await eo(q)||(F=!0,b+=`${q}`),F){b+=". Relays are unavailable or you are offline.",L.value=b,D.value=!1;return}}N=[r.currentRelay.url,...G],N=[...new Set(N)]}if(D.value)return;D.value=!0;const Q=r.connectedUserReadRelayUrls;let Y=null;if(Q.length){const H=[{kinds:[1],ids:[k.id],limit:1}];Y=c.subscribeMany(Q,H,{async onevent(G){const b=setInterval(async()=>{g.value.some(F=>F.id==G.id)&&(clearInterval(b),await oe(),Y==null||Y.close())},100)}})}const z=await Jf(N,c,k);z.forEach(H=>{H.success?J([{type:"text",value:"✅ new event broadcasted to "},{type:"bold",value:H.relay}]):J([{type:"text",value:"❌ failed to publish to "},{type:"bold",value:H.relay}])}),z.every(H=>H.success===!1)&&T==="json"&&Q.length&&(Y==null||Y.close()),z.some(H=>H.success===!1)||(T==="text"&&i.updateMessageToBroadcast(""),T==="json"&&i.updateSignedJson("")),D.value=!1},R=()=>{if(!r.isConnectedToRelay)return;clearInterval(u),i.setShowNewEventsBadge(!1),g.value=[],i.updateNewEventsToShow([]);const k=r.currentRelay;k.close(),l==null||l.close(),r.setConnectedUserReadRelayUrls([]),r.setConnectedFeedRelayUrls([]),r.setReedRelays([]),r.setWriteRelays([]),J([{type:"text",value:"disconnected from "},{type:"bold",value:k.url}])};return(k,T)=>{const N=Ts("router-link"),Q=Ts("router-view");return C(),U(be,null,[ye(FR,{onRelayConnect:re,onRelayDisconnect:R,wsError:A.value},null,8,["wsError"]),y("div",VR,[ye(N,{class:"tab-link",to:"/feed"},{default:Ke(()=>[Re("Feed")]),_:1}),ye(N,{class:"tab-link",to:B.value},{default:Ke(()=>[Re("User")]),_:1},8,["to"]),ye(N,{class:"tab-link",to:"/message"},{default:Ke(()=>[Re("Message")]),_:1}),ye(N,{class:"tab-link",to:"/chat"},{default:Ke(()=>[Re("Chat")]),_:1}),ye(N,{class:"tab-link",to:"/help"},{default:Ke(()=>[Re("Help")]),_:1}),ye(N,{class:"tab-link",to:"/log"},{default:Ke(()=>[Re("Log")]),_:1}),ye(N,{class:"tab-link",to:"/settings"},{default:Ke(()=>[Re("Settings")]),_:1})]),ye(Q,{name:"messageInput",onBroadcastEvent:O,isSendingMessage:D.value,sentEventIds:ue(v),broadcastNotice:P.value},null,8,["isSendingMessage","sentEventIds","broadcastNotice"]),ye(Q,{name:"signedEventInput",onBroadcastEvent:O,isSendingMessage:D.value,broadcastError:L.value},null,8,["isSendingMessage","broadcastError"]),ye(Q,{onLoadNewRelayEvents:oe,onHandleRelayConnect:re,handleRelayConnect:re,eventsLog:x.value},null,8,["eventsLog"])],64)}}});const DR=xe(jR,[["__scopeId","data-v-09639047"]]),qR=Zp(DR),WR=eg();qR.use(bR).use(WR).mount("#app");
//# sourceMappingURL=main.js.map
